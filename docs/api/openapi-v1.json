{
  "openapi": "3.1.0",
  "info": {
    "title": "ArgusAI API",
    "description": "\n## Overview\n\nArgusAI is an AI-powered event detection system for home security. It analyzes video feeds\nfrom UniFi Protect cameras, RTSP IP cameras, and USB webcams, detects motion and smart events,\nand generates natural language descriptions using multi-provider AI.\n\n## Authentication\n\nMost endpoints require authentication via JWT bearer token. Obtain a token by calling\n`POST /api/v1/auth/login` with valid credentials.\n\nInclude the token in the `Authorization` header:\n```\nAuthorization: Bearer <your_token>\n```\n\n## Key Features\n\n- **Camera Management**: Configure RTSP, USB, and UniFi Protect cameras\n- **Event Detection**: AI-powered motion and object detection with natural language descriptions\n- **Smart Detection**: Person, vehicle, package, and animal classification\n- **Entity Recognition**: Identify recurring visitors and vehicles\n- **Push Notifications**: Web push notifications for important events\n- **Home Automation**: MQTT/Home Assistant and HomeKit integration\n\n## Rate Limits\n\n- Authentication endpoints: 5 requests per 15 minutes per IP\n- General API: No rate limiting (intended for single-user deployment)\n\n## Versioning\n\nAll API endpoints are prefixed with `/api/v1`. Future breaking changes will use `/api/v2`.\n",
    "contact": {
      "name": "ArgusAI",
      "url": "https://github.com/bbengt1/ArgusAI"
    },
    "license": {
      "name": "MIT License",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/cameras/discover/status": {
      "get": {
        "tags": [
          "discovery"
        ],
        "summary": "Check discovery availability",
        "description": "Check if ONVIF camera discovery feature is available",
        "operationId": "get_discovery_status_api_v1_cameras_discover_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscoveryStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/discover": {
      "post": {
        "tags": [
          "discovery"
        ],
        "summary": "Discover ONVIF cameras",
        "description": "Scan local network for ONVIF-compatible cameras using WS-Discovery",
        "operationId": "discover_cameras_api_v1_cameras_discover_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/DiscoveryRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Request"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscoveryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/discover/clear-cache": {
      "post": {
        "tags": [
          "discovery"
        ],
        "summary": "Clear discovery cache",
        "description": "Clear cached discovery results to force a fresh scan",
        "operationId": "clear_discovery_cache_api_v1_cameras_discover_clear_cache_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Clear Discovery Cache Api V1 Cameras Discover Clear Cache Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/discover/device/status": {
      "get": {
        "tags": [
          "discovery"
        ],
        "summary": "Check device details availability",
        "description": "Check if ONVIF device details query feature is available",
        "operationId": "get_device_details_status_api_v1_cameras_discover_device_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeviceDetailsStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/discover/device": {
      "post": {
        "tags": [
          "discovery"
        ],
        "summary": "Get device details",
        "description": "Query a discovered ONVIF device for detailed information (manufacturer, model, stream profiles)",
        "operationId": "get_device_details_api_v1_cameras_discover_device_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeviceDetailsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeviceDetailsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/discover/test": {
      "post": {
        "tags": [
          "discovery"
        ],
        "summary": "Test RTSP connection",
        "description": "Test an RTSP camera connection without saving the camera configuration",
        "operationId": "test_camera_connection_api_v1_cameras_discover_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestConnectionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Connection test result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestConnectionResponse"
                },
                "examples": {
                  "success": {
                    "summary": "Successful connection",
                    "value": {
                      "success": true,
                      "latency_ms": 234,
                      "resolution": "1920x1080",
                      "fps": 30,
                      "codec": "H.264"
                    }
                  },
                  "failure": {
                    "summary": "Failed connection",
                    "value": {
                      "success": false,
                      "latency_ms": 5000,
                      "error": "Connection timed out after 5 seconds"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Invalid RTSP URL format"
          }
        }
      }
    },
    "/api/v1/motion-events/export": {
      "get": {
        "tags": [
          "motion-events"
        ],
        "summary": "Export Motion Events",
        "description": "Export motion events to CSV format\n\nStreams motion events in batches for memory efficiency. Supports filtering by date range\nand camera. Returns a downloadable CSV file with motion detection data.\n\nArgs:\n    format: Export format - must be \"csv\"\n    start_date: Optional start date filter (inclusive)\n    end_date: Optional end date filter (inclusive)\n    camera_id: Optional filter by camera UUID\n    db: Database session\n\nReturns:\n    StreamingResponse with Content-Disposition header for download\n\n**CSV Columns:**\n- timestamp: ISO 8601 timestamp of motion detection\n- camera_id: UUID of the camera\n- camera_name: Human-readable camera name\n- confidence: Motion detection confidence (0.0-1.0)\n- algorithm: Detection algorithm used (mog2, knn, frame_diff)\n- x, y, width, height: Bounding box coordinates (if available)\n- zone_id: Detection zone ID (if applicable)\n\n**Status Codes:**\n- 200: Success (streaming response)\n- 422: Invalid format parameter\n- 500: Internal server error\n\n**Examples:**\n- GET /motion-events/export?format=csv\n- GET /motion-events/export?format=csv&start_date=2025-11-01&end_date=2025-11-17\n- GET /motion-events/export?format=csv&camera_id=abc123",
        "operationId": "export_motion_events_api_v1_motion_events_export_get",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^csv$",
              "description": "Export format (currently only csv supported)",
              "title": "Format"
            },
            "description": "Export format (currently only csv supported)"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Start date (YYYY-MM-DD)",
              "title": "Start Date"
            },
            "description": "Start date (YYYY-MM-DD)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End date (YYYY-MM-DD)",
              "title": "End Date"
            },
            "description": "End date (YYYY-MM-DD)"
          },
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera UUID",
              "title": "Camera Id"
            },
            "description": "Filter by camera UUID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/motion-events": {
      "get": {
        "tags": [
          "motion-events"
        ],
        "summary": "List Motion Events",
        "description": "List motion events with optional filtering and pagination\n\nArgs:\n    camera_id: Optional filter by camera UUID\n    start_date: Optional filter by start date (inclusive)\n    end_date: Optional filter by end date (inclusive)\n    min_confidence: Optional minimum confidence threshold\n    limit: Maximum events to return (default 50, max 200)\n    offset: Pagination offset (default 0)\n    db: Database session\n\nReturns:\n    List of motion events ordered by timestamp DESC (most recent first)\n\nExamples:\n    - GET /motion-events?limit=10\n    - GET /motion-events?camera_id=abc123&start_date=2025-11-01T00:00:00Z\n    - GET /motion-events?min_confidence=0.8&limit=20&offset=40",
        "operationId": "list_motion_events_api_v1_motion_events_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera ID",
              "title": "Camera Id"
            },
            "description": "Filter by camera ID"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by start date (ISO 8601)",
              "title": "Start Date"
            },
            "description": "Filter by start date (ISO 8601)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by end date (ISO 8601)",
              "title": "End Date"
            },
            "description": "Filter by end date (ISO 8601)"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence score",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence score"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Maximum number of events to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of events to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of events to skip (pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of events to skip (pagination)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MotionEventResponse"
                  },
                  "title": "Response List Motion Events Api V1 Motion Events Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/motion-events/{event_id}": {
      "get": {
        "tags": [
          "motion-events"
        ],
        "summary": "Get Motion Event",
        "description": "Get single motion event by ID\n\nArgs:\n    event_id: UUID of motion event\n    db: Database session\n\nReturns:\n    Motion event with full details (including frame thumbnail)\n\nRaises:\n    404: Motion event not found",
        "operationId": "get_motion_event_api_v1_motion_events__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MotionEventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "motion-events"
        ],
        "summary": "Delete Motion Event",
        "description": "Delete motion event (user data ownership)\n\nArgs:\n    event_id: UUID of motion event to delete\n    db: Database session\n\nReturns:\n    Success confirmation\n\nRaises:\n    404: Motion event not found",
        "operationId": "delete_motion_event_api_v1_motion_events__event_id__delete",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/motion-events/stats": {
      "get": {
        "tags": [
          "motion-events"
        ],
        "summary": "Get Motion Event Stats",
        "description": "Get motion event statistics\n\nArgs:\n    camera_id: Optional filter by camera ID\n    days: Number of days to include in stats (default 7, max 90)\n    db: Database session\n\nReturns:\n    Statistics including:\n    - total_events: Total event count\n    - events_by_camera: Event counts grouped by camera\n    - events_by_hour: Event counts by hour of day (0-23)\n    - average_confidence: Average confidence score\n\nExamples:\n    - GET /motion-events/stats\n    - GET /motion-events/stats?camera_id=abc123&days=30",
        "operationId": "get_motion_event_stats_api_v1_motion_events_stats_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera ID",
              "title": "Camera Id"
            },
            "description": "Filter by camera ID"
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 90,
              "minimum": 1,
              "description": "Number of days to include (default 7)",
              "default": 7,
              "title": "Days"
            },
            "description": "Number of days to include (default 7)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MotionEventStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Create Camera",
        "description": "Create a new camera and start capture thread\n\nArgs:\n    camera_data: Camera configuration from request body\n    db: Database session\n\nReturns:\n    Created camera object\n\nRaises:\n    409: Camera with same name already exists\n    400: Validation error or failed to start camera",
        "operationId": "create_camera_api_v1_cameras_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CameraCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "List Cameras",
        "description": "List all cameras with optional filtering\n\nArgs:\n    is_enabled: Optional filter by enabled status\n    db: Database session\n\nReturns:\n    List of camera objects",
        "operationId": "list_cameras_api_v1_cameras_get",
        "parameters": [
          {
            "name": "is_enabled",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "title": "Is Enabled"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CameraResponse"
                  },
                  "title": "Response List Cameras Api V1 Cameras Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/test": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Test Camera Connection Presave",
        "description": "Test camera connection before saving to database (Story P6-1.1)\n\nTests RTSP or USB camera connection using provided configuration.\nNo database record is created - this is a pre-validation endpoint.\n\nArgs:\n    camera_config: Camera configuration to test (type, rtsp_url, credentials, device_index)\n\nReturns:\n    Test result with success status, stream info (resolution, FPS, codec), and thumbnail\n\nRaises:\n    422: Validation error (invalid RTSP URL format, missing required fields)",
        "operationId": "test_camera_connection_presave_api_v1_cameras_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CameraTestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraTestDetailedResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}": {
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera",
        "description": "Get single camera by ID\n\nArgs:\n    camera_id: UUID of camera\n    db: Database session\n\nReturns:\n    Camera object\n\nRaises:\n    404: Camera not found",
        "operationId": "get_camera_api_v1_cameras__camera_id__get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "cameras"
        ],
        "summary": "Update Camera",
        "description": "Update existing camera configuration\n\nArgs:\n    camera_id: UUID of camera to update\n    camera_data: Fields to update\n    db: Database session\n\nReturns:\n    Updated camera object\n\nRaises:\n    404: Camera not found\n    400: Validation error",
        "operationId": "update_camera_api_v1_cameras__camera_id__put",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CameraUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "cameras"
        ],
        "summary": "Delete Camera",
        "description": "Delete camera and stop capture thread\n\nArgs:\n    camera_id: UUID of camera to delete\n    db: Database session\n\nReturns:\n    Success confirmation\n\nRaises:\n    404: Camera not found",
        "operationId": "delete_camera_api_v1_cameras__camera_id__delete",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/reconnect": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Reconnect Camera",
        "description": "Force reconnect a camera (stop and restart capture)\n\nArgs:\n    camera_id: UUID of camera to reconnect\n    db: Database session\n\nReturns:\n    Success status and message\n\nRaises:\n    404: Camera not found\n    400: Camera is disabled",
        "operationId": "reconnect_camera_api_v1_cameras__camera_id__reconnect_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/test": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Test Camera Connection",
        "description": "Test camera connection without starting persistent capture\n\nArgs:\n    camera_id: UUID of camera to test\n    db: Database session\n\nReturns:\n    Test result with success status and optional thumbnail\n\nRaises:\n    404: Camera not found",
        "operationId": "test_camera_connection_api_v1_cameras__camera_id__test_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/motion/config": {
      "put": {
        "tags": [
          "cameras"
        ],
        "summary": "Update Motion Config",
        "description": "Update motion detection configuration for camera\n\nArgs:\n    camera_id: UUID of camera\n    config: Motion configuration updates\n    db: Database session\n\nReturns:\n    Updated camera object with new motion config\n\nRaises:\n    404: Camera not found\n    422: Validation error\n\nSide Effects:\n    - Reloads motion detector if algorithm changed\n    - Configuration persists across restarts (AC-12)",
        "operationId": "update_motion_config_api_v1_cameras__camera_id__motion_config_put",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MotionConfigUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Motion Config",
        "description": "Get current motion detection configuration for camera\n\nArgs:\n    camera_id: UUID of camera\n    db: Database session\n\nReturns:\n    Motion configuration (enabled, sensitivity, cooldown, algorithm)\n\nRaises:\n    404: Camera not found",
        "operationId": "get_motion_config_api_v1_cameras__camera_id__motion_config_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MotionConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/motion/test": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Test Motion Detection",
        "description": "Test motion detection on current frame (ephemeral, not saved to database)\n\nArgs:\n    camera_id: UUID of camera\n    test_request: Optional overrides for sensitivity and algorithm\n    db: Database session\n\nReturns:\n    Motion test results with preview image\n\nRaises:\n    404: Camera not found\n    400: Camera not running or failed to capture frame\n\nNote:\n    - Ephemeral: Results NOT saved to database (DECISION-4)\n    - Rate limit: 10 requests/minute per camera (TODO: implement rate limiting)",
        "operationId": "test_motion_detection_api_v1_cameras__camera_id__motion_test_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MotionTestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MotionTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/zones": {
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera Zones",
        "description": "Get detection zones for a camera\n\nArgs:\n    camera_id: UUID of camera\n    db: Database session\n\nReturns:\n    List of DetectionZone objects (empty list if no zones configured)\n\nRaises:\n    404: Camera not found",
        "operationId": "get_camera_zones_api_v1_cameras__camera_id__zones_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DetectionZone"
                  },
                  "title": "Response Get Camera Zones Api V1 Cameras  Camera Id  Zones Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "cameras"
        ],
        "summary": "Update Camera Zones",
        "description": "Update detection zones for a camera\n\nArgs:\n    camera_id: UUID of camera\n    zones: List of DetectionZone objects\n    db: Database session\n\nReturns:\n    Updated camera object with new zones\n\nRaises:\n    404: Camera not found\n    422: Invalid zone configuration",
        "operationId": "update_camera_zones_api_v1_cameras__camera_id__zones_put",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/DetectionZone"
                },
                "title": "Zones"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/zones/test": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Test Camera Zones",
        "description": "Test detection zones with current camera frame\n\nArgs:\n    camera_id: UUID of camera\n    test_zones: Optional zones to test (uses camera's zones if not provided)\n    db: Database session\n\nReturns:\n    Preview image with zones overlay and motion detection result\n\nRaises:\n    404: Camera not found\n    500: No frame available or capture error",
        "operationId": "test_camera_zones_api_v1_cameras__camera_id__zones_test_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/DetectionZone"
                },
                "title": "Test Zones"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/schedule": {
      "put": {
        "tags": [
          "cameras"
        ],
        "summary": "Update Camera Schedule",
        "description": "Update detection schedule for camera\n\nArgs:\n    camera_id: Camera UUID\n    schedule: DetectionSchedule schema with time/day configuration\n\nReturns:\n    Updated camera with new detection_schedule\n\nRaises:\n    404: Camera not found\n    422: Invalid schedule format\n\nExample Request:\n    PUT /api/v1/cameras/{id}/schedule\n    {\n        \"id\": \"schedule-1\",\n        \"name\": \"Weekday Nights\",\n        \"days_of_week\": [0, 1, 2, 3, 4],\n        \"start_time\": \"22:00\",\n        \"end_time\": \"06:00\",\n        \"enabled\": true\n    }",
        "operationId": "update_camera_schedule_api_v1_cameras__camera_id__schedule_put",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DetectionSchedule"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera Schedule",
        "description": "Get detection schedule for camera\n\nArgs:\n    camera_id: Camera UUID\n\nReturns:\n    DetectionSchedule or null if not configured\n\nRaises:\n    404: Camera not found\n\nExample Response:\n    {\n        \"id\": \"schedule-1\",\n        \"name\": \"Weekday Nights\",\n        \"days_of_week\": [0, 1, 2, 3, 4],\n        \"start_time\": \"22:00\",\n        \"end_time\": \"06:00\",\n        \"enabled\": true\n    }",
        "operationId": "get_camera_schedule_api_v1_cameras__camera_id__schedule_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/DetectionSchedule"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Get Camera Schedule Api V1 Cameras  Camera Id  Schedule Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/schedule/status": {
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera Schedule Status",
        "description": "Get current schedule status for camera\n\nArgs:\n    camera_id: Camera UUID\n\nReturns:\n    Current schedule active state with reason\n\nRaises:\n    404: Camera not found\n\nExample Response:\n    {\n        \"active\": true,\n        \"reason\": \"Within scheduled time and day\",\n        \"current_time\": \"22:30:00\",\n        \"current_day\": 1,\n        \"schedule_enabled\": true\n    }",
        "operationId": "get_camera_schedule_status_api_v1_cameras__camera_id__schedule_status_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/preview": {
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera Preview",
        "description": "Get current camera preview frame as base64-encoded JPEG\n\nSupports both RTSP/USB cameras (via camera_service) and Protect cameras\n(via protect_service snapshot API).\n\nArgs:\n    camera_id: UUID of camera\n    db: Database session\n\nReturns:\n    JSON with thumbnail_base64 field containing base64-encoded JPEG\n\nRaises:\n    404: Camera not found\n    400: Camera not running or failed to capture frame\n\nExample Response:\n    {\n        \"thumbnail_base64\": \"/9j/4AAQSkZJRg...\"\n    }",
        "operationId": "get_camera_preview_api_v1_cameras__camera_id__preview_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/analyze": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Analyze Camera",
        "description": "Trigger manual camera analysis (bypasses motion detection)\n\nThis endpoint forces an immediate AI analysis of the current camera frame,\nregardless of motion detection settings. The analysis happens asynchronously\nand results are saved as an Event in the database.\n\nSupports both RTSP/USB cameras (via camera_service) and Protect cameras\n(via Protect API snapshot).\n\nArgs:\n    camera_id: UUID of camera\n    db: Database session\n\nReturns:\n    Success confirmation message\n\nRaises:\n    404: Camera not found\n    400: Camera not running or analysis failed\n\nExample Response:\n    {\n        \"success\": true,\n        \"message\": \"Analysis triggered successfully\"\n    }",
        "operationId": "analyze_camera_api_v1_cameras__camera_id__analyze_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/audio/status": {
      "get": {
        "tags": [
          "cameras"
        ],
        "summary": "Get Camera Audio Status",
        "description": "Get audio stream status for a camera (Story P6-3.1, AC#4)\n\nArgs:\n    camera_id: UUID of camera\n\nReturns:\n    Audio status including buffer info, detected codec, and enabled state\n\nRaises:\n    404: Camera not found\n\nExample Response:\n    {\n        \"audio_enabled\": true,\n        \"audio_codec\": \"aac\",\n        \"has_buffer\": true,\n        \"duration_seconds\": 4.2,\n        \"is_empty\": false\n    }",
        "operationId": "get_camera_audio_status_api_v1_cameras__camera_id__audio_status_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/audio": {
      "patch": {
        "tags": [
          "cameras"
        ],
        "summary": "Update Camera Audio",
        "description": "Enable or disable audio stream extraction for a camera (Story P6-3.1, AC#4)\n\nArgs:\n    camera_id: UUID of camera\n    audio_enabled: Whether to enable audio extraction\n\nReturns:\n    Updated camera object\n\nRaises:\n    404: Camera not found\n    400: Camera type doesn't support audio (USB cameras)\n\nNote:\n    Changes take effect on next camera restart/reconnect.\n    Audio extraction requires PyAV and only works with RTSP cameras.",
        "operationId": "update_camera_audio_api_v1_cameras__camera_id__audio_patch",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          },
          {
            "name": "audio_enabled",
            "in": "query",
            "required": true,
            "schema": {
              "type": "boolean",
              "title": "Audio Enabled"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CameraResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/cameras/{camera_id}/audio/test": {
      "post": {
        "tags": [
          "cameras"
        ],
        "summary": "Test Camera Audio",
        "description": "Test audio stream availability for a camera (Story P6-3.1, AC#1, AC#2)\n\nTests whether the camera's RTSP stream has an audio track and detects\nthe audio codec. Does not modify the camera configuration.\n\nArgs:\n    camera_id: UUID of camera\n\nReturns:\n    Test result with detected codec and availability\n\nRaises:\n    404: Camera not found\n    400: Camera type doesn't support audio testing\n\nExample Response:\n    {\n        \"has_audio\": true,\n        \"codec\": \"aac\",\n        \"codec_description\": \"Advanced Audio Coding (most common)\",\n        \"message\": \"Audio stream detected: AAC codec\"\n    }",
        "operationId": "test_camera_audio_api_v1_cameras__camera_id__audio_test_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/usage": {
      "get": {
        "tags": [
          "ai"
        ],
        "summary": "Get Ai Usage Stats",
        "description": "Get AI usage statistics and cost tracking.\n\nReturns aggregated statistics including:\n- Total API calls (successful and failed)\n- Token usage\n- Cost estimates\n- Average response time\n- Per-provider breakdown\n\nSupports optional date range filtering.\n\nExample:\n    GET /api/v1/ai/usage\n    GET /api/v1/ai/usage?start_date=2025-11-01&end_date=2025-11-16",
        "operationId": "get_ai_usage_stats_api_v1_ai_usage_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Start date filter (ISO 8601 format: YYYY-MM-DD)",
              "title": "Start Date"
            },
            "description": "Start date filter (ISO 8601 format: YYYY-MM-DD)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End date filter (ISO 8601 format: YYYY-MM-DD)",
              "title": "End Date"
            },
            "description": "End date filter (ISO 8601 format: YYYY-MM-DD)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIUsageStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/capabilities": {
      "get": {
        "tags": [
          "ai"
        ],
        "summary": "Get Ai Capabilities",
        "description": "Get AI provider capabilities (Story P3-4.1).\n\nReturns capability information for all AI providers, including:\n- Whether provider supports native video input\n- Maximum video duration and file size limits\n- Supported video formats\n- Maximum images for multi-frame analysis\n- Whether provider has an API key configured\n\nThis endpoint helps determine which analysis modes are available\nbased on the current provider configuration.\n\nExample:\n    GET /api/v1/ai/capabilities\n\nResponse:\n    {\n        \"providers\": {\n            \"openai\": {\"video\": true, \"max_video_duration\": 60, ...},\n            \"claude\": {\"video\": false, ...},\n            ...\n        }\n    }",
        "operationId": "get_ai_capabilities_api_v1_ai_capabilities_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AICapabilitiesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/refine-prompt": {
      "post": {
        "tags": [
          "ai"
        ],
        "summary": "Refine Prompt",
        "description": "Refine the AI description prompt using feedback data (Story P8-3.3).\n\nAnalyzes user feedback (thumbs up/down, corrections) to suggest an improved\nAI description prompt. Uses the first configured AI provider in the fallback\nchain to generate suggestions.\n\nAC3.3: Processing indicator handled by frontend\nAC3.4: Returns suggested prompt in response\nAC3.5: Returns changes summary explaining improvements\nAC3.10: Returns 400 error if no feedback data available\n\nArgs:\n    request: PromptRefinementRequest with current prompt and options\n\nReturns:\n    PromptRefinementResponse with suggested prompt and analysis stats\n\nRaises:\n    HTTPException 400: No feedback data available for refinement\n    HTTPException 503: No AI providers configured",
        "operationId": "refine_prompt_api_v1_ai_refine_prompt_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromptRefinementRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptRefinementResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events": {
      "post": {
        "tags": [
          "events"
        ],
        "summary": "Create AI-generated event",
        "description": "Create a new event with AI-generated natural language description. Triggers alert rule evaluation and broadcasts via WebSocket.",
        "operationId": "create_event_api_v1_events_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EventCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created event with assigned UUID and thumbnail path",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EventResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data or camera not found"
          },
          "500": {
            "description": "Database error or thumbnail processing failure"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "events"
        ],
        "summary": "List events with filtering",
        "description": "Retrieve paginated list of AI-generated events with optional filtering by camera, time range, confidence, object types, source type, and full-text search.",
        "operationId": "list_events_api_v1_events_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera UUID",
              "title": "Camera Id"
            },
            "description": "Filter by camera UUID"
          },
          {
            "name": "start_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter events after this timestamp",
              "title": "Start Time"
            },
            "description": "Filter events after this timestamp"
          },
          {
            "name": "end_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter events before this timestamp",
              "title": "End Time"
            },
            "description": "Filter events before this timestamp"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 100,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence score",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence score"
          },
          {
            "name": "object_types",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated object types (e.g., 'person,vehicle')",
              "title": "Object Types"
            },
            "description": "Comma-separated object types (e.g., 'person,vehicle')"
          },
          {
            "name": "alert_triggered",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by alert status",
              "title": "Alert Triggered"
            },
            "description": "Filter by alert status"
          },
          {
            "name": "search_query",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 500
                },
                {
                  "type": "null"
                }
              ],
              "description": "Full-text search in descriptions",
              "title": "Search Query"
            },
            "description": "Full-text search in descriptions"
          },
          {
            "name": "source_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by event source type: 'rtsp', 'usb', 'protect' (comma-separated for multiple)",
              "title": "Source Type"
            },
            "description": "Filter by event source type: 'rtsp', 'usb', 'protect' (comma-separated for multiple)"
          },
          {
            "name": "smart_detection_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by smart detection type: 'person', 'vehicle', 'package', 'animal', 'motion', 'ring' (comma-separated for multiple)",
              "title": "Smart Detection Type"
            },
            "description": "Filter by smart detection type: 'person', 'vehicle', 'package', 'animal', 'motion', 'ring' (comma-separated for multiple)"
          },
          {
            "name": "analysis_mode",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by analysis mode: 'single_frame', 'multi_frame', 'video_native' (comma-separated for multiple)",
              "title": "Analysis Mode"
            },
            "description": "Filter by analysis mode: 'single_frame', 'multi_frame', 'video_native' (comma-separated for multiple)"
          },
          {
            "name": "has_fallback",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter events with fallback (True = has fallback_reason, False = no fallback)",
              "title": "Has Fallback"
            },
            "description": "Filter events with fallback (True = has fallback_reason, False = no fallback)"
          },
          {
            "name": "low_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by low confidence flag (True = uncertain descriptions)",
              "title": "Low Confidence"
            },
            "description": "Filter by low confidence flag (True = uncertain descriptions)"
          },
          {
            "name": "anomaly_severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by anomaly severity: 'low', 'medium', 'high' (comma-separated for multiple)",
              "title": "Anomaly Severity"
            },
            "description": "Filter by anomaly severity: 'low', 'medium', 'high' (comma-separated for multiple)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Number of results per page",
              "default": 50,
              "title": "Limit"
            },
            "description": "Number of results per page"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "sort_order",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(asc|desc)$",
              "description": "Sort by timestamp",
              "default": "desc",
              "title": "Sort Order"
            },
            "description": "Sort by timestamp"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of events with total count",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EventListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/packages/today": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Package Deliveries Today",
        "description": "Get today's package delivery summary for dashboard widget (Story P7-2.4)\n\nReturns a summary of package deliveries detected today, including:\n- Total count of package deliveries\n- Breakdown by carrier (FedEx, UPS, USPS, Amazon, DHL, unknown)\n- Recent 5 package delivery events with camera name and timestamp\n\nPackage events are identified by:\n- smart_detection_type = 'package', OR\n- objects_detected contains 'package'\n\nArgs:\n    db: Database session\n\nReturns:\n    PackageDeliveriesTodayResponse with total_count, by_carrier, and recent_events\n\nExamples:\n    GET /events/packages/today\n\nResponse:\n    {\n        \"total_count\": 5,\n        \"by_carrier\": {\"fedex\": 2, \"ups\": 1, \"amazon\": 1, \"unknown\": 1},\n        \"recent_events\": [...]\n    }",
        "operationId": "get_package_deliveries_today_api_v1_events_packages_today_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/events/export": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Export Events",
        "description": "Export events to JSON or CSV format\n\nStreams events in batches for memory efficiency. Supports filtering by date range,\ncamera, and confidence level.\n\nArgs:\n    format: Export format - \"json\" (newline-delimited) or \"csv\"\n    start_date: Optional start date filter (inclusive)\n    end_date: Optional end date filter (inclusive)\n    camera_id: Optional filter by camera UUID\n    min_confidence: Optional minimum confidence score (0-100)\n    db: Database session\n\nReturns:\n    StreamingResponse with Content-Disposition header for download\n\n**JSON Format** (newline-delimited JSON):\n```json\n{\"id\": \"...\", \"camera_id\": \"...\", \"timestamp\": \"...\", ...}\n{\"id\": \"...\", \"camera_id\": \"...\", \"timestamp\": \"...\", ...}\n```\n\n**CSV Format**:\n```csv\nid,camera_id,timestamp,description,confidence,objects_detected,alert_triggered\n123,abc,2025-11-17T14:30:00Z,Person walking,85,\"person,package\",true\n```\n\n**Status Codes:**\n- 200: Success (streaming response)\n- 400: Invalid format or date range\n- 500: Internal server error\n\n**Examples:**\n- GET /events/export?format=json\n- GET /events/export?format=csv&start_date=2025-11-01&end_date=2025-11-17\n- GET /events/export?format=csv&camera_id=abc123&min_confidence=80",
        "operationId": "export_events_api_v1_events_export_get",
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^(json|csv)$",
              "description": "Export format (json or csv)",
              "title": "Format"
            },
            "description": "Export format (json or csv)"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Start date (YYYY-MM-DD)",
              "title": "Start Date"
            },
            "description": "Start date (YYYY-MM-DD)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End date (YYYY-MM-DD)",
              "title": "End Date"
            },
            "description": "End date (YYYY-MM-DD)"
          },
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera UUID",
              "title": "Camera Id"
            },
            "description": "Filter by camera UUID"
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer",
                  "maximum": 100,
                  "minimum": 0
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence score",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence score"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/cleanup": {
      "delete": {
        "tags": [
          "events"
        ],
        "summary": "Manual Cleanup",
        "description": "Manually trigger cleanup of events before a specific date\n\nDeletes all events (and associated thumbnails) that occurred before the specified\ndate. Requires explicit confirmation via confirm=true parameter.\n\n**CAUTION**: This operation is permanent and cannot be undone. Always verify the\nbefore_date parameter before confirming.\n\nArgs:\n    before_date: Delete events before this date (exclusive)\n    confirm: Must be explicitly set to true to proceed with deletion\n    db: Database session\n\nReturns:\n    CleanupResponse with deletion statistics:\n    - deleted_count: Number of events deleted\n    - thumbnails_deleted: Number of thumbnail files deleted\n    - space_freed_mb: Amount of disk space freed in megabytes\n\n**Request:**\n```\nDELETE /events/cleanup?before_date=2025-10-01&confirm=true\n```\n\n**Response:**\n```json\n{\n    \"deleted_count\": 450,\n    \"thumbnails_deleted\": 380,\n    \"space_freed_mb\": 12.3\n}\n```\n\n**Status Codes:**\n- 200: Success (cleanup completed)\n- 400: Invalid date (future date) or missing confirmation\n- 500: Internal server error\n\n**Examples:**\n- DELETE /events/cleanup?before_date=2025-10-01&confirm=true\n- DELETE /events/cleanup?before_date=2025-11-01&confirm=true",
        "operationId": "manual_cleanup_api_v1_events_cleanup_delete",
        "parameters": [
          {
            "name": "before_date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date",
              "description": "Delete events before this date (YYYY-MM-DD)",
              "title": "Before Date"
            },
            "description": "Delete events before this date (YYYY-MM-DD)"
          },
          {
            "name": "confirm",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Must be true to confirm deletion",
              "default": false,
              "title": "Confirm"
            },
            "description": "Must be true to confirm deletion"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CleanupResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/bulk": {
      "delete": {
        "tags": [
          "events"
        ],
        "summary": "Bulk Delete Events",
        "description": "Delete multiple events by ID (FF-010)\n\nDeletes multiple events and their associated thumbnails/frames in a single request.\nSupports batch deletion for bulk cleanup operations from the UI.\n\nArgs:\n    event_ids: List of event UUIDs to delete\n    db: Database session\n\nReturns:\n    Deletion statistics including count and space freed\n\nRaises:\n    400: No event IDs provided or invalid IDs\n    500: Deletion failed\n\nExample:\n    DELETE /events/bulk?event_ids=123&event_ids=456&event_ids=789",
        "operationId": "bulk_delete_events_api_v1_events_bulk_delete",
        "parameters": [
          {
            "name": "event_ids",
            "in": "query",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of event UUIDs to delete",
              "title": "Event Ids"
            },
            "description": "List of event UUIDs to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}": {
      "delete": {
        "tags": [
          "events"
        ],
        "summary": "Delete Event",
        "description": "Delete a single event by ID\n\nDeletes an event and its associated thumbnail/frame files.\n\nArgs:\n    event_id: Event UUID to delete\n    db: Database session\n\nReturns:\n    204 No Content on success\n\nRaises:\n    404: Event not found\n    500: Deletion failed\n\nExample:\n    DELETE /events/123e4567-e89b-12d3-a456-426614174000",
        "operationId": "delete_event_api_v1_events__event_id__delete",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Event",
        "description": "Get single event by ID\n\nArgs:\n    event_id: Event UUID\n    db: Database session\n\nReturns:\n    Event with full details including thumbnail, correlated events (Story P2-4.4),\n    and matched entity (Story P4-3.3)\n\nRaises:\n    404: Event not found\n    500: Database error\n\nExample:\n    GET /events/123e4567-e89b-12d3-a456-426614174000",
        "operationId": "get_event_api_v1_events__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/reanalyze": {
      "post": {
        "tags": [
          "events"
        ],
        "summary": "Reanalyze Event",
        "description": "Re-analyze an event with a different analysis mode (Story P3-6.4)\n\nTriggers re-analysis of an existing event using a different AI analysis mode.\nThis is useful for improving low-confidence descriptions.\n\nRate limiting: Max 3 re-analyses per event per hour.\n\nArgs:\n    event_id: Event UUID to re-analyze\n    request: ReanalyzeRequest with analysis_mode\n    background_tasks: FastAPI background tasks\n    db: Database session\n\nReturns:\n    Updated EventResponse with new description and confidence\n\nRaises:\n    404: Event not found\n    400: Invalid analysis mode for camera type\n    429: Rate limit exceeded (max 3 per hour)\n    500: Re-analysis failed\n\nExample:\n    POST /events/123e4567-e89b-12d3-a456-426614174000/reanalyze\n    {\"analysis_mode\": \"multi_frame\"}",
        "operationId": "reanalyze_event_api_v1_events__event_id__reanalyze_post",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReanalyzeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/stats/aggregate": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Event Stats",
        "description": "Get event statistics and aggregations\n\nArgs:\n    camera_id: Optional filter by camera UUID\n    start_time: Start of time range (default: all time)\n    end_time: End of time range (default: now)\n    db: Database session\n\nReturns:\n    EventStatsResponse with aggregated statistics:\n    - total_events: Total event count\n    - events_by_camera: Event counts grouped by camera\n    - events_by_object_type: Event counts by detected object type\n    - average_confidence: Average confidence score\n    - alerts_triggered: Number of events that triggered alerts\n    - time_range: Actual time range of events\n\nExamples:\n    - GET /events/stats/aggregate\n    - GET /events/stats/aggregate?camera_id=abc123\n    - GET /events/stats/aggregate?start_time=2025-11-01T00:00:00Z&end_time=2025-11-17T23:59:59Z",
        "operationId": "get_event_stats_api_v1_events_stats_aggregate_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera UUID",
              "title": "Camera Id"
            },
            "description": "Filter by camera UUID"
          },
          {
            "name": "start_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Start of time range",
              "title": "Start Time"
            },
            "description": "Start of time range"
          },
          {
            "name": "end_time",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "End of time range",
              "title": "End Time"
            },
            "description": "End of time range"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EventStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/feedback": {
      "post": {
        "tags": [
          "events"
        ],
        "summary": "Create Feedback",
        "description": "Create feedback for an event (Story P4-5.1)\n\nAllows users to rate AI descriptions as helpful/not helpful and optionally\nprovide correction text.\n\nArgs:\n    event_id: Event UUID\n    feedback_data: Rating and optional correction\n    db: Database session\n\nReturns:\n    Created feedback with ID and timestamps\n\nRaises:\n    404: Event not found\n    409: Feedback already exists for this event\n    500: Database error\n\nExample:\n    POST /events/123/feedback\n    {\"rating\": \"helpful\"}\n\n    POST /events/123/feedback\n    {\"rating\": \"not_helpful\", \"correction\": \"This was actually a delivery driver\"}",
        "operationId": "create_feedback_api_v1_events__event_id__feedback_post",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeedbackCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Feedback",
        "description": "Get feedback for an event (Story P4-5.1)\n\nArgs:\n    event_id: Event UUID\n    db: Database session\n\nReturns:\n    Feedback data if exists\n\nRaises:\n    404: Event or feedback not found\n\nExample:\n    GET /events/123/feedback",
        "operationId": "get_feedback_api_v1_events__event_id__feedback_get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "events"
        ],
        "summary": "Update Feedback",
        "description": "Update existing feedback for an event (Story P4-5.1)\n\nArgs:\n    event_id: Event UUID\n    feedback_data: Updated rating and/or correction\n    db: Database session\n\nReturns:\n    Updated feedback\n\nRaises:\n    404: Event or feedback not found\n    500: Database error\n\nExample:\n    PUT /events/123/feedback\n    {\"rating\": \"not_helpful\", \"correction\": \"Wrong description\"}",
        "operationId": "update_feedback_api_v1_events__event_id__feedback_put",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeedbackUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "events"
        ],
        "summary": "Delete Feedback",
        "description": "Delete feedback for an event (Story P4-5.1)\n\nArgs:\n    event_id: Event UUID\n    db: Database session\n\nReturns:\n    204 No Content on success\n\nRaises:\n    404: Event or feedback not found\n    500: Database error\n\nExample:\n    DELETE /events/123/feedback",
        "operationId": "delete_feedback_api_v1_events__event_id__feedback_delete",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/frames": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Event Frames",
        "description": "Get list of frames for an event (Story P8-2.2)\n\nReturns all frames stored for an event during AI analysis,\nincluding metadata and URLs for each frame image.\n\nArgs:\n    event_id: Event UUID\n    db: Database session\n\nReturns:\n    EventFrameListResponse with frame metadata and URLs\n\nRaises:\n    404: Event not found\n\nExample:\n    GET /events/123e4567-e89b-12d3-a456-426614174000/frames",
        "operationId": "get_event_frames_api_v1_events__event_id__frames_get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/frames/{frame_number}": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Get Event Frame Image",
        "description": "Get a specific frame image for an event (Story P8-2.2)\n\nReturns the JPEG image file for a specific frame.\nIncludes caching headers for performance.\n\nArgs:\n    event_id: Event UUID\n    frame_number: 1-indexed frame number\n    db: Database session\n\nReturns:\n    JPEG image file with Cache-Control headers\n\nRaises:\n    404: Event or frame not found\n\nExample:\n    GET /events/123e4567-e89b-12d3-a456-426614174000/frames/1",
        "operationId": "get_event_frame_image_api_v1_events__event_id__frames__frame_number__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          },
          {
            "name": "frame_number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Frame Number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/video": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Stream Event Video",
        "description": "Stream event video with support for range requests (Story P8-3.2)\n\nReturns the full motion video for an event, supporting HTTP range requests\nfor seeking and partial content delivery.\n\nArgs:\n    event_id: UUID of the event\n    request: FastAPI request object for range header parsing\n\nReturns:\n    StreamingResponse with video/mp4 content type\n\nRaises:\n    404: Event not found or video not available\n    500: Internal server error\n\nExample:\n    GET /events/123e4567-e89b-12d3-a456-426614174000/video",
        "operationId": "stream_event_video_api_v1_events__event_id__video_get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/events/{event_id}/video/download": {
      "get": {
        "tags": [
          "events"
        ],
        "summary": "Download Event Video",
        "description": "Download event video as attachment (Story P8-3.2)\n\nForces browser to download the video file rather than streaming it inline.\n\nArgs:\n    event_id: UUID of the event\n\nReturns:\n    FileResponse with Content-Disposition: attachment\n\nRaises:\n    404: Event not found or video not available\n    500: Internal server error\n\nExample:\n    GET /events/123e4567-e89b-12d3-a456-426614174000/video/download",
        "operationId": "download_event_video_api_v1_events__event_id__video_download_get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/metrics": {
      "get": {
        "tags": [
          "metrics"
        ],
        "summary": "Get Metrics",
        "description": "Get pipeline metrics\n\nReturns:\n    JSON metrics data:\n    {\n        \"queue_depth\": int,\n        \"events_processed\": {\n            \"success\": int,\n            \"failure\": int,\n            \"total\": int\n        },\n        \"processing_time_ms\": {\n            \"p50\": float,\n            \"p95\": float,\n            \"p99\": float\n        },\n        \"pipeline_errors\": {\n            \"error_type\": count\n        }\n    }\n\nExample:\n    GET /api/v1/metrics\n\n    Response:\n    {\n        \"queue_depth\": 2,\n        \"events_processed\": {\n            \"success\": 142,\n            \"failure\": 3,\n            \"total\": 145\n        },\n        \"processing_time_ms\": {\n            \"p50\": 2341.2,\n            \"p95\": 4523.8,\n            \"p99\": 4891.1\n        },\n        \"pipeline_errors\": {\n            \"ai_service_failed\": 2,\n            \"event_storage_failed\": 1\n        }\n    }",
        "operationId": "get_metrics_api_v1_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Get Metrics Api V1 Metrics Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/debug/ai-keys": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Debug Ai Keys",
        "description": "Debug endpoint to check if AI keys are saved in database",
        "operationId": "debug_ai_keys_api_v1_system_debug_ai_keys_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/system/debug/network": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Debug Network Test",
        "description": "Debug endpoint to test network connectivity from server context",
        "operationId": "debug_network_test_api_v1_system_debug_network_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/system/retention": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Retention Policy",
        "description": "Get current data retention policy\n\nReturns current retention policy configuration including:\n- Number of days events are retained\n- Whether retention is set to forever (retention_days <= 0)\n- Next scheduled cleanup time\n\n**Response:**\n```json\n{\n    \"retention_days\": 30,\n    \"next_cleanup\": \"2025-11-18T02:00:00Z\",\n    \"forever\": false\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_retention_policy_api_v1_system_retention_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetentionPolicyResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "system"
        ],
        "summary": "Update Retention Policy",
        "description": "Update data retention policy\n\nUpdate how long events are retained before automatic cleanup.\n\n**Valid retention_days values:**\n- -1 or 0: Keep events forever (no automatic cleanup)\n- 7: Keep for 7 days\n- 30: Keep for 30 days (default)\n- 90: Keep for 90 days\n- 365: Keep for 1 year\n\n**Request Body:**\n```json\n{\n    \"retention_days\": 30\n}\n```\n\n**Response:**\n```json\n{\n    \"retention_days\": 30,\n    \"next_cleanup\": \"2025-11-18T02:00:00Z\",\n    \"forever\": false\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 400: Invalid retention_days value\n- 500: Internal server error",
        "operationId": "update_retention_policy_api_v1_system_retention_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RetentionPolicyUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RetentionPolicyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/storage": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Storage Info",
        "description": "Get storage usage information\n\nReturns detailed storage statistics including:\n- Database size (SQLite file size via PRAGMA queries)\n- Thumbnails directory size (recursive calculation)\n- Total storage used\n- Number of events stored\n\n**Response:**\n```json\n{\n    \"database_mb\": 15.2,\n    \"thumbnails_mb\": 8.5,\n    \"total_mb\": 23.7,\n    \"event_count\": 1234\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_storage_info_api_v1_system_storage_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StorageResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/settings": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Settings",
        "description": "Get all system settings\n\nReturns complete system configuration including general settings,\nAI model configuration, motion detection parameters, and data retention settings.\n\n**Note:** API keys are masked for security (only last 4 characters shown).\n\n**Response:**\n```json\n{\n    \"system_name\": \"ArgusAI\",\n    \"timezone\": \"America/Los_Angeles\",\n    \"primary_api_key\": \"****abcd\",\n    ...\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_settings_api_v1_system_settings_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSettings"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "system"
        ],
        "summary": "Update Settings",
        "description": "Update system settings (partial update)\n\nAccepts partial updates - only provided fields will be updated.\nAutomatically handles type conversion and validation.\n\n**Request Body:**\n```json\n{\n    \"system_name\": \"My Custom Name\",\n    \"motion_sensitivity\": 75\n}\n```\n\n**Response:**\nReturns complete updated settings object.\n\n**Status Codes:**\n- 200: Success\n- 400: Validation error\n- 500: Internal server error",
        "operationId": "update_settings_api_v1_system_settings_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SystemSettingsUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSettings"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/test-key": {
      "post": {
        "tags": [
          "system"
        ],
        "summary": "Test Api Key",
        "description": "Test an AI provider API key without saving it\n\nMakes a lightweight validation request to the specified AI provider\nto verify the API key works. The key is NOT stored.\n\n**Request Body:**\n```json\n{\n    \"provider\": \"openai\",\n    \"api_key\": \"sk-...\"\n}\n```\n\n**Response:**\n```json\n{\n    \"valid\": true,\n    \"message\": \"API key validated successfully\",\n    \"provider\": \"openai\"\n}\n```\n\n**Status Codes:**\n- 200: Key validation result returned\n- 400: Invalid request\n- 500: Internal server error",
        "operationId": "test_api_key_api_v1_system_test_key_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestKeyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/ai-providers": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Ai Providers Status",
        "description": "Get configuration status for all AI providers\n\nReturns a list of all supported AI providers and whether they have\nAPI keys configured. This is used by the frontend to show provider\nstatus in the settings UI.\n\n**Response:**\n```json\n{\n    \"providers\": [\n        {\"provider\": \"openai\", \"configured\": true},\n        {\"provider\": \"grok\", \"configured\": false},\n        {\"provider\": \"anthropic\", \"configured\": true},\n        {\"provider\": \"google\", \"configured\": false}\n    ]\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_ai_providers_status_api_v1_system_ai_providers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIProvidersStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/ai-stats": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Ai Provider Stats",
        "description": "Get AI provider usage statistics (Story P2-5.3)\n\nReturns a breakdown of how many events were processed by each AI provider.\nUseful for monitoring provider usage and fallback behavior.\n\n**Query Parameters:**\n- `date_range`: Time filter - \"24h\", \"7d\", \"30d\", or \"all\" (default: \"7d\")\n\n**Response:**\n```json\n{\n    \"total_events\": 1234,\n    \"events_per_provider\": {\n        \"openai\": 1000,\n        \"grok\": 150,\n        \"claude\": 75,\n        \"gemini\": 9\n    },\n    \"date_range\": \"7d\",\n    \"time_range\": {\n        \"start\": \"2025-11-28T00:00:00Z\",\n        \"end\": \"2025-12-05T23:59:59Z\"\n    }\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_ai_provider_stats_api_v1_system_ai_stats_get",
        "parameters": [
          {
            "name": "date_range",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "24h",
                "7d",
                "30d",
                "all"
              ],
              "type": "string",
              "default": "7d",
              "title": "Date Range"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIProviderStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/ai-usage": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Ai Usage",
        "description": "Get AI usage and cost statistics (Story P3-7.1)\n\nReturns aggregated AI usage data including costs broken down by date,\ncamera, provider, and analysis mode.\n\n**Query Parameters:**\n- `start_date`: Start date in ISO 8601 format (default: 30 days ago)\n- `end_date`: End date in ISO 8601 format (default: now)\n\n**Response:**\n```json\n{\n    \"total_cost\": 0.0523,\n    \"total_requests\": 142,\n    \"period\": {\n        \"start\": \"2025-11-09T00:00:00Z\",\n        \"end\": \"2025-12-09T23:59:59Z\"\n    },\n    \"by_date\": [...],\n    \"by_camera\": [...],\n    \"by_provider\": [...],\n    \"by_mode\": [...]\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 400: Invalid date format\n- 500: Internal server error",
        "operationId": "get_ai_usage_api_v1_system_ai_usage_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Start Date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "End Date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIUsageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/backup": {
      "post": {
        "tags": [
          "system"
        ],
        "summary": "Create Backup",
        "description": "Create a system backup with optional selective components (FF-007)\n\nCreates a ZIP archive containing selected components:\n- **database.db**: Complete SQLite database (events, cameras, rules)\n- **thumbnails/**: All event thumbnail images\n- **settings.json**: System settings (API keys excluded for security)\n- **metadata.json**: Backup metadata (timestamp, version, file counts)\n\nThe backup can be downloaded using the `download_url` in the response.\n\n**Request Body (optional):**\n```json\n{\n    \"include_database\": true,\n    \"include_thumbnails\": true,\n    \"include_settings\": true,\n    \"include_ai_config\": true,\n    \"include_protect_config\": true\n}\n```\n\n**Response:**\n```json\n{\n    \"success\": true,\n    \"timestamp\": \"2025-01-15-14-30-00\",\n    \"size_bytes\": 15728640,\n    \"download_url\": \"/api/v1/system/backup/2025-01-15-14-30-00/download\",\n    \"message\": \"Backup created successfully\"\n}\n```\n\n**Status Codes:**\n- 200: Backup created successfully\n- 507: Insufficient disk space\n- 500: Internal server error",
        "operationId": "create_backup_api_v1_system_backup_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/BackupOptions"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Options"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackupResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/backup/{timestamp}/download": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Download Backup",
        "description": "Download a backup file\n\nDownloads the backup ZIP file for the specified timestamp.\nThe file is streamed to support large backups.\n\n**Path Parameters:**\n- `timestamp`: Backup timestamp from create_backup response (e.g., \"2025-01-15-14-30-00\")\n\n**Response:**\n- Content-Type: application/zip\n- Content-Disposition: attachment; filename=liveobject-backup-{timestamp}.zip\n\n**Status Codes:**\n- 200: Backup file streamed\n- 404: Backup not found",
        "operationId": "download_backup_api_v1_system_backup__timestamp__download_get",
        "parameters": [
          {
            "name": "timestamp",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Timestamp"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/backup/list": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "List Backups",
        "description": "List all available backups\n\nReturns a list of all backup files with metadata, sorted by timestamp (newest first).\n\n**Response:**\n```json\n{\n    \"backups\": [\n        {\n            \"timestamp\": \"2025-01-15-14-30-00\",\n            \"size_bytes\": 15728640,\n            \"created_at\": \"2025-01-15T14:30:00Z\",\n            \"app_version\": \"1.0.0\",\n            \"download_url\": \"/api/v1/system/backup/2025-01-15-14-30-00/download\"\n        }\n    ],\n    \"total_count\": 1\n}\n```\n\n**Status Codes:**\n- 200: List retrieved successfully\n- 500: Internal server error",
        "operationId": "list_backups_api_v1_system_backup_list_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BackupListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/backup/validate": {
      "post": {
        "tags": [
          "system"
        ],
        "summary": "Validate Backup",
        "description": "Validate a backup file before restore\n\nChecks the backup ZIP file for:\n- Valid ZIP format\n- Required files present (database.db, metadata.json)\n- Metadata format and version compatibility\n\n**Request:**\n- Content-Type: multipart/form-data\n- Field: file (ZIP file)\n\n**Response:**\n```json\n{\n    \"valid\": true,\n    \"message\": \"Backup is valid\",\n    \"app_version\": \"1.0.0\",\n    \"backup_timestamp\": \"2025-01-15T14:30:00Z\",\n    \"warnings\": [\"Backup from version 0.9.0, current version is 1.0.0\"]\n}\n```\n\n**Status Codes:**\n- 200: Validation result returned\n- 400: Invalid file format\n- 500: Internal server error",
        "operationId": "validate_backup_api_v1_system_backup_validate_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_validate_backup_api_v1_system_backup_validate_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/restore": {
      "post": {
        "tags": [
          "system"
        ],
        "summary": "Restore From Backup",
        "description": "Restore system from a backup file with selective components (FF-007)\n\n**WARNING: This operation may replace existing data based on selected components!**\n\nProcess:\n1. Validates the backup file\n2. Stops background tasks (camera capture, event processing)\n3. Creates a backup of current database (if restoring database)\n4. Replaces selected components (database, thumbnails, settings)\n5. Restarts background tasks\n\n**Request:**\n- Content-Type: multipart/form-data\n- Field: file (ZIP file)\n- Field: restore_database (boolean, default true)\n- Field: restore_thumbnails (boolean, default true)\n- Field: restore_settings (boolean, default true)\n\n**Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Restore completed successfully\",\n    \"events_restored\": 1234,\n    \"settings_restored\": 15,\n    \"thumbnails_restored\": 150,\n    \"warnings\": []\n}\n```\n\n**Status Codes:**\n- 200: Restore completed successfully\n- 400: Invalid backup file\n- 500: Restore failed",
        "operationId": "restore_from_backup_api_v1_system_restore_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_restore_from_backup_api_v1_system_restore_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RestoreResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/backup/{timestamp}": {
      "delete": {
        "tags": [
          "system"
        ],
        "summary": "Delete Backup",
        "description": "Delete a specific backup\n\nPermanently removes the backup file for the specified timestamp.\n\n**Path Parameters:**\n- `timestamp`: Backup timestamp (e.g., \"2025-01-15-14-30-00\")\n\n**Response:**\n```json\n{\n    \"message\": \"Backup deleted successfully\"\n}\n```\n\n**Status Codes:**\n- 200: Backup deleted\n- 404: Backup not found",
        "operationId": "delete_backup_api_v1_system_backup__timestamp__delete",
        "parameters": [
          {
            "name": "timestamp",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Timestamp"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/ai-cost-status": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Ai Cost Status",
        "description": "Get current AI cost cap status (Story P3-7.3)\n\nReturns current daily and monthly costs, caps, percentages, and pause status.\n\n**Response:**\n```json\n{\n    \"daily_cost\": 0.75,\n    \"daily_cap\": 1.00,\n    \"daily_percent\": 75.0,\n    \"monthly_cost\": 12.50,\n    \"monthly_cap\": 20.00,\n    \"monthly_percent\": 62.5,\n    \"is_paused\": false,\n    \"pause_reason\": null\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_ai_cost_status_api_v1_system_ai_cost_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CostCapStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/data": {
      "delete": {
        "tags": [
          "system"
        ],
        "summary": "Delete All Data",
        "description": "Delete all event data from the system\n\nThis permanently deletes:\n- All events and their thumbnails\n- All motion events\n- All event embeddings and feedback\n- All AI usage records\n\n**WARNING: This action cannot be undone!**\n\n**Response:**\n```json\n{\n    \"deleted_count\": 1234,\n    \"success\": true\n}\n```\n\n**Status Codes:**\n- 200: Data deleted successfully\n- 500: Internal server error",
        "operationId": "delete_all_data_api_v1_system_data_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteDataResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system/ssl-status": {
      "get": {
        "tags": [
          "system"
        ],
        "summary": "Get Ssl Status",
        "description": "Get SSL/HTTPS configuration status (Story P9-5.1)\n\nReturns the current SSL configuration including certificate information\nif certificates are configured. This endpoint helps users verify their\nSSL setup and monitor certificate expiration.\n\n**Response:**\n```json\n{\n    \"ssl_enabled\": true,\n    \"ssl_ready\": true,\n    \"certificate_valid\": true,\n    \"certificate_expires\": \"2026-12-23T00:00:00Z\",\n    \"certificate_issuer\": \"Let's Encrypt Authority X3\",\n    \"certificate_subject\": \"argusai.example.com\",\n    \"tls_version\": \"TLSv1_2\",\n    \"ssl_port\": 443,\n    \"http_redirect\": true\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "get_ssl_status_api_v1_system_ssl_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SSLStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/alert-rules": {
      "get": {
        "tags": [
          "alert-rules"
        ],
        "summary": "List Alert Rules",
        "description": "List all alert rules with optional filtering.\n\nArgs:\n    is_enabled: Optional filter to show only enabled/disabled rules\n    db: Database session\n\nReturns:\n    AlertRuleListResponse with list of rules and total count\n\nExamples:\n    - GET /alert-rules\n    - GET /alert-rules?is_enabled=true",
        "operationId": "list_alert_rules_api_v1_alert_rules_get",
        "parameters": [
          {
            "name": "is_enabled",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by enabled status",
              "title": "Is Enabled"
            },
            "description": "Filter by enabled status"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertRuleListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "alert-rules"
        ],
        "summary": "Create Alert Rule",
        "description": "Create a new alert rule.\n\nArgs:\n    rule_data: Alert rule configuration\n    db: Database session\n\nReturns:\n    Created alert rule with assigned UUID\n\nRaises:\n    400: Invalid rule configuration\n    500: Database error\n\nExamples:\n    POST /alert-rules\n    {\n        \"name\": \"Package Delivery Alert\",\n        \"is_enabled\": true,\n        \"conditions\": {\n            \"object_types\": [\"person\", \"package\"],\n            \"min_confidence\": 75\n        },\n        \"actions\": {\n            \"dashboard_notification\": true,\n            \"webhook\": {\"url\": \"https://example.com/hook\"}\n        },\n        \"cooldown_minutes\": 10\n    }",
        "operationId": "create_alert_rule_api_v1_alert_rules_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AlertRuleCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/alert-rules/{rule_id}": {
      "get": {
        "tags": [
          "alert-rules"
        ],
        "summary": "Get Alert Rule",
        "description": "Get a single alert rule by ID.\n\nArgs:\n    rule_id: Alert rule UUID\n    db: Database session\n\nReturns:\n    Alert rule details\n\nRaises:\n    404: Rule not found\n    500: Database error\n\nExample:\n    GET /alert-rules/123e4567-e89b-12d3-a456-426614174000",
        "operationId": "get_alert_rule_api_v1_alert_rules__rule_id__get",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "alert-rules"
        ],
        "summary": "Update Alert Rule",
        "description": "Update an existing alert rule.\n\nSupports partial updates - only provided fields are updated.\n\nArgs:\n    rule_id: Alert rule UUID\n    rule_data: Fields to update\n    db: Database session\n\nReturns:\n    Updated alert rule\n\nRaises:\n    404: Rule not found\n    500: Database error\n\nExamples:\n    PUT /alert-rules/123e4567-e89b-12d3-a456-426614174000\n    {\n        \"name\": \"Updated Rule Name\",\n        \"is_enabled\": false\n    }",
        "operationId": "update_alert_rule_api_v1_alert_rules__rule_id__put",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AlertRuleUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertRuleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "alert-rules"
        ],
        "summary": "Delete Alert Rule",
        "description": "Delete an alert rule.\n\nHard delete - the rule is permanently removed.\n\nArgs:\n    rule_id: Alert rule UUID\n    db: Database session\n\nRaises:\n    404: Rule not found\n    500: Database error\n\nExample:\n    DELETE /alert-rules/123e4567-e89b-12d3-a456-426614174000",
        "operationId": "delete_alert_rule_api_v1_alert_rules__rule_id__delete",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/alert-rules/{rule_id}/test": {
      "post": {
        "tags": [
          "alert-rules"
        ],
        "summary": "Test Alert Rule",
        "description": "Test an alert rule against recent events.\n\nEvaluates the rule against the most recent events to show which\nevents would have triggered it. Does not actually execute actions.\n\nArgs:\n    rule_id: Alert rule UUID to test\n    test_config: Optional test configuration (limit)\n    db: Database session\n\nReturns:\n    Test results with matching events\n\nRaises:\n    404: Rule not found\n    500: Database error\n\nExample:\n    POST /alert-rules/123e4567-e89b-12d3-a456-426614174000/test\n    {\"limit\": 50}",
        "operationId": "test_alert_rule_api_v1_alert_rules__rule_id__test_post",
        "parameters": [
          {
            "name": "rule_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Rule Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/AlertRuleTestRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Test Config"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AlertRuleTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/test": {
      "post": {
        "tags": [
          "webhooks"
        ],
        "summary": "Test Webhook",
        "description": "Test a webhook URL by sending a sample payload.\n\nValidates the URL, sends an HTTP POST request, and returns the result.\nDoes not log to webhook_logs table (test only).\n\nArgs:\n    request: Webhook test request with URL, optional headers and payload\n\nReturns:\n    Test result with status code, response body, and timing\n\nRaises:\n    HTTPException: 400 if URL is invalid, 429 if rate limited",
        "operationId": "test_webhook_api_v1_webhooks_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebhookTestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/logs": {
      "get": {
        "tags": [
          "webhooks"
        ],
        "summary": "Get Webhook Logs",
        "description": "Get webhook delivery logs with optional filtering.\n\nSupports filtering by rule, success status, and date range.\nResults are sorted by created_at descending (newest first).\n\nArgs:\n    rule_id: Filter by specific alert rule\n    success: Filter by success/failure\n    start_date: Only include logs after this date\n    end_date: Only include logs before this date\n    limit: Maximum number of logs to return\n    offset: Number of logs to skip for pagination\n\nReturns:\n    List of webhook logs with total count",
        "operationId": "get_webhook_logs_api_v1_webhooks_logs_get",
        "parameters": [
          {
            "name": "rule_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by alert rule ID",
              "title": "Rule Id"
            },
            "description": "Filter by alert rule ID"
          },
          {
            "name": "success",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by success status",
              "title": "Success"
            },
            "description": "Filter by success status"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter logs after this date",
              "title": "Start Date"
            },
            "description": "Filter logs after this date"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter logs before this date",
              "title": "End Date"
            },
            "description": "Filter logs before this date"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "description": "Number of logs to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Number of logs to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of logs to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of logs to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookLogsListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/webhooks/logs/export": {
      "get": {
        "tags": [
          "webhooks"
        ],
        "summary": "Export Webhook Logs",
        "description": "Export webhook logs as CSV file.\n\nApplies the same filters as the list endpoint but returns all matching\nlogs as a downloadable CSV file.\n\nArgs:\n    rule_id: Filter by specific alert rule\n    success: Filter by success/failure\n    start_date: Only include logs after this date\n    end_date: Only include logs before this date\n\nReturns:\n    CSV file download",
        "operationId": "export_webhook_logs_api_v1_webhooks_logs_export_get",
        "parameters": [
          {
            "name": "rule_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by alert rule ID",
              "title": "Rule Id"
            },
            "description": "Filter by alert rule ID"
          },
          {
            "name": "success",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by success status",
              "title": "Success"
            },
            "description": "Filter by success status"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter logs after this date",
              "title": "Start Date"
            },
            "description": "Filter logs after this date"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter logs before this date",
              "title": "End Date"
            },
            "description": "Filter logs before this date"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications": {
      "get": {
        "tags": [
          "notifications"
        ],
        "summary": "List Notifications",
        "description": "Get notifications with optional filtering.\n\nSupports filtering by read/unread status and pagination.\nResults are sorted by created_at descending (newest first).\n\nArgs:\n    read: Filter by read status (true/false/null for all)\n    limit: Maximum number of notifications to return\n    offset: Number of notifications to skip for pagination\n\nReturns:\n    List of notifications with total and unread counts",
        "operationId": "list_notifications_api_v1_notifications_get",
        "parameters": [
          {
            "name": "read",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by read status",
              "title": "Read"
            },
            "description": "Filter by read status"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of notifications to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Number of notifications to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of notifications to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of notifications to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "notifications"
        ],
        "summary": "Delete All Notifications",
        "description": "Delete notifications in bulk.\n\nArgs:\n    read_only: If true, only delete read notifications\n\nReturns:\n    Success confirmation with count",
        "operationId": "delete_all_notifications_api_v1_notifications_delete",
        "parameters": [
          {
            "name": "read_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only delete read notifications",
              "default": false,
              "title": "Read Only"
            },
            "description": "Only delete read notifications"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete All Notifications Api V1 Notifications Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/{notification_id}/read": {
      "patch": {
        "tags": [
          "notifications"
        ],
        "summary": "Mark Notification Read",
        "description": "Mark a single notification as read.\n\nArgs:\n    notification_id: UUID of the notification to mark as read\n\nReturns:\n    Updated notification\n\nRaises:\n    HTTPException: 404 if notification not found",
        "operationId": "mark_notification_read_api_v1_notifications__notification_id__read_patch",
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Notification Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/mark-all-read": {
      "patch": {
        "tags": [
          "notifications"
        ],
        "summary": "Mark All Notifications Read",
        "description": "Mark all unread notifications as read.\n\nReturns:\n    Success status and count of updated notifications",
        "operationId": "mark_all_notifications_read_api_v1_notifications_mark_all_read_patch",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MarkReadResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/notifications/{notification_id}": {
      "delete": {
        "tags": [
          "notifications"
        ],
        "summary": "Delete Notification",
        "description": "Delete a single notification.\n\nArgs:\n    notification_id: UUID of the notification to delete\n\nReturns:\n    Success confirmation\n\nRaises:\n    HTTPException: 404 if notification not found",
        "operationId": "delete_notification_api_v1_notifications__notification_id__delete",
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Notification Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Notification Api V1 Notifications  Notification Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/logs": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "Get Logs",
        "description": "Query log entries with filtering and pagination.\n\nReturns log entries in JSON format with support for filtering by:\n- Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)\n- Module name (partial match)\n- Search text in messages\n- Date range\n\nResults are returned in reverse chronological order (newest first).\n\n**Example:**\n```\nGET /api/v1/logs?level=ERROR&limit=50\nGET /api/v1/logs?module=ai_service&search=timeout\nGET /api/v1/logs?start_date=2025-11-23&end_date=2025-11-23\n```\n\n**Response:**\n```json\n{\n    \"entries\": [...],\n    \"total\": 150,\n    \"limit\": 100,\n    \"offset\": 0,\n    \"has_more\": true\n}\n```",
        "operationId": "get_logs_api_v1_logs_get",
        "parameters": [
          {
            "name": "level",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)",
              "title": "Level"
            },
            "description": "Filter by log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)"
          },
          {
            "name": "module",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by module name (partial match)",
              "title": "Module"
            },
            "description": "Filter by module name (partial match)"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search text in log messages",
              "title": "Search"
            },
            "description": "Search text in log messages"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter entries on or after this date (YYYY-MM-DD)",
              "title": "Start Date"
            },
            "description": "Filter entries on or after this date (YYYY-MM-DD)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter entries on or before this date (YYYY-MM-DD)",
              "title": "End Date"
            },
            "description": "Filter entries on or before this date (YYYY-MM-DD)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum number of entries to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of entries to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of entries to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of entries to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/logs/download": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "Download Logs",
        "description": "Download log file for a specific date.\n\nDownloads the log file as a text file attachment.\n\n**Parameters:**\n- `date`: Date in YYYY-MM-DD format (optional, defaults to current log)\n- `log_type`: 'app' for all logs, 'error' for error logs only\n\n**Example:**\n```\nGET /api/v1/logs/download?date=2025-11-23\nGET /api/v1/logs/download?log_type=error\n```",
        "operationId": "download_logs_api_v1_logs_download_get",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Date to download logs for (YYYY-MM-DD). If not provided, downloads current log.",
              "title": "Date"
            },
            "description": "Date to download logs for (YYYY-MM-DD). If not provided, downloads current log."
          },
          {
            "name": "log_type",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Log type to download: 'app' (all logs) or 'error' (errors only)",
              "default": "app",
              "title": "Log Type"
            },
            "description": "Log type to download: 'app' (all logs) or 'error' (errors only)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/logs/files": {
      "get": {
        "tags": [
          "logs"
        ],
        "summary": "List Log Files",
        "description": "List available log files.\n\nReturns a list of log files in the logs directory.\n\n**Response:**\n```json\n{\n    \"files\": [\"app.log\", \"app.log.1\", \"error.log\"],\n    \"directory\": \"/backend/data/logs\"\n}\n```",
        "operationId": "list_log_files_api_v1_logs_files_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogFilesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Authenticate user",
        "description": "Login with username and password. Returns JWT token in response body and sets HTTP-only cookie. Rate limited to 5 attempts per 15 minutes per IP.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "JWT access token and user information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials or account disabled"
          },
          "429": {
            "description": "Rate limit exceeded - try again later"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "End user session",
        "description": "Logout by clearing the JWT cookie. Does not invalidate the token server-side.",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Logout confirmation message",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/change-password": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Change user password",
        "description": "Change password for current authenticated user. Requires current password verification. New password must be at least 8 characters with 1 uppercase, 1 number, and 1 special character.",
        "operationId": "change_password_api_v1_auth_change_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Password change confirmation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                }
              }
            }
          },
          "400": {
            "description": "New password doesn't meet requirements"
          },
          "401": {
            "description": "Current password is incorrect or not authenticated"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get current user",
        "description": "Returns information about the currently authenticated user based on the JWT token.",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "responses": {
          "200": {
            "description": "Current user profile information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated or token expired"
          }
        }
      }
    },
    "/api/v1/auth/setup-status": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get Setup Status",
        "description": "Check if initial setup is complete (admin user exists)\n\nUsed by frontend to determine if first-time setup is needed.",
        "operationId": "get_setup_status_api_v1_auth_setup_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers": {
      "get": {
        "tags": [
          "protect"
        ],
        "summary": "List Controllers",
        "description": "List all UniFi Protect controllers\n\nReturns:\n    List of all controllers with { data, meta } format",
        "operationId": "list_controllers_api_v1_protect_controllers_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectControllerListResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Create Controller",
        "description": "Add a new UniFi Protect controller\n\nArgs:\n    controller_data: Controller configuration from request body\n    db: Database session\n\nReturns:\n    Created controller object with { data, meta } format\n\nRaises:\n    409: Controller with same name already exists",
        "operationId": "create_controller_api_v1_protect_controllers_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProtectControllerCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectControllerSingleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}": {
      "get": {
        "tags": [
          "protect"
        ],
        "summary": "Get Controller",
        "description": "Get a single UniFi Protect controller by ID\n\nArgs:\n    controller_id: Controller UUID\n    db: Database session\n\nReturns:\n    Controller object with { data, meta } format\n\nRaises:\n    404: Controller not found",
        "operationId": "get_controller_api_v1_protect_controllers__controller_id__get",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectControllerSingleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "protect"
        ],
        "summary": "Update Controller",
        "description": "Update an existing UniFi Protect controller (Story P2-1.5)\n\nSupports partial updates - only provided fields are modified.\nIf connection-related fields change (host, port, username, password, verify_ssl),\nthe WebSocket connection is automatically reconnected.\n\nArgs:\n    controller_id: Controller UUID\n    controller_data: Partial controller data to update (all fields optional)\n    db: Database session\n\nReturns:\n    Updated controller object with { data, meta } format\n\nRaises:\n    404: Controller not found\n    409: New name conflicts with existing controller",
        "operationId": "update_controller_api_v1_protect_controllers__controller_id__put",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProtectControllerUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectControllerSingleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "protect"
        ],
        "summary": "Delete Controller",
        "description": "Delete a UniFi Protect controller (Story P2-1.5)\n\nThis will:\n1. Disconnect the WebSocket connection\n2. Disassociate Protect cameras (sets protect_controller_id = NULL)\n3. Delete the controller record\n\nNote: Cameras are disassociated rather than deleted to preserve historical events,\nas Event.camera_id has a NOT NULL constraint with CASCADE delete.\n\nArgs:\n    controller_id: Controller UUID\n    db: Database session\n\nReturns:\n    Delete confirmation with { data: { deleted: true }, meta } format\n\nRaises:\n    404: Controller not found",
        "operationId": "delete_controller_api_v1_protect_controllers__controller_id__delete",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectControllerDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/test": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Test Controller Connection",
        "description": "Test connection to a UniFi Protect controller with provided credentials.\n\nThis endpoint does NOT save any data - it's a test-only operation.\nUse this before saving a new controller to verify connectivity.\n\nArgs:\n    test_data: Connection parameters (host, port, username, password, verify_ssl)\n\nReturns:\n    Test result with success status, message, firmware_version (on success),\n    and camera_count (on success) in { data, meta } format.\n\nStatus Codes:\n    200: Test completed (check data.success for result)\n    401: Authentication failed\n    502: SSL certificate error\n    503: Host unreachable\n    504: Connection timed out",
        "operationId": "test_controller_connection_api_v1_protect_controllers_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProtectControllerTest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/test": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Test Existing Controller",
        "description": "Test connection to an existing UniFi Protect controller using stored credentials.\n\nThis endpoint retrieves the controller from the database, decrypts the\nstored password, and tests the connection.\n\nArgs:\n    controller_id: Controller UUID\n    db: Database session\n\nReturns:\n    Test result with success status, message, firmware_version (on success),\n    and camera_count (on success) in { data, meta } format.\n\nRaises:\n    404: Controller not found\n    401: Authentication failed\n    502: SSL certificate error\n    503: Host unreachable\n    504: Connection timed out",
        "operationId": "test_existing_controller_api_v1_protect_controllers__controller_id__test_post",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/connect": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Connect Controller",
        "description": "Connect to a UniFi Protect controller (AC10).\n\nEstablishes a persistent WebSocket connection to the controller and\nstarts a background listener for real-time events.\n\nArgs:\n    controller_id: Controller UUID\n    db: Database session\n\nReturns:\n    Connection status with { data: { controller_id, status }, meta } format.\n\nRaises:\n    404: Controller not found\n    503: Connection failed (unreachable, auth error, SSL error)",
        "operationId": "connect_controller_api_v1_protect_controllers__controller_id__connect_post",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/disconnect": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Disconnect Controller",
        "description": "Disconnect from a UniFi Protect controller (AC10).\n\nCloses the WebSocket connection and cancels the background listener task.\n\nArgs:\n    controller_id: Controller UUID\n    db: Database session\n\nReturns:\n    Disconnection status with { data: { controller_id, status }, meta } format.\n\nRaises:\n    404: Controller not found",
        "operationId": "disconnect_controller_api_v1_protect_controllers__controller_id__disconnect_post",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectConnectionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/cameras": {
      "get": {
        "tags": [
          "protect"
        ],
        "summary": "Discover Cameras",
        "description": "Discover cameras from a connected UniFi Protect controller (Story P2-2.1).\n\nReturns a list of all cameras available on the specified controller,\nincluding metadata like type, model, online status, and smart detection\ncapabilities. Results are cached for 60 seconds.\n\nArgs:\n    controller_id: Controller UUID\n    force_refresh: If True, bypass cache and fetch fresh data\n    db: Database session (for cross-referencing enabled cameras)\n\nReturns:\n    Camera list with { data: [...], meta } format where meta includes:\n    - count: Number of cameras discovered\n    - controller_id: The queried controller ID\n    - cached: Whether results came from cache\n    - cached_at: Cache timestamp (if cached)\n    - warning: Warning message if any issues occurred\n\nNote:\n    - Results are NOT auto-saved to cameras table (AC3)\n    - is_enabled_for_ai is true for cameras already in the cameras table\n    - Cache TTL is 60 seconds (AC4)\n    - On discovery failure, cached results returned if available (AC8)\n\nRaises:\n    404: Controller not found\n    503: Controller not connected and no cached results available",
        "operationId": "discover_cameras_api_v1_protect_controllers__controller_id__cameras_get",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          },
          {
            "name": "force_refresh",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Force Refresh"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectCamerasResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/cameras/{camera_id}/enable": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Enable Camera",
        "description": "Enable a discovered camera for AI analysis (Story P2-2.2, AC6)\n\nCreates a camera record in the database with source_type='protect'.\nIf the camera already exists, updates it to enabled.\n\nArgs:\n    controller_id: The controller UUID\n    camera_id: The Protect camera ID (protect_camera_id)\n    request: Optional request body with name override and smart detection types\n    db: Database session\n\nReturns:\n    ProtectCameraEnableResponse with camera data and meta\n\nRaises:\n    404: Controller not found\n    400: Camera not found in discovered cameras",
        "operationId": "enable_camera_api_v1_protect_controllers__controller_id__cameras__camera_id__enable_post",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          },
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProtectCameraEnableRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectCameraEnableResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/cameras/{camera_id}/disable": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Disable Camera",
        "description": "Disable a camera from AI analysis (Story P2-2.2, AC7)\n\nSets the camera record to disabled without deleting it.\nThis preserves settings for future re-enabling.\n\nArgs:\n    controller_id: The controller UUID\n    camera_id: The Protect camera ID (protect_camera_id)\n    db: Database session\n\nReturns:\n    ProtectCameraDisableResponse with camera data and meta\n\nRaises:\n    404: Controller or camera not found",
        "operationId": "disable_camera_api_v1_protect_controllers__controller_id__cameras__camera_id__disable_post",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          },
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectCameraDisableResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/controllers/{controller_id}/cameras/{camera_id}/filters": {
      "put": {
        "tags": [
          "protect"
        ],
        "summary": "Update Camera Filters",
        "description": "Update camera event type filters (Story P2-2.3, AC6, AC7)\n\nUpdates the smart_detection_types for an enabled camera.\nSettings persist across app restarts.\n\nArgs:\n    controller_id: The controller UUID\n    camera_id: The Protect camera ID (protect_camera_id)\n    request: The filter configuration\n    db: Database session\n\nReturns:\n    ProtectCameraFiltersResponse with updated camera data and meta\n\nRaises:\n    404: Controller or camera not found\n    422: Invalid filter types",
        "operationId": "update_camera_filters_api_v1_protect_controllers__controller_id__cameras__camera_id__filters_put",
        "parameters": [
          {
            "name": "controller_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Controller Id"
            }
          },
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProtectCameraFiltersRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProtectCameraFiltersResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/protect/test-clip-download": {
      "post": {
        "tags": [
          "protect"
        ],
        "summary": "Test Clip Download",
        "description": "Test clip download from a UniFi Protect camera (Story P3-1.5).\n\nThis endpoint is for development/testing purposes only. It:\n1. Validates the camera exists and is a Protect camera\n2. Attempts to download a clip for the specified time range\n3. Returns file size and duration on success\n4. Always cleans up the test clip after returning\n\nNote: Returns HTTP 200 for all outcomes - check 'success' field for result.\nThis allows testing without triggering error handlers.\n\nArgs:\n    request: Camera ID and time range for clip download\n    db: Database session\n\nReturns:\n    TestClipDownloadResponse with success status and metadata or error",
        "operationId": "test_clip_download_api_v1_protect_test_clip_download_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestClipDownloadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestClipDownloadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system-notifications": {
      "get": {
        "tags": [
          "system-notifications"
        ],
        "summary": "List System Notifications",
        "description": "Get system notifications with optional filtering.\n\nSupports filtering by type, read/unread status, and pagination.\nResults are sorted by created_at descending (newest first).",
        "operationId": "list_system_notifications_api_v1_system_notifications_get",
        "parameters": [
          {
            "name": "notification_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by notification type (cost_alert, etc.)",
              "title": "Notification Type"
            },
            "description": "Filter by notification type (cost_alert, etc.)"
          },
          {
            "name": "read",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by read status",
              "title": "Read"
            },
            "description": "Filter by read status"
          },
          {
            "name": "dismissed",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Include dismissed notifications",
              "default": false,
              "title": "Dismissed"
            },
            "description": "Include dismissed notifications"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of notifications to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Number of notifications to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of notifications to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of notifications to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemNotificationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "system-notifications"
        ],
        "summary": "Delete All Notifications",
        "description": "Delete system notifications in bulk.",
        "operationId": "delete_all_notifications_api_v1_system_notifications_delete",
        "parameters": [
          {
            "name": "notification_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Only delete this type",
              "title": "Notification Type"
            },
            "description": "Only delete this type"
          },
          {
            "name": "read_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only delete read notifications",
              "default": false,
              "title": "Read Only"
            },
            "description": "Only delete read notifications"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete All Notifications Api V1 System Notifications Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system-notifications/{notification_id}/read": {
      "patch": {
        "tags": [
          "system-notifications"
        ],
        "summary": "Mark Notification Read",
        "description": "Mark a single system notification as read.",
        "operationId": "mark_notification_read_api_v1_system_notifications__notification_id__read_patch",
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Notification Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemNotificationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system-notifications/{notification_id}/dismiss": {
      "patch": {
        "tags": [
          "system-notifications"
        ],
        "summary": "Dismiss Notification",
        "description": "Dismiss a single system notification (hides it from default view).",
        "operationId": "dismiss_notification_api_v1_system_notifications__notification_id__dismiss_patch",
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Notification Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemNotificationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system-notifications/mark-all-read": {
      "patch": {
        "tags": [
          "system-notifications"
        ],
        "summary": "Mark All Notifications Read",
        "description": "Mark all unread system notifications as read.",
        "operationId": "mark_all_notifications_read_api_v1_system_notifications_mark_all_read_patch",
        "parameters": [
          {
            "name": "notification_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Only mark this type as read",
              "title": "Notification Type"
            },
            "description": "Only mark this type as read"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MarkReadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/system-notifications/{notification_id}": {
      "delete": {
        "tags": [
          "system-notifications"
        ],
        "summary": "Delete Notification",
        "description": "Delete a single system notification.",
        "operationId": "delete_notification_api_v1_system_notifications__notification_id__delete",
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Notification Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Notification Api V1 System Notifications  Notification Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/vapid-public-key": {
      "get": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Get Vapid Key",
        "description": "Get VAPID public key for push subscription.\n\nThe frontend uses this key as the `applicationServerKey` when calling\n`pushManager.subscribe()`. Keys are generated automatically on first request.\n\n**Response:**\n```json\n{\n    \"public_key\": \"BEl62iUYgUivxIkv69yViEuiBIa-...\"\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Key generation failed",
        "operationId": "get_vapid_key_api_v1_push_vapid_public_key_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VapidPublicKeyResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/requirements": {
      "get": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Get Push Requirements",
        "description": "Get push notification requirements and HTTPS status (Story P9-5.1).\n\nChecks if HTTPS is configured and returns a warning if push notifications\nmay not work properly without HTTPS. Web Push requires a secure context.\n\n**Response:**\n```json\n{\n    \"https_required\": true,\n    \"https_configured\": false,\n    \"warning\": \"Push notifications require HTTPS for full functionality...\",\n    \"ready\": false\n}\n```\n\n**Status Codes:**\n- 200: Success",
        "operationId": "get_push_requirements_api_v1_push_requirements_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PushRequirementsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/subscribe": {
      "post": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Subscribe",
        "description": "Register a push subscription.\n\nStores the browser's push subscription for receiving notifications.\nIf the endpoint already exists, the subscription is updated (upsert).\n\n**Request Body:**\n```json\n{\n    \"endpoint\": \"https://fcm.googleapis.com/fcm/send/...\",\n    \"keys\": {\n        \"p256dh\": \"BNcRdreALRFXTkOOUHK1EtK2wtaz5Ry4YfYCA_...\",\n        \"auth\": \"tBHItJI5svbpez7KI4CCXg==\"\n    },\n    \"user_agent\": \"Mozilla/5.0 (iPhone; ...)\"\n}\n```\n\n**Response:**\n```json\n{\n    \"id\": \"uuid\",\n    \"endpoint\": \"https://fcm.googleapis.com/...xyz\",\n    \"created_at\": \"2025-12-10T10:30:00Z\"\n}\n```\n\n**Status Codes:**\n- 201: Subscription created\n- 200: Existing subscription updated\n- 400: Invalid subscription data\n- 500: Internal server error",
        "operationId": "subscribe_api_v1_push_subscribe_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscribeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Unsubscribe",
        "description": "Unsubscribe from push notifications.\n\nRemoves the push subscription from the database.\n\n**Request Body:**\n```json\n{\n    \"endpoint\": \"https://fcm.googleapis.com/fcm/send/...\"\n}\n```\n\n**Status Codes:**\n- 204: Successfully unsubscribed\n- 404: Subscription not found\n- 500: Internal server error",
        "operationId": "unsubscribe_api_v1_push_subscribe_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnsubscribeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/unsubscribe": {
      "post": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Unsubscribe Post",
        "description": "Unsubscribe from push notifications (POST alias for backward compatibility).\n\nThis is an alias for DELETE /subscribe endpoint for clients that don't support\nDELETE requests with a body. Removes the push subscription from the database.\n\n**Request Body:**\n```json\n{\n    \"endpoint\": \"https://fcm.googleapis.com/fcm/send/...\"\n}\n```\n\n**Status Codes:**\n- 204: Successfully unsubscribed\n- 404: Subscription not found\n- 500: Internal server error",
        "operationId": "unsubscribe_post_api_v1_push_unsubscribe_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UnsubscribeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/subscriptions": {
      "get": {
        "tags": [
          "push-notifications"
        ],
        "summary": "List Subscriptions",
        "description": "List all push subscriptions (admin endpoint).\n\nReturns all registered push subscriptions for debugging and administration.\nEndpoints are truncated for security.\n\n**Response:**\n```json\n{\n    \"subscriptions\": [\n        {\n            \"id\": \"uuid\",\n            \"user_id\": \"uuid-or-null\",\n            \"endpoint\": \"...truncated...\",\n            \"user_agent\": \"Mozilla/5.0...\",\n            \"created_at\": \"2025-12-10T10:30:00Z\",\n            \"last_used_at\": \"2025-12-10T14:22:00Z\"\n        }\n    ],\n    \"total\": 42\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 500: Internal server error",
        "operationId": "list_subscriptions_api_v1_push_subscriptions_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/test": {
      "post": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Send Test Notification",
        "description": "Send a test push notification to all subscribed devices.\n\nUsed to verify push notification setup is working correctly.\nSends a sample notification to all registered subscriptions.\n\n**Response:**\n```json\n{\n    \"success\": true,\n    \"message\": \"Test notification sent to 2 subscriptions\",\n    \"results\": [\n        {\"subscription_id\": \"uuid\", \"success\": true},\n        {\"subscription_id\": \"uuid\", \"success\": false, \"error\": \"expired\"}\n    ]\n}\n```\n\n**Status Codes:**\n- 200: Test completed (check individual results for delivery status)\n- 500: Internal server error",
        "operationId": "send_test_notification_api_v1_push_test_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TestNotificationResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/push/preferences": {
      "put": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Update Preferences",
        "description": "Update notification preferences for a subscription.\n\nUpdates the notification preferences for the subscription identified by endpoint.\nCreates default preferences first if they don't exist.\n\n**Request Body:**\n```json\n{\n    \"endpoint\": \"https://fcm.googleapis.com/fcm/send/...\",\n    \"enabled_cameras\": [\"cam-uuid-1\", \"cam-uuid-2\"],\n    \"enabled_object_types\": [\"person\", \"vehicle\"],\n    \"quiet_hours_enabled\": true,\n    \"quiet_hours_start\": \"22:00\",\n    \"quiet_hours_end\": \"07:00\",\n    \"timezone\": \"America/New_York\",\n    \"sound_enabled\": true\n}\n```\n\n**Response:**\nReturns the updated preferences (same format as GET).\n\n**Status Codes:**\n- 200: Success\n- 400: Invalid request data (bad timezone, invalid time format, etc.)\n- 404: Subscription not found\n- 500: Internal server error",
        "operationId": "update_preferences_api_v1_push_preferences_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationPreferencesUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationPreferencesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "push-notifications"
        ],
        "summary": "Get Preferences",
        "description": "Get notification preferences for a subscription.\n\nReturns the notification preferences for the subscription identified by endpoint.\nIf no preferences exist, creates default preferences (all notifications enabled).\n\n**Request Body:**\n```json\n{\n    \"endpoint\": \"https://fcm.googleapis.com/fcm/send/...\"\n}\n```\n\n**Response:**\n```json\n{\n    \"id\": \"uuid\",\n    \"subscription_id\": \"uuid\",\n    \"enabled_cameras\": null,\n    \"enabled_object_types\": null,\n    \"quiet_hours_enabled\": false,\n    \"quiet_hours_start\": null,\n    \"quiet_hours_end\": null,\n    \"timezone\": \"UTC\",\n    \"sound_enabled\": true,\n    \"created_at\": \"2025-12-10T10:30:00Z\",\n    \"updated_at\": \"2025-12-10T10:30:00Z\"\n}\n```\n\n**Status Codes:**\n- 200: Success\n- 404: Subscription not found\n- 500: Internal server error",
        "operationId": "get_preferences_api_v1_push_preferences_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NotificationPreferencesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotificationPreferencesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/mqtt/config": {
      "get": {
        "tags": [
          "integrations"
        ],
        "summary": "Get Mqtt Config",
        "description": "Get current MQTT configuration (AC5: Status queryable).\n\nReturns the MQTT broker configuration with password omitted for security.\nIf no configuration exists, returns a default configuration.",
        "operationId": "get_mqtt_config_api_v1_integrations_mqtt_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MQTTConfigResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "integrations"
        ],
        "summary": "Update Mqtt Config",
        "description": "Update MQTT configuration and reconnect if enabled (AC6: Encrypted credentials).\n\nIf MQTT is enabled, triggers a reconnect with the new configuration.\nCredentials are encrypted before storage using Fernet AES-256.",
        "operationId": "update_mqtt_config_api_v1_integrations_mqtt_config_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MQTTConfigUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MQTTConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/mqtt/status": {
      "get": {
        "tags": [
          "integrations"
        ],
        "summary": "Get Mqtt Status",
        "description": "Get current MQTT connection status (AC5: Connection status tracked).\n\nReturns connection status, statistics, and any error messages.",
        "operationId": "get_mqtt_status_api_v1_integrations_mqtt_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MQTTStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/mqtt/test": {
      "post": {
        "tags": [
          "integrations"
        ],
        "summary": "Test Mqtt Connection",
        "description": "Test MQTT connection without persisting configuration (AC1: Connect with auth).\n\nAttempts to connect to the specified broker with the provided credentials.\nConnection is closed after test regardless of outcome.",
        "operationId": "test_mqtt_connection_api_v1_integrations_mqtt_test_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MQTTTestRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MQTTTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/mqtt/publish-discovery": {
      "post": {
        "tags": [
          "integrations"
        ],
        "summary": "Publish Discovery",
        "description": "Manually trigger Home Assistant discovery publishing (Story P4-2.2, AC1).\n\nPublishes discovery configuration for all enabled cameras.\nUse after adding new cameras or when discovery messages need refresh.\n\nRequires MQTT to be connected and discovery to be enabled.",
        "operationId": "publish_discovery_api_v1_integrations_mqtt_publish_discovery_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PublishDiscoveryResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/homekit/status": {
      "get": {
        "tags": [
          "integrations"
        ],
        "summary": "Get Homekit Status",
        "description": "Get current HomeKit integration status (AC8: Status endpoint).\n\nReturns enabled/running state, pairing info, and setup code if not paired.",
        "operationId": "get_homekit_status_api_v1_integrations_homekit_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomekitStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/homekit/reset": {
      "post": {
        "tags": [
          "integrations"
        ],
        "summary": "Reset Homekit Pairing",
        "description": "Reset HomeKit pairing (AC10: Reset functionality).\n\nRemoves existing pairing state, requiring re-pairing with the Home app.\nGenerates a new pairing code.",
        "operationId": "reset_homekit_pairing_api_v1_integrations_homekit_reset_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomekitResetResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/integrations/homekit/enable": {
      "put": {
        "tags": [
          "integrations"
        ],
        "summary": "Update Homekit Enabled",
        "description": "Enable or disable HomeKit integration (AC6: Toggle in settings).\n\nWhen enabled, starts the HomeKit accessory server.\nWhen disabled, stops the server but preserves pairing state.",
        "operationId": "update_homekit_enabled_api_v1_integrations_homekit_enable_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HomekitEnableRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomekitStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/embeddings/batch": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Batch Generate Embeddings",
        "description": "Generate embeddings for events that don't have them yet.\n\nAC8: Batch processing endpoint for generating embeddings on existing events\nAC9: Batch processing respects rate limiting (max 100 events per request)\n\nArgs:\n    request: Batch processing parameters (limit 1-100)\n    db: Database session\n    embedding_service: Embedding service instance\n\nReturns:\n    BatchEmbeddingResponse with processed/failed/remaining counts",
        "operationId": "batch_generate_embeddings_api_v1_context_embeddings_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchEmbeddingRequest",
                "default": {
                  "limit": 100
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchEmbeddingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/embeddings/{event_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Embedding Status",
        "description": "Get embedding status for a specific event.\n\nAC12: API endpoint to check embedding status for an event\n\nArgs:\n    event_id: UUID of the event\n    db: Database session\n    embedding_service: Embedding service instance\n\nReturns:\n    EmbeddingStatusResponse with embedding metadata\n\nRaises:\n    404: If event not found",
        "operationId": "get_embedding_status_api_v1_context_embeddings__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/embeddings/stats": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Embedding Stats",
        "description": "Get statistics about embedding coverage.\n\nReturns counts of events with/without embeddings and coverage percentage.\n\nArgs:\n    db: Database session\n    embedding_service: Embedding service instance\n\nReturns:\n    EmbeddingStatsResponse with coverage statistics",
        "operationId": "get_embedding_stats_api_v1_context_embeddings_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingStatsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/similar/{event_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Find Similar Events",
        "description": "Find events visually similar to the specified event.\n\nStory P4-3.2: Similarity Search\n\nUses CLIP embeddings and cosine similarity to find past events that look\nsimilar to the source event. Useful for identifying recurring visitors\nor patterns.\n\nArgs:\n    event_id: UUID of the source event to find similar events for\n    limit: Maximum number of results (1-100, default 10)\n    min_similarity: Minimum similarity threshold (0.0-1.0, default 0.7)\n    time_window_days: Days to search back (1-365, default 30)\n    camera_id: Optional camera filter\n    db: Database session\n    similarity_service: Similarity service instance\n\nReturns:\n    SimilarEventsResponse with list of similar events\n\nRaises:\n    404: If event not found or event has no embedding",
        "operationId": "find_similar_events_api_v1_context_similar__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of similar events to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of similar events to return"
          },
          {
            "name": "min_similarity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "maximum": 1.0,
              "minimum": 0.0,
              "description": "Minimum similarity score threshold (0.0 to 1.0)",
              "default": 0.7,
              "title": "Min Similarity"
            },
            "description": "Minimum similarity score threshold (0.0 to 1.0)"
          },
          {
            "name": "time_window_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 1,
              "description": "Number of days to search back",
              "default": 30,
              "title": "Time Window Days"
            },
            "description": "Number of days to search back"
          },
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional camera UUID to filter results to same camera",
              "title": "Camera Id"
            },
            "description": "Optional camera UUID to filter results to same camera"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimilarEventsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "List Entities",
        "description": "Get all recognized entities with pagination.\n\nStory P4-3.3: Recurring Visitor Detection (AC7)\nStory P7-4.2: Search functionality added\n\nReturns a list of all entities that have been recognized, sorted by\nmost recently seen. Supports filtering by type, named-only, and search.\n\nArgs:\n    limit: Maximum number of entities (1-100, default 50)\n    offset: Pagination offset\n    entity_type: Filter by entity type\n    named_only: Only return entities that have been named\n    search: Search string to filter by name\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    EntityListResponse with entities and total count",
        "operationId": "list_entities_api_v1_context_entities_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of entities to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of entities to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "entity_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by entity type (person, vehicle)",
              "title": "Entity Type"
            },
            "description": "Filter by entity type (person, vehicle)"
          },
          {
            "name": "named_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only return named entities",
              "default": false,
              "title": "Named Only"
            },
            "description": "Only return named entities"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search by entity name (case-insensitive partial match)",
              "title": "Search"
            },
            "description": "Search by entity name (case-insensitive partial match)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntityListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Create Entity",
        "description": "Create a new entity manually.\n\nStory P7-4.1: Design Entities Data Model (AC4)\nStory P10-4.2: Implement Manual Entity Creation\n\nAllows manual creation of entities (person, vehicle) before automatic\nrecognition assigns them. Useful for pre-registering known individuals\nor vehicles.\n\nFor vehicle entities, vehicle_color, vehicle_make, and vehicle_model\ncan be specified. At least color+make or make+model is recommended.\nA vehicle_signature is auto-generated from these fields.\n\nArgs:\n    request: Entity creation parameters\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    EntityDetailResponse with created entity details\n\nRaises:\n    HTTPException 400: If vehicle entity missing required fields",
        "operationId": "create_entity_api_v1_context_entities_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntityCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntityDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/vip": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "List Vip Entities",
        "description": "List all VIP entities (persons and vehicles).\n\nStory P4-8.4: Named Entity Alerts\n\nReturns all entities marked as VIP, sorted by last_seen_at descending.\nVIP entities trigger priority notifications with distinct styling.\n\nArgs:\n    limit: Maximum number of entities to return (1-100)\n    offset: Pagination offset\n    db: Database session\n\nReturns:\n    VipBlockedEntityListResponse with list of VIP entities",
        "operationId": "list_vip_entities_api_v1_context_entities_vip_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum entities to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum entities to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VipBlockedEntityListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/blocked": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "List Blocked Entities",
        "description": "List all blocked entities (persons and vehicles).\n\nStory P4-8.4: Named Entity Alerts\n\nReturns all entities on the blocklist, sorted by last_seen_at descending.\nBlocked entities have their notifications suppressed, but events are\nstill recorded in the system.\n\nArgs:\n    limit: Maximum number of entities to return (1-100)\n    offset: Pagination offset\n    db: Database session\n\nReturns:\n    VipBlockedEntityListResponse with list of blocked entities",
        "operationId": "list_blocked_entities_api_v1_context_entities_blocked_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum entities to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum entities to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VipBlockedEntityListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/{entity_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Entity",
        "description": "Get a single entity with its associated events.\n\nStory P4-3.3: Recurring Visitor Detection (AC8)\n\nReturns detailed information about an entity, including recent events\nthat have been associated with it.\n\nArgs:\n    entity_id: UUID of the entity\n    event_limit: Maximum number of recent events (1-50, default 10)\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    EntityDetailResponse with entity details and recent events\n\nRaises:\n    404: If entity not found",
        "operationId": "get_entity_api_v1_context_entities__entity_id__get",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          },
          {
            "name": "event_limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Maximum number of recent events to include",
              "default": 10,
              "title": "Event Limit"
            },
            "description": "Maximum number of recent events to include"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntityDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "context"
        ],
        "summary": "Update Entity",
        "description": "Update an entity's name, notes, or status.\n\nStory P4-3.3: Recurring Visitor Detection (AC9)\nStory P7-4.1: Design Entities Data Model (AC4)\n\nAllows users to update entity properties including name, notes,\nVIP status, and blocked status.\n\nArgs:\n    entity_id: UUID of the entity\n    request: Update request with new values\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    Updated EntityResponse\n\nRaises:\n    404: If entity not found",
        "operationId": "update_entity_api_v1_context_entities__entity_id__put",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EntityUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntityResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Delete Entity",
        "description": "Delete an entity.\n\nStory P4-3.3: Recurring Visitor Detection (AC10)\n\nDeletes an entity and unlinks all associated events. Events themselves\nare not deleted, only the entity-event associations.\n\nArgs:\n    entity_id: UUID of the entity\n    db: Database session\n    entity_service: Entity service instance\n\nRaises:\n    404: If entity not found",
        "operationId": "delete_entity_api_v1_context_entities__entity_id__delete",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/{entity_id}/events": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Entity Events",
        "description": "Get paginated events for an entity.\n\nStory P9-4.2: Build Entity Event List View\n\nReturns paginated list of events associated with an entity,\nsorted by timestamp descending (newest first).\n\nArgs:\n    entity_id: UUID of the entity\n    page: Page number (1-indexed, default 1)\n    limit: Events per page (1-50, default 20)\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    EntityEventsResponse with paginated events and metadata\n\nRaises:\n    404: If entity not found",
        "operationId": "get_entity_events_api_v1_context_entities__entity_id__events_get",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Number of events per page",
              "default": 20,
              "title": "Limit"
            },
            "description": "Number of events per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EntityEventsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/events/{event_id}/entity": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Assign Event To Entity",
        "description": "Assign or move an event to an entity.\n\nStory P9-4.4: Implement Event-Entity Assignment\n\nIf the event has no entity, assigns it to the specified entity.\nIf the event already has an entity, moves it to the new entity.\nCreates EntityAdjustment record(s) for ML training.\n\nArgs:\n    event_id: UUID of the event to assign\n    request: Request body with target entity_id\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    AssignEventResponse with success status, message, and entity info\n\nRaises:\n    404: If event or entity not found",
        "operationId": "assign_event_to_entity_api_v1_context_events__event_id__entity_post",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignEventRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssignEventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/{entity_id}/events/{event_id}": {
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Unlink Event From Entity",
        "description": "Unlink an event from an entity.\n\nStory P9-4.3: Implement Event-Entity Unlinking\n\nRemoves the association between an event and an entity. This does NOT\ndelete the event itself, only the EntityEvent junction record. Also\ncreates an EntityAdjustment record for ML training.\n\nArgs:\n    entity_id: UUID of the entity\n    event_id: UUID of the event to unlink\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    UnlinkEventResponse with success status and message\n\nRaises:\n    404: If entity or event link not found",
        "operationId": "unlink_event_from_entity_api_v1_context_entities__entity_id__events__event_id__delete",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          },
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnlinkEventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/{entity_id}/thumbnail": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Entity Thumbnail",
        "description": "Get thumbnail image for an entity.\n\nStory P7-4.1: Design Entities Data Model (AC4)\n\nReturns the entity's thumbnail image as JPEG. If no thumbnail exists,\nreturns 404.\n\nArgs:\n    entity_id: UUID of the entity\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    JPEG image response\n\nRaises:\n    404: If entity not found or has no thumbnail",
        "operationId": "get_entity_thumbnail_api_v1_context_entities__entity_id__thumbnail_get",
        "parameters": [
          {
            "name": "entity_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Entity Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/entities/merge": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Merge Entities",
        "description": "Merge two entities into one (Story P9-4.5).\n\nMoves all events from the secondary entity to the primary entity,\ncreates adjustment records for ML training, updates occurrence counts,\nand deletes the secondary entity.\n\nArgs:\n    request: Merge request with primary and secondary entity IDs\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    MergeEntitiesResponse with merge results\n\nRaises:\n    400: If attempting to merge an entity with itself\n    404: If either entity not found",
        "operationId": "merge_entities_api_v1_context_entities_merge_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MergeEntitiesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MergeEntitiesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/patterns/{camera_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Camera Patterns",
        "description": "Get activity patterns for a camera.\n\nStory P4-3.5: Pattern Detection (AC10, AC11)\n\nReturns pre-calculated time-based activity patterns including hourly and\ndaily distributions, peak hours, quiet hours, and average events per day.\n\nPatterns are recalculated hourly and enable AI descriptions to include\ntiming context like \"Typical activity time\" or \"Unusual timing\".\n\nArgs:\n    camera_id: UUID of the camera\n    db: Database session\n    pattern_service: Pattern service instance\n\nReturns:\n    PatternResponse with activity patterns\n\nRaises:\n    404: If camera not found or no patterns available",
        "operationId": "get_camera_patterns_api_v1_context_patterns__camera_id__get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PatternResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/patterns/{camera_id}/recalculate": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Recalculate Camera Patterns",
        "description": "Force recalculation of activity patterns for a camera.\n\nStory P4-3.5: Pattern Detection (AC15)\n\nImmediately recalculates patterns regardless of when they were last\ncalculated. Useful for testing or after significant event activity changes.\n\nArgs:\n    camera_id: UUID of the camera\n    window_days: Number of days to analyze (7-365, default 30)\n    db: Database session\n    pattern_service: Pattern service instance\n\nReturns:\n    RecalculatePatternResponse with status\n\nRaises:\n    404: If camera not found",
        "operationId": "recalculate_camera_patterns_api_v1_context_patterns__camera_id__recalculate_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          },
          {
            "name": "window_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "description": "Number of days to analyze",
              "default": 30,
              "title": "Window Days"
            },
            "description": "Number of days to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecalculatePatternResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/patterns/batch": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Batch Recalculate Patterns",
        "description": "Recalculate activity patterns for all enabled cameras.\n\nStory P4-3.5: Pattern Detection (AC9)\n\nTriggers batch pattern recalculation for all enabled cameras. This\noperation respects the rate limiting (skips cameras calculated within\nthe last hour unless forced).\n\nArgs:\n    window_days: Number of days to analyze (7-365, default 30)\n    db: Database session\n    pattern_service: Pattern service instance\n\nReturns:\n    BatchPatternResponse with calculation statistics",
        "operationId": "batch_recalculate_patterns_api_v1_context_patterns_batch_post",
        "parameters": [
          {
            "name": "window_days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 365,
              "minimum": 7,
              "description": "Number of days to analyze",
              "default": 30,
              "title": "Window Days"
            },
            "description": "Number of days to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BatchPatternResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/anomaly/score/{event_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Score Event",
        "description": "Calculate and persist anomaly score for an existing event.\n\nStory P4-7.2: Anomaly Scoring (AC6, AC7)\n\nCalculates how unusual an event is compared to the camera's baseline\nactivity patterns. Score is persisted to the event record.\n\nScoring components:\n- Timing: Is this hour unusual for events? (40% weight)\n- Day: Is this day-of-week unusual? (20% weight)\n- Object: Are the detected objects unusual? (40% weight)\n\nSeverity thresholds:\n- Low: score < 0.3\n- Medium: 0.3 <= score < 0.6\n- High: score >= 0.6\n\nArgs:\n    event_id: UUID of the event to score\n    db: Database session\n    anomaly_service: Anomaly scoring service instance\n\nReturns:\n    AnomalyScoreResponse with detailed score breakdown\n\nRaises:\n    404: If event not found\n    500: If scoring fails",
        "operationId": "score_event_api_v1_context_anomaly_score__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnomalyScoreResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/anomaly/score": {
      "post": {
        "tags": [
          "context"
        ],
        "summary": "Calculate Anomaly Score",
        "description": "Calculate anomaly score for arbitrary event data without persisting.\n\nStory P4-7.2: Anomaly Scoring (AC8)\n\nUseful for preview/testing of anomaly detection without creating events.\nDoes not persist the score to any event record.\n\nArgs:\n    request: Anomaly score request with camera_id, timestamp, and objects\n    db: Database session\n    pattern_service: Pattern service for baseline lookup\n    anomaly_service: Anomaly scoring service instance\n\nReturns:\n    AnomalyScoreResponse with detailed score breakdown\n\nRaises:\n    404: If camera not found",
        "operationId": "calculate_anomaly_score_api_v1_context_anomaly_score_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnomalyScoreRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnomalyScoreResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/faces/{event_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Face Embeddings",
        "description": "Get all face embeddings for an event.\n\nStory P4-8.1: Face Embedding Storage (AC7)\n\nReturns face embeddings detected in the event thumbnail, including\nbounding box coordinates and confidence scores.\n\nArgs:\n    event_id: UUID of the event\n    db: Database session\n    face_service: Face embedding service instance\n\nReturns:\n    FaceEmbeddingsResponse with list of face embeddings\n\nRaises:\n    404: If event not found",
        "operationId": "get_face_embeddings_api_v1_context_faces__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FaceEmbeddingsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Delete Event Faces",
        "description": "Delete all face embeddings for an event.\n\nStory P4-8.1: Face Embedding Storage (AC7)\n\nRemoves face embedding data for a specific event. Event itself is not deleted.\n\nArgs:\n    event_id: UUID of the event\n    db: Database session\n    face_service: Face embedding service instance\n\nReturns:\n    DeleteFacesResponse with count of deleted embeddings\n\nRaises:\n    404: If event not found",
        "operationId": "delete_event_faces_api_v1_context_faces__event_id__delete",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteFacesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/faces": {
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Delete All Faces",
        "description": "Delete all face embeddings from the database.\n\nStory P4-8.1: Face Embedding Storage (AC5)\n\nPrivacy control endpoint - allows users to clear all stored face data.\nThis is an admin-level operation that removes ALL face embeddings.\n\nArgs:\n    db: Database session\n    face_service: Face embedding service instance\n\nReturns:\n    DeleteFacesResponse with count of deleted embeddings",
        "operationId": "delete_all_faces_api_v1_context_faces_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteFacesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/faces/stats": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Face Stats",
        "description": "Get face embedding statistics.\n\nStory P4-8.1: Face Embedding Storage\n\nReturns statistics about face embeddings including total count\nand current settings.\n\nArgs:\n    db: Database session\n    face_service: Face embedding service instance\n\nReturns:\n    FaceStatsResponse with statistics",
        "operationId": "get_face_stats_api_v1_context_faces_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FaceStatsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/persons": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "List Persons",
        "description": "List all known persons.\n\nStory P4-8.2: Person Matching\n\nReturns persons (RecognizedEntity with entity_type='person') sorted by\nlast_seen_at descending. Includes face_count for each person.\n\nArgs:\n    limit: Maximum number of persons to return (1-100)\n    offset: Pagination offset\n    named_only: If True, only return persons with names assigned\n    db: Database session\n    person_service: Person matching service instance\n\nReturns:\n    PersonListResponse with list of persons and pagination info",
        "operationId": "list_persons_api_v1_context_persons_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of persons to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of persons to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "named_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only return named persons",
              "default": false,
              "title": "Named Only"
            },
            "description": "Only return named persons"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/persons/{person_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Person",
        "description": "Get person details.\n\nStory P4-8.2: Person Matching\n\nReturns detailed information about a specific person including\nrecent face detections linked to them.\n\nArgs:\n    person_id: UUID of the person\n    include_faces: Whether to include recent face detections\n    face_limit: Maximum number of faces to include\n    db: Database session\n    person_service: Person matching service instance\n\nReturns:\n    PersonDetailResponse with person details and faces\n\nRaises:\n    HTTPException 404: If person not found",
        "operationId": "get_person_api_v1_context_persons__person_id__get",
        "parameters": [
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          },
          {
            "name": "include_faces",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include recent face detections",
              "default": true,
              "title": "Include Faces"
            },
            "description": "Include recent face detections"
          },
          {
            "name": "face_limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Maximum faces to include",
              "default": 10,
              "title": "Face Limit"
            },
            "description": "Maximum faces to include"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "context"
        ],
        "summary": "Update Person",
        "description": "Update a person's name, VIP status, or blocked status.\n\nStory P4-8.2: Person Matching\nStory P4-8.4: Named Entity Alerts (VIP and blocked)\n\nAllows users to:\n- Name recognized persons for personalized alerts like \"John is at the door\"\n- Mark persons as VIP for priority notifications\n- Block persons to suppress alerts (events still recorded)\n\nArgs:\n    person_id: UUID of the person\n    request: Update request with new values\n    db: Database session\n    person_service: Person matching service instance\n\nReturns:\n    PersonUpdateResponse with updated person info\n\nRaises:\n    HTTPException 404: If person not found",
        "operationId": "update_person_api_v1_context_persons__person_id__put",
        "parameters": [
          {
            "name": "person_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Person Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonUpdateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/vehicles": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "List Vehicles",
        "description": "List all known vehicles.\n\nStory P4-8.3: Vehicle Recognition\n\nReturns vehicles (RecognizedEntity with entity_type='vehicle') sorted by\nlast_seen_at descending. Includes embedding_count for each vehicle.\n\nArgs:\n    limit: Maximum number of vehicles to return (1-100)\n    offset: Pagination offset\n    named_only: If True, only return vehicles with names assigned\n    db: Database session\n    vehicle_service: Vehicle matching service instance\n\nReturns:\n    VehicleListResponse with list of vehicles and pagination info",
        "operationId": "list_vehicles_api_v1_context_vehicles_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of vehicles to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of vehicles to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "named_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Only return named vehicles",
              "default": false,
              "title": "Named Only"
            },
            "description": "Only return named vehicles"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/vehicles/{vehicle_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Vehicle",
        "description": "Get vehicle details.\n\nStory P4-8.3: Vehicle Recognition\n\nReturns detailed information about a specific vehicle including\nrecent detections linked to it.\n\nArgs:\n    vehicle_id: UUID of the vehicle\n    include_detections: Whether to include recent detections\n    detection_limit: Maximum number of detections to include\n    db: Database session\n    vehicle_service: Vehicle matching service instance\n\nReturns:\n    VehicleDetailResponse with vehicle details and detections\n\nRaises:\n    HTTPException 404: If vehicle not found",
        "operationId": "get_vehicle_api_v1_context_vehicles__vehicle_id__get",
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Vehicle Id"
            }
          },
          {
            "name": "include_detections",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include recent detections",
              "default": true,
              "title": "Include Detections"
            },
            "description": "Include recent detections"
          },
          {
            "name": "detection_limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Maximum detections to include",
              "default": 10,
              "title": "Detection Limit"
            },
            "description": "Maximum detections to include"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "context"
        ],
        "summary": "Update Vehicle",
        "description": "Update a vehicle's name, metadata, VIP status, or blocked status.\n\nStory P4-8.3: Vehicle Recognition\nStory P4-8.4: Named Entity Alerts (VIP and blocked)\n\nAllows users to:\n- Name recognized vehicles for personalized alerts like \"Your car arrived\"\n- Update vehicle metadata (color, type, etc.)\n- Mark vehicles as VIP for priority notifications\n- Block vehicles to suppress alerts (events still recorded)\n\nArgs:\n    vehicle_id: UUID of the vehicle\n    request: Update request with new values\n    db: Database session\n    vehicle_service: Vehicle matching service instance\n\nReturns:\n    VehicleUpdateResponse with updated vehicle info\n\nRaises:\n    HTTPException 404: If vehicle not found",
        "operationId": "update_vehicle_api_v1_context_vehicles__vehicle_id__put",
        "parameters": [
          {
            "name": "vehicle_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Vehicle Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VehicleUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleUpdateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/vehicle-embeddings/stats": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Vehicle Stats",
        "description": "Get vehicle embedding statistics.\n\nStory P4-8.3: Vehicle Recognition\n\nReturns statistics about vehicle embeddings including total count\nand current settings.\n\nArgs:\n    db: Database session\n    vehicle_service: Vehicle embedding service instance\n\nReturns:\n    VehicleStatsResponse with statistics",
        "operationId": "get_vehicle_stats_api_v1_context_vehicle_embeddings_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleStatsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/vehicle-embeddings/{event_id}": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Vehicle Embeddings",
        "description": "Get all vehicle embeddings for an event.\n\nStory P4-8.3: Vehicle Recognition\n\nReturns vehicle embeddings detected in the event thumbnail, including\nbounding box coordinates and confidence scores.\n\nArgs:\n    event_id: UUID of the event\n    db: Database session\n    vehicle_service: Vehicle embedding service instance\n\nReturns:\n    VehicleEmbeddingsResponse with list of vehicle embeddings\n\nRaises:\n    404: If event not found",
        "operationId": "get_vehicle_embeddings_api_v1_context_vehicle_embeddings__event_id__get",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VehicleEmbeddingsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Delete Event Vehicles",
        "description": "Delete all vehicle embeddings for an event.\n\nStory P4-8.3: Vehicle Recognition\n\nRemoves vehicle embedding data for a specific event. Event itself is not deleted.\n\nArgs:\n    event_id: UUID of the event\n    db: Database session\n    vehicle_service: Vehicle embedding service instance\n\nReturns:\n    DeleteVehiclesResponse with count of deleted embeddings\n\nRaises:\n    404: If event not found",
        "operationId": "delete_event_vehicles_api_v1_context_vehicle_embeddings__event_id__delete",
        "parameters": [
          {
            "name": "event_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Event Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteVehiclesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/vehicle-embeddings": {
      "delete": {
        "tags": [
          "context"
        ],
        "summary": "Delete All Vehicles",
        "description": "Delete all vehicle embeddings from the database.\n\nStory P4-8.3: Vehicle Recognition\n\nPrivacy control endpoint - allows users to clear all stored vehicle data.\nThis is an admin-level operation that removes ALL vehicle embeddings.\n\nArgs:\n    db: Database session\n    vehicle_service: Vehicle embedding service instance\n\nReturns:\n    DeleteVehiclesResponse with count of deleted embeddings",
        "operationId": "delete_all_vehicles_api_v1_context_vehicle_embeddings_delete",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteVehiclesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/adjustments": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Get Adjustments",
        "description": "Get paginated list of entity adjustments (Story P9-4.6).\n\nReturns manual entity corrections (unlink, assign, move, merge) for\nauditing and future ML training. Supports filtering by action type,\nentity, and date range.\n\nArgs:\n    page: Page number (1-indexed, default 1)\n    limit: Items per page (1-100, default 50)\n    action: Filter by action type (unlink, assign, move, merge)\n    entity_id: Filter by entity ID (matches old or new)\n    start_date: Filter from this date\n    end_date: Filter until this date\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    AdjustmentListResponse with paginated adjustments",
        "operationId": "get_adjustments_api_v1_context_adjustments_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-indexed)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-indexed)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 50,
              "title": "Limit"
            },
            "description": "Items per page"
          },
          {
            "name": "action",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by action type: unlink, assign, move, merge",
              "title": "Action"
            },
            "description": "Filter by action type: unlink, assign, move, merge"
          },
          {
            "name": "entity_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by entity ID (matches old or new entity)",
              "title": "Entity Id"
            },
            "description": "Filter by entity ID (matches old or new entity)"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter adjustments from this date (ISO format)",
              "title": "Start Date"
            },
            "description": "Filter adjustments from this date (ISO format)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter adjustments until this date (ISO format)",
              "title": "End Date"
            },
            "description": "Filter adjustments until this date (ISO format)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdjustmentListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/context/adjustments/export": {
      "get": {
        "tags": [
          "context"
        ],
        "summary": "Export Adjustments",
        "description": "Export adjustments for ML training (Story P9-4.6).\n\nReturns all adjustment records in JSON Lines format suitable for\nML training pipelines. Each line is a complete JSON object with\nevent descriptions, entity types, and correction details.\n\nArgs:\n    start_date: Filter from this date\n    end_date: Filter until this date\n    db: Database session\n    entity_service: Entity service instance\n\nReturns:\n    StreamingResponse with JSON Lines (application/x-ndjson)",
        "operationId": "export_adjustments_api_v1_context_adjustments_export_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter adjustments from this date (ISO format)",
              "title": "Start Date"
            },
            "description": "Filter adjustments from this date (ISO format)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter adjustments until this date (ISO format)",
              "title": "End Date"
            },
            "description": "Filter adjustments until this date (ISO format)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries/recent": {
      "get": {
        "tags": [
          "summaries"
        ],
        "summary": "Get Recent Summaries",
        "description": "Get recent summaries for dashboard display (Story P4-4.4).\n\nReturns today's and yesterday's activity summaries if they exist.\nIncludes event statistics (counts by type) for each summary.\n\nAC10: GET /api/v1/summaries/recent returns today's and yesterday's summaries\n\nReturns:\n    RecentSummariesResponse with list of recent summaries (may be empty)",
        "operationId": "get_recent_summaries_api_v1_summaries_recent_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecentSummariesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries/generate": {
      "post": {
        "tags": [
          "summaries"
        ],
        "summary": "Generate Summary",
        "description": "Generate an on-demand natural language summary for a time period (Story P4-4.5).\n\nAccepts EITHER:\n- hours_back: Shorthand for \"last N hours\" (e.g., hours_back=3 for last 3 hours)\n- OR start_time + end_time: Explicit time range in ISO 8601 format\n\nAC1: Accepts time range parameters\nAC2: Accepts hours_back shorthand\nAC3: Accepts start_datetime and end_datetime\nAC4: Returns summary with summary_text, event_count, time range\nAC5: Uses existing SummaryService.generate_summary()\nAC12: Saves to history with digest_type='on_demand'\n\nArgs:\n    request: Summary generation parameters (hours_back OR start_time+end_time)\n    db: Database session\n    summary_service: Summary service instance\n\nReturns:\n    SummaryResponse with generated summary (201 Created)\n\nRaises:\n    400: Invalid date range or parameter combination\n    500: Summary generation failed",
        "operationId": "generate_summary_api_v1_summaries_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SummaryGenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries/daily": {
      "get": {
        "tags": [
          "summaries"
        ],
        "summary": "Get Daily Summary",
        "description": "Get or generate a summary for a specific day.\n\nAC14: GET /api/v1/summaries/daily?date=YYYY-MM-DD returns summary for specific day\n\nThis endpoint returns a cached summary if one exists for the date,\notherwise generates a new one.\n\nArgs:\n    date: Date string in YYYY-MM-DD format\n    camera_ids: Optional comma-separated camera UUIDs\n    db: Database session\n    summary_service: Summary service instance\n\nReturns:\n    DailySummaryResponse with summary for the day\n\nRaises:\n    400: Invalid date format or future date (AC15)\n    500: Summary generation failed",
        "operationId": "get_daily_summary_api_v1_summaries_daily_get",
        "parameters": [
          {
            "name": "date",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Date to summarize (YYYY-MM-DD format)",
              "title": "Date"
            },
            "description": "Date to summarize (YYYY-MM-DD format)"
          },
          {
            "name": "camera_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated camera UUIDs",
              "title": "Camera Ids"
            },
            "description": "Comma-separated camera UUIDs"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DailySummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries": {
      "get": {
        "tags": [
          "summaries"
        ],
        "summary": "List Summaries",
        "description": "List generated summaries.\n\nReturns recent summaries ordered by generation time.\n\nArgs:\n    limit: Maximum number of summaries to return\n    offset: Pagination offset\n    db: Database session\n\nReturns:\n    SummaryListResponse with list of summaries",
        "operationId": "list_summaries_api_v1_summaries_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of summaries to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Number of summaries to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries/{summary_id}": {
      "get": {
        "tags": [
          "summaries"
        ],
        "summary": "Get Summary",
        "description": "Get a specific summary by ID.\n\nArgs:\n    summary_id: Summary UUID\n    db: Database session\n\nReturns:\n    SummaryResponse\n\nRaises:\n    404: Summary not found",
        "operationId": "get_summary_api_v1_summaries__summary_id__get",
        "parameters": [
          {
            "name": "summary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Summary Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/summaries/{summary_id}/feedback": {
      "post": {
        "tags": [
          "summaries"
        ],
        "summary": "Create Summary Feedback",
        "description": "Create feedback for a summary (Story P9-3.4).\n\nAllows users to rate summaries as positive/negative and optionally\nprovide correction text.\n\nAC-3.4.2: Given I click thumbs up, when submitted, then positive feedback stored\nAC-3.4.5: Given I submit thumbs down with text, when stored, then correction_text saved\nAC-3.4.6: Given I submit feedback, when complete, then brief toast \"Thanks for the feedback!\"\n\nArgs:\n    summary_id: Summary UUID\n    feedback_data: Rating and optional correction text\n    db: Database session\n\nReturns:\n    Created feedback with ID and timestamps\n\nRaises:\n    404: Summary not found\n    409: Feedback already exists for this summary\n    500: Database error",
        "operationId": "create_summary_feedback_api_v1_summaries__summary_id__feedback_post",
        "parameters": [
          {
            "name": "summary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Summary Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SummaryFeedbackCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryFeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "summaries"
        ],
        "summary": "Get Summary Feedback",
        "description": "Get feedback for a summary (Story P9-3.4).\n\nAC-3.4.3: Given I click thumbs up, when viewing, then button shows selected state\n\nArgs:\n    summary_id: Summary UUID\n    db: Database session\n\nReturns:\n    Feedback data if exists\n\nRaises:\n    404: Summary or feedback not found",
        "operationId": "get_summary_feedback_api_v1_summaries__summary_id__feedback_get",
        "parameters": [
          {
            "name": "summary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Summary Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryFeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "summaries"
        ],
        "summary": "Update Summary Feedback",
        "description": "Update existing feedback for a summary (Story P9-3.4).\n\nArgs:\n    summary_id: Summary UUID\n    feedback_data: Updated rating and/or correction text\n    db: Database session\n\nReturns:\n    Updated feedback\n\nRaises:\n    404: Summary or feedback not found\n    500: Database error",
        "operationId": "update_summary_feedback_api_v1_summaries__summary_id__feedback_put",
        "parameters": [
          {
            "name": "summary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Summary Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SummaryFeedbackUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SummaryFeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "summaries"
        ],
        "summary": "Delete Summary Feedback",
        "description": "Delete feedback for a summary (Story P9-3.4).\n\nArgs:\n    summary_id: Summary UUID\n    db: Database session\n\nRaises:\n    404: Summary or feedback not found\n    500: Database error",
        "operationId": "delete_summary_feedback_api_v1_summaries__summary_id__feedback_delete",
        "parameters": [
          {
            "name": "summary_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Summary Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digests/trigger": {
      "post": {
        "tags": [
          "digests"
        ],
        "summary": "Trigger Digest",
        "description": "Trigger immediate digest generation.\n\nAC10: POST /api/v1/digests/trigger forces immediate digest generation\n\nArgs:\n    request: Optional request with target date\n    db: Database session\n\nReturns:\n    DigestTriggerResponse with generated digest or skip status",
        "operationId": "trigger_digest_api_v1_digests_trigger_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "anyOf": [
                  {
                    "$ref": "#/components/schemas/DigestTriggerRequest"
                  },
                  {
                    "type": "null"
                  }
                ],
                "title": "Request"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigestTriggerResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digests/status": {
      "get": {
        "tags": [
          "digests"
        ],
        "summary": "Get Digest Status",
        "description": "Get digest scheduler status.\n\nAC11: GET /api/v1/digests/status returns last generation info and next scheduled time\n\nReturns:\n    DigestStatusResponse with scheduler status",
        "operationId": "get_digest_status_api_v1_digests_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigestStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digests": {
      "get": {
        "tags": [
          "digests"
        ],
        "summary": "List Digests",
        "description": "List generated digests.\n\nReturns recent digests ordered by generation time.\n\nArgs:\n    limit: Maximum number of digests to return\n    offset: Pagination offset\n    digest_type: Optional filter by type ('daily', 'weekly', 'manual')\n    db: Database session\n\nReturns:\n    DigestListResponse with list of digests",
        "operationId": "list_digests_api_v1_digests_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of digests to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Number of digests to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Pagination offset",
              "default": 0,
              "title": "Offset"
            },
            "description": "Pagination offset"
          },
          {
            "name": "digest_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by digest type",
              "title": "Digest Type"
            },
            "description": "Filter by digest type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigestListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digests/{digest_id}": {
      "get": {
        "tags": [
          "digests"
        ],
        "summary": "Get Digest",
        "description": "Get a specific digest by ID.\n\nArgs:\n    digest_id: Digest UUID\n    db: Database session\n\nReturns:\n    DigestResponse\n\nRaises:\n    404: Digest not found",
        "operationId": "get_digest_api_v1_digests__digest_id__get",
        "parameters": [
          {
            "name": "digest_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Digest Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DigestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/stats": {
      "get": {
        "tags": [
          "feedback"
        ],
        "summary": "Get Feedback Stats",
        "description": "Get aggregate feedback statistics for AI description accuracy monitoring.\n\nReturns overall accuracy metrics, per-camera breakdown, daily trends,\nand common correction patterns.\n\n**Query Parameters:**\n- `camera_id`: Optional filter to get stats for a specific camera\n- `start_date`: Optional filter for feedback on or after this date\n- `end_date`: Optional filter for feedback on or before this date\n\n**Response Fields:**\n- `total_count`: Total number of feedback submissions\n- `helpful_count`: Number of helpful ratings\n- `not_helpful_count`: Number of not helpful ratings\n- `accuracy_rate`: Percentage of helpful ratings (helpful / total * 100)\n- `feedback_by_camera`: Per-camera breakdown with accuracy rates\n- `daily_trend`: Daily feedback counts for the last 30 days (or specified range)\n- `top_corrections`: Most common correction patterns (top 10)\n\n**Performance:**\nOptimized for <200ms response time with 10,000+ feedback records.\n\n**Examples:**\n```\nGET /api/v1/feedback/stats\nGET /api/v1/feedback/stats?camera_id=abc123\nGET /api/v1/feedback/stats?start_date=2025-12-01&end_date=2025-12-31\n```",
        "operationId": "get_feedback_stats_api_v1_feedback_stats_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by camera UUID to get per-camera accuracy",
              "title": "Camera Id"
            },
            "description": "Filter by camera UUID to get per-camera accuracy"
          },
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter feedback created on or after this date (YYYY-MM-DD)",
              "title": "Start Date"
            },
            "description": "Filter feedback created on or after this date (YYYY-MM-DD)"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter feedback created on or before this date (YYYY-MM-DD)",
              "title": "End Date"
            },
            "description": "Filter feedback created on or before this date (YYYY-MM-DD)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/prompt-insights": {
      "get": {
        "tags": [
          "feedback"
        ],
        "summary": "Get Prompt Insights",
        "description": "Get AI prompt improvement suggestions based on user feedback analysis.\n\nAnalyzes feedback corrections to identify patterns and generate\nactionable suggestions for improving AI description prompts.\n\n**Minimum Samples:**\nRequires at least 10 feedback corrections before generating suggestions.\n\n**Response Fields:**\n- `suggestions`: Global prompt improvement suggestions\n- `camera_insights`: Per-camera analysis with specific suggestions for low-accuracy cameras\n- `sample_count`: Total feedback corrections analyzed\n- `confidence`: Overall confidence in the analysis (0.0 to 1.0)\n- `min_samples_met`: Whether the 10-sample threshold was met\n\n**Examples:**\n```\nGET /api/v1/feedback/prompt-insights\nGET /api/v1/feedback/prompt-insights?camera_id=abc123\n```",
        "operationId": "get_prompt_insights_api_v1_feedback_prompt_insights_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter insights for a specific camera",
              "title": "Camera Id"
            },
            "description": "Filter insights for a specific camera"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptInsightsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/prompt-insights/apply": {
      "post": {
        "tags": [
          "feedback"
        ],
        "summary": "Apply Prompt Suggestion",
        "description": "Apply a prompt improvement suggestion to the AI description prompt.\n\nUpdates the system's description prompt with the suggestion text\nand creates a prompt history record for tracking.\n\n**Request Body:**\n- `suggestion_id`: ID of the suggestion to apply\n- `camera_id`: Optional camera ID for camera-specific prompt\n\n**Response:**\n- `success`: Whether the suggestion was applied\n- `new_prompt`: The updated prompt text\n- `prompt_version`: Version number of the new prompt\n- `message`: Status message",
        "operationId": "apply_prompt_suggestion_api_v1_feedback_prompt_insights_apply_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplySuggestionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApplySuggestionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/ab-test/results": {
      "get": {
        "tags": [
          "feedback"
        ],
        "summary": "Get Ab Test Results",
        "description": "Get A/B test results comparing control vs experiment prompts.\n\nAnalyzes feedback on events tagged with prompt_variant to determine\nwhich prompt performs better.\n\n**Query Parameters:**\n- `start_date`: Optional start date filter\n- `end_date`: Optional end date filter\n\n**Response:**\n- `control`: Accuracy statistics for control group\n- `experiment`: Accuracy statistics for experiment group\n- `winner`: Which variant is winning ('control', 'experiment', or None)\n- `confidence`: Statistical confidence in the result\n- `is_significant`: Whether the difference is statistically significant\n- `message`: Summary message",
        "operationId": "get_ab_test_results_api_v1_feedback_ab_test_results_get",
        "parameters": [
          {
            "name": "start_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter events from this date",
              "title": "Start Date"
            },
            "description": "Filter events from this date"
          },
          {
            "name": "end_date",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter events until this date",
              "title": "End Date"
            },
            "description": "Filter events until this date"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ABTestResultsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/prompt-history": {
      "get": {
        "tags": [
          "feedback"
        ],
        "summary": "Get Prompt History",
        "description": "Get prompt evolution history.\n\nReturns the history of prompt changes, including which suggestions\nwere applied and accuracy metrics before/after.\n\n**Query Parameters:**\n- `camera_id`: Optional filter for camera-specific prompts\n- `limit`: Maximum entries to return (default 20)\n\n**Response:**\n- `entries`: List of prompt history entries (newest first)\n- `current_version`: Current active prompt version\n- `total_count`: Total number of prompt versions",
        "operationId": "get_prompt_history_api_v1_feedback_prompt_history_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter history for a specific camera",
              "title": "Camera Id"
            },
            "description": "Filter history for a specific camera"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of entries to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of entries to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptHistoryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/voice/query": {
      "post": {
        "tags": [
          "voice"
        ],
        "summary": "Process natural language query",
        "description": "Process a natural language query about security events and return\n    a TTS-friendly spoken response.\n\n    **Example queries:**\n    - \"What's happening at the front door?\"\n    - \"Any activity this morning?\"\n    - \"Was there anyone at the back yard in the last hour?\"\n    - \"What did the cameras see today?\"\n\n    **Time expressions supported:**\n    - today, yesterday\n    - this morning, this afternoon, this evening, tonight\n    - last hour, last 2 hours, last 30 minutes\n    - recently, just now\n\n    **Camera matching:**\n    - Cameras are matched by name (case-insensitive)\n    - Synonyms supported: \"front door\" matches \"Front Door Camera\"\n    - Use \"all cameras\" for no filter",
        "operationId": "voice_query_api_v1_voice_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VoiceQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoiceQueryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoiceQueryError"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VoiceQueryError"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/voice/help": {
      "get": {
        "tags": [
          "voice"
        ],
        "summary": "Get voice query help",
        "description": "Returns help information about supported queries.",
        "operationId": "voice_query_help_api_v1_voice_help_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Voice Query Help Api V1 Voice Help Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/status": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Homekit Status",
        "description": "Get HomeKit bridge status.\n\nReturns current status including:\n- Whether HomeKit is enabled and running\n- Pairing status\n- Number of accessories\n- Setup code and URI (hidden if already paired) - Story P5-1.2",
        "operationId": "get_homekit_status_api_v1_homekit_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/enable": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Enable Homekit",
        "description": "Enable the HomeKit bridge.\n\nCreates or updates the HomeKit configuration and starts the bridge.\nReturns the setup code and QR code for pairing with Apple Home.",
        "operationId": "enable_homekit_api_v1_homekit_enable_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HomeKitEnableRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitEnableResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/disable": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Disable Homekit",
        "description": "Disable the HomeKit bridge.\n\nStops the bridge and marks it as disabled in the database.\nExisting pairings are preserved for when HomeKit is re-enabled.",
        "operationId": "disable_homekit_api_v1_homekit_disable_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitDisableResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/qrcode": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Qrcode",
        "description": "Get the pairing QR code as a PNG image.\n\nReturns a PNG image that can be scanned in the Apple Home app\nto pair with the HomeKit bridge.",
        "operationId": "get_qrcode_api_v1_homekit_qrcode_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/reset": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Reset Pairing",
        "description": "Reset HomeKit pairing state.\n\nThis removes all paired devices and generates a new PIN code.\nThe bridge will need to be re-paired with Apple Home after reset.",
        "operationId": "reset_pairing_api_v1_homekit_reset_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/config": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Homekit Config",
        "description": "Get HomeKit configuration (without sensitive data).\n\nReturns the current configuration settings for the HomeKit bridge.\nPIN code is not included in the response.",
        "operationId": "get_homekit_config_api_v1_homekit_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitConfigResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/pairings": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Pairings",
        "description": "Get list of paired HomeKit devices (Story P5-1.8 AC3).\n\nReturns a list of all iOS devices currently paired with the HomeKit bridge.\nEach pairing includes:\n- pairing_id: Unique client identifier (UUID)\n- is_admin: Whether client has admin permissions\n- permissions: HAP permission level (0=regular, 1=admin)",
        "operationId": "get_pairings_api_v1_homekit_pairings_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PairingsListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/pairings/{pairing_id}": {
      "delete": {
        "tags": [
          "homekit"
        ],
        "summary": "Remove Pairing",
        "description": "Remove a specific HomeKit pairing (Story P5-1.8 AC4).\n\nRemoves the pairing for the specified device. After removal,\nthe device will no longer be able to control HomeKit accessories\nand will need to re-pair to regain access.\n\nArgs:\n    pairing_id: The UUID of the pairing to remove\n\nReturns:\n    Success status and confirmation message",
        "operationId": "remove_pairing_api_v1_homekit_pairings__pairing_id__delete",
        "parameters": [
          {
            "name": "pairing_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Pairing Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RemovePairingResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/diagnostics": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Diagnostics",
        "description": "Get HomeKit diagnostic information for troubleshooting (Story P7-1.1 AC5).\n\nReturns diagnostic data including:\n- Bridge running status and mDNS advertising state\n- Network binding information (IP, port)\n- Connected client count\n- Recent diagnostic log entries (newest first)\n- Current warnings and errors\n\nThe response is optimized for troubleshooting HomeKit discovery\nand event delivery issues.",
        "operationId": "get_diagnostics_api_v1_homekit_diagnostics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitDiagnosticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/test-connectivity": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Test Connectivity",
        "description": "Test HomeKit bridge connectivity for troubleshooting (Story P7-1.2 AC1, AC2, AC6).\n\nPerforms the following tests:\n- mDNS visibility: Checks if the _hap._tcp service is discoverable via Bonjour/mDNS\n- Port accessibility: Tests if the HAP port (default 51826) is reachable\n\nReturns diagnostic information including:\n- mdns_visible: Whether the service was discovered\n- discovered_as: The service name as discovered (e.g., 'ArgusAI._hap._tcp.local')\n- port_accessible: Whether TCP connection to HAP port succeeded\n- firewall_issues: List of detected network/firewall problems\n- recommendations: Troubleshooting suggestions\n\nNote: This test takes approximately 3-5 seconds due to mDNS discovery timeout.",
        "operationId": "test_connectivity_api_v1_homekit_test_connectivity_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitConnectivityTestResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/cameras/{camera_id}/snapshot": {
      "get": {
        "tags": [
          "homekit"
        ],
        "summary": "Get Camera Snapshot",
        "description": "Get camera snapshot for HomeKit testing (Story P7-3.2 AC1, AC2, AC4).\n\nReturns a JPEG snapshot from the specified camera's HomeKit accessory.\nUses the same snapshot method that HomeKit clients use, including caching.\n\nArgs:\n    camera_id: Camera ID (UUID format)\n\nReturns:\n    JPEG image data with Content-Type: image/jpeg\n\nRaises:\n    404: Camera not found in HomeKit bridge\n    503: Camera offline (returns JSON with placeholder_available flag)\n    500: Internal error",
        "operationId": "get_camera_snapshot_api_v1_homekit_cameras__camera_id__snapshot_get",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/cameras/{camera_id}/test-stream": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Test Camera Stream",
        "description": "Test camera streaming capability for HomeKit (Story P7-3.3 AC3).\n\nValidates RTSP accessibility and ffmpeg compatibility without actually\nstarting a stream. Returns diagnostic information including a sanitized\nffmpeg command (SRTP keys removed) for debugging.\n\nArgs:\n    camera_id: Camera ID (UUID format)\n\nReturns:\n    StreamTestResponse with test results:\n    - success: Overall test pass/fail\n    - rtsp_accessible: Whether RTSP stream is reachable\n    - ffmpeg_compatible: Whether ffmpeg can process the stream\n    - source_resolution/fps/codec: Detected stream properties\n    - target_resolution/fps/bitrate: Configured HomeKit output settings\n    - estimated_latency_ms: Expected stream latency\n    - ffmpeg_command: Sanitized command for debugging (no SRTP keys)\n    - error: Error message if test failed\n\nRaises:\n    404: Camera not found in HomeKit bridge\n    503: HomeKit bridge is not running\n    500: Internal error",
        "operationId": "test_camera_stream_api_v1_homekit_cameras__camera_id__test_stream_post",
        "parameters": [
          {
            "name": "camera_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Camera Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StreamTestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/homekit/test-event": {
      "post": {
        "tags": [
          "homekit"
        ],
        "summary": "Trigger Test Event",
        "description": "Trigger a test HomeKit event for debugging (Story P7-1.3 AC5).\n\nManually triggers a motion/occupancy/vehicle/animal/package/doorbell event\nfor the specified camera. Used to verify HomeKit event delivery is working\ncorrectly without waiting for actual camera events.\n\nArgs:\n    request: HomeKitTestEventRequest with camera_id and event_type\n\nReturns:\n    HomeKitTestEventResponse with trigger result and delivery info\n\nRaises:\n    400: HomeKit bridge is not running or sensor not found\n    404: Camera not found\n    422: Invalid request (empty camera_id or invalid event_type)",
        "operationId": "trigger_test_event_api_v1_homekit_test_event_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HomeKitTestEventRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HomeKitTestEventResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audio/thresholds": {
      "get": {
        "tags": [
          "audio"
        ],
        "summary": "Get audio detection thresholds",
        "description": "Retrieve current confidence thresholds for all audio event types.\n\n    Thresholds determine the minimum confidence score required for an\n    audio detection to be recorded as an event. Lower thresholds mean\n    more detections (but potentially more false positives).\n\n    Default threshold: 70% (0.70) for all event types.",
        "operationId": "get_audio_thresholds_api_v1_audio_thresholds_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AudioThresholdsResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "audio"
        ],
        "summary": "Update audio detection threshold",
        "description": "Update the confidence threshold for a specific audio event type.\n\n    The threshold determines the minimum confidence score required for\n    audio detections of that type to be recorded as events.\n\n    Valid event types: glass_break, gunshot, scream, doorbell, other\n    Valid threshold range: 0.0 to 1.0 (0% to 100%)",
        "operationId": "update_audio_threshold_api_v1_audio_thresholds_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ThresholdUpdateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ThresholdUpdateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audio/supported-types": {
      "get": {
        "tags": [
          "audio"
        ],
        "summary": "Get supported audio event types",
        "description": "List all supported audio event types and their descriptions.",
        "operationId": "get_supported_audio_types_api_v1_audio_supported_types_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Get Supported Audio Types Api V1 Audio Supported Types Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/thumbnails/{date}/{filename}": {
      "get": {
        "summary": "Get Thumbnail",
        "description": "Serve thumbnail images with CORS headers",
        "operationId": "get_thumbnail_api_v1_thumbnails__date___filename__get",
        "parameters": [
          {
            "name": "date",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Date"
            }
          },
          {
            "name": "filename",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Filename"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint - API status check",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint (no authentication required)",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "summary": "Prometheus Metrics",
        "description": "Prometheus metrics endpoint (Story 6.2, AC: #6)\n\nReturns Prometheus-compatible metrics for scraping.",
        "operationId": "prometheus_metrics_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ABTestAccuracyStats": {
        "properties": {
          "variant": {
            "type": "string",
            "title": "Variant",
            "description": "Variant name: 'control' or 'experiment'"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events in this variant"
          },
          "helpful_count": {
            "type": "integer",
            "title": "Helpful Count",
            "description": "Number of helpful ratings"
          },
          "not_helpful_count": {
            "type": "integer",
            "title": "Not Helpful Count",
            "description": "Number of not helpful ratings"
          },
          "accuracy_rate": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Accuracy Rate",
            "description": "Accuracy rate as percentage"
          }
        },
        "type": "object",
        "required": [
          "variant",
          "event_count",
          "helpful_count",
          "not_helpful_count",
          "accuracy_rate"
        ],
        "title": "ABTestAccuracyStats",
        "description": "Accuracy statistics for an A/B test variant."
      },
      "ABTestResultsResponse": {
        "properties": {
          "control": {
            "$ref": "#/components/schemas/ABTestAccuracyStats",
            "description": "Control group statistics"
          },
          "experiment": {
            "$ref": "#/components/schemas/ABTestAccuracyStats",
            "description": "Experiment group statistics"
          },
          "winner": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Winner",
            "description": "Winner variant ('control', 'experiment', or None if inconclusive)"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Statistical confidence in the winner determination"
          },
          "is_significant": {
            "type": "boolean",
            "title": "Is Significant",
            "description": "Whether the difference is statistically significant"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Summary message about A/B test results"
          }
        },
        "type": "object",
        "required": [
          "control",
          "experiment",
          "confidence",
          "is_significant",
          "message"
        ],
        "title": "ABTestResultsResponse",
        "description": "Response for GET /api/v1/feedback/ab-test/results."
      },
      "AICapabilitiesResponse": {
        "properties": {
          "providers": {
            "additionalProperties": {
              "$ref": "#/components/schemas/ProviderCapability"
            },
            "type": "object",
            "title": "Providers",
            "description": "Capability information for each AI provider"
          }
        },
        "type": "object",
        "required": [
          "providers"
        ],
        "title": "AICapabilitiesResponse",
        "description": "Response schema for GET /api/v1/ai/capabilities (Story P3-4.1)",
        "example": {
          "providers": {
            "claude": {
              "configured": false,
              "max_images": 20,
              "max_video_duration": 0,
              "max_video_size_mb": 0,
              "supported_formats": [],
              "video": false
            },
            "gemini": {
              "configured": false,
              "max_images": 16,
              "max_video_duration": 60,
              "max_video_size_mb": 20,
              "supported_formats": [
                "mp4",
                "mov",
                "webm"
              ],
              "video": true
            },
            "grok": {
              "configured": true,
              "max_images": 10,
              "max_video_duration": 0,
              "max_video_size_mb": 0,
              "supported_formats": [],
              "video": false
            },
            "openai": {
              "configured": true,
              "max_images": 10,
              "max_video_duration": 60,
              "max_video_size_mb": 20,
              "supported_formats": [
                "mp4",
                "mov",
                "webm"
              ],
              "video": true
            }
          }
        }
      },
      "AIProviderStatsResponse": {
        "properties": {
          "total_events": {
            "type": "integer",
            "title": "Total Events",
            "description": "Total events with provider_used set"
          },
          "events_per_provider": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Events Per Provider",
            "description": "Event count by provider"
          },
          "date_range": {
            "type": "string",
            "enum": [
              "24h",
              "7d",
              "30d",
              "all"
            ],
            "title": "Date Range",
            "description": "Date range filter applied"
          },
          "time_range": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "object",
            "title": "Time Range",
            "description": "Actual time range (start, end)"
          }
        },
        "type": "object",
        "required": [
          "total_events",
          "events_per_provider",
          "date_range",
          "time_range"
        ],
        "title": "AIProviderStatsResponse",
        "description": "Response for AI provider usage statistics"
      },
      "AIProviderStatus": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "Provider identifier"
          },
          "configured": {
            "type": "boolean",
            "title": "Configured",
            "description": "Whether API key is configured"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "configured"
        ],
        "title": "AIProviderStatus",
        "description": "Status of AI provider configuration"
      },
      "AIProvidersStatusResponse": {
        "properties": {
          "providers": {
            "items": {
              "$ref": "#/components/schemas/AIProviderStatus"
            },
            "type": "array",
            "title": "Providers",
            "description": "List of provider statuses"
          },
          "order": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Order",
            "description": "Provider order for fallback chain"
          }
        },
        "type": "object",
        "required": [
          "providers",
          "order"
        ],
        "title": "AIProvidersStatusResponse",
        "description": "Response listing all AI providers and their configuration status"
      },
      "AIUsageByCamera": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera identifier"
          },
          "camera_name": {
            "type": "string",
            "title": "Camera Name",
            "description": "Camera display name"
          },
          "cost": {
            "type": "number",
            "title": "Cost",
            "description": "Total cost for the camera in USD"
          },
          "requests": {
            "type": "integer",
            "title": "Requests",
            "description": "Number of AI requests"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "camera_name",
          "cost",
          "requests"
        ],
        "title": "AIUsageByCamera",
        "description": "Per-camera usage aggregation."
      },
      "AIUsageByDate": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date in YYYY-MM-DD format"
          },
          "cost": {
            "type": "number",
            "title": "Cost",
            "description": "Total cost for the date in USD"
          },
          "requests": {
            "type": "integer",
            "title": "Requests",
            "description": "Number of AI requests"
          }
        },
        "type": "object",
        "required": [
          "date",
          "cost",
          "requests"
        ],
        "title": "AIUsageByDate",
        "description": "Daily usage aggregation."
      },
      "AIUsageByMode": {
        "properties": {
          "mode": {
            "type": "string",
            "title": "Mode",
            "description": "Analysis mode (single_image, multi_frame, video_native)"
          },
          "cost": {
            "type": "number",
            "title": "Cost",
            "description": "Total cost for the mode in USD"
          },
          "requests": {
            "type": "integer",
            "title": "Requests",
            "description": "Number of AI requests"
          }
        },
        "type": "object",
        "required": [
          "mode",
          "cost",
          "requests"
        ],
        "title": "AIUsageByMode",
        "description": "Per-analysis-mode usage aggregation."
      },
      "AIUsageByProvider": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "AI provider name (openai, grok, claude, gemini)"
          },
          "cost": {
            "type": "number",
            "title": "Cost",
            "description": "Total cost for the provider in USD"
          },
          "requests": {
            "type": "integer",
            "title": "Requests",
            "description": "Number of AI requests"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "cost",
          "requests"
        ],
        "title": "AIUsageByProvider",
        "description": "Per-provider usage aggregation."
      },
      "AIUsagePeriod": {
        "properties": {
          "start": {
            "type": "string",
            "title": "Start",
            "description": "Start date in ISO 8601 format"
          },
          "end": {
            "type": "string",
            "title": "End",
            "description": "End date in ISO 8601 format"
          }
        },
        "type": "object",
        "required": [
          "start",
          "end"
        ],
        "title": "AIUsagePeriod",
        "description": "Period for usage aggregation."
      },
      "AIUsageResponse": {
        "properties": {
          "total_cost": {
            "type": "number",
            "title": "Total Cost",
            "description": "Total cost in USD"
          },
          "total_requests": {
            "type": "integer",
            "title": "Total Requests",
            "description": "Total number of AI requests"
          },
          "period": {
            "$ref": "#/components/schemas/AIUsagePeriod",
            "description": "Date range for aggregation"
          },
          "by_date": {
            "items": {
              "$ref": "#/components/schemas/AIUsageByDate"
            },
            "type": "array",
            "title": "By Date",
            "description": "Usage by date"
          },
          "by_camera": {
            "items": {
              "$ref": "#/components/schemas/AIUsageByCamera"
            },
            "type": "array",
            "title": "By Camera",
            "description": "Usage by camera"
          },
          "by_provider": {
            "items": {
              "$ref": "#/components/schemas/AIUsageByProvider"
            },
            "type": "array",
            "title": "By Provider",
            "description": "Usage by provider"
          },
          "by_mode": {
            "items": {
              "$ref": "#/components/schemas/AIUsageByMode"
            },
            "type": "array",
            "title": "By Mode",
            "description": "Usage by analysis mode"
          }
        },
        "type": "object",
        "required": [
          "total_cost",
          "total_requests",
          "period"
        ],
        "title": "AIUsageResponse",
        "description": "Response schema for AI usage aggregation endpoint.\n\nProvides comprehensive cost and usage breakdown by various dimensions.\nStory P3-7.1: Implement Cost Tracking Service.\n\nAttributes:\n    total_cost: Total cost across all requests in USD\n    total_requests: Total number of AI requests\n    period: Date range for the aggregation\n    by_date: Daily usage breakdown\n    by_camera: Per-camera usage breakdown\n    by_provider: Per-provider usage breakdown\n    by_mode: Per-analysis-mode usage breakdown",
        "example": {
          "by_camera": [
            {
              "camera_id": "1",
              "camera_name": "Front Door",
              "cost": 0.0234,
              "requests": 67
            }
          ],
          "by_date": [
            {
              "cost": 0.0123,
              "date": "2025-12-09",
              "requests": 45
            },
            {
              "cost": 0.0098,
              "date": "2025-12-08",
              "requests": 32
            }
          ],
          "by_mode": [
            {
              "cost": 0.0234,
              "mode": "single_image",
              "requests": 89
            },
            {
              "cost": 0.0289,
              "mode": "multi_frame",
              "requests": 53
            }
          ],
          "by_provider": [
            {
              "cost": 0.0456,
              "provider": "openai",
              "requests": 120
            },
            {
              "cost": 0.0067,
              "provider": "claude",
              "requests": 22
            }
          ],
          "period": {
            "end": "2025-12-09T23:59:59Z",
            "start": "2025-11-09T00:00:00Z"
          },
          "total_cost": 0.0523,
          "total_requests": 142
        }
      },
      "AIUsageStatsResponse": {
        "properties": {
          "total_calls": {
            "type": "integer",
            "title": "Total Calls",
            "description": "Total AI API calls in period"
          },
          "successful_calls": {
            "type": "integer",
            "title": "Successful Calls",
            "description": "Successful API calls"
          },
          "failed_calls": {
            "type": "integer",
            "title": "Failed Calls",
            "description": "Failed API calls"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens",
            "description": "Total tokens consumed"
          },
          "total_cost": {
            "type": "number",
            "title": "Total Cost",
            "description": "Total cost in USD"
          },
          "avg_response_time_ms": {
            "type": "number",
            "title": "Avg Response Time Ms",
            "description": "Average response time in milliseconds"
          },
          "provider_breakdown": {
            "additionalProperties": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "object",
            "title": "Provider Breakdown",
            "description": "Per-provider statistics"
          }
        },
        "type": "object",
        "required": [
          "total_calls",
          "successful_calls",
          "failed_calls",
          "total_tokens",
          "total_cost",
          "avg_response_time_ms",
          "provider_breakdown"
        ],
        "title": "AIUsageStatsResponse",
        "description": "Response schema for GET /api/v1/ai/usage",
        "example": {
          "avg_response_time_ms": 1250.5,
          "failed_calls": 2,
          "provider_breakdown": {
            "claude": {
              "calls": 8,
              "cost": 0.04,
              "success_rate": 100.0,
              "tokens": 2400
            },
            "gemini": {
              "calls": 2,
              "cost": 0.01,
              "success_rate": 50.0,
              "tokens": 600
            },
            "openai": {
              "calls": 140,
              "cost": 0.63,
              "success_rate": 99.3,
              "tokens": 42000
            }
          },
          "successful_calls": 148,
          "total_calls": 150,
          "total_cost": 0.68,
          "total_tokens": 45000
        }
      },
      "AdjustmentListResponse": {
        "properties": {
          "adjustments": {
            "items": {
              "$ref": "#/components/schemas/AdjustmentResponse"
            },
            "type": "array",
            "title": "Adjustments",
            "description": "List of adjustment records"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of adjustments matching filters"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Number of items per page"
          }
        },
        "type": "object",
        "required": [
          "adjustments",
          "total",
          "page",
          "limit"
        ],
        "title": "AdjustmentListResponse",
        "description": "Response model for paginated list of entity adjustments (Story P9-4.6)."
      },
      "AdjustmentResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "UUID of the adjustment record"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the event that was adjusted"
          },
          "old_entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Old Entity Id",
            "description": "UUID of the entity before adjustment (null for new assignments)"
          },
          "new_entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Entity Id",
            "description": "UUID of the entity after adjustment (null for unlinks)"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Type of adjustment: unlink, assign, move_from, move_to, merge"
          },
          "event_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Description",
            "description": "Snapshot of event description at time of adjustment"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When the adjustment was made"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "action",
          "created_at"
        ],
        "title": "AdjustmentResponse",
        "description": "Response model for a single entity adjustment record."
      },
      "AlertRuleActions": {
        "properties": {
          "dashboard_notification": {
            "type": "boolean",
            "title": "Dashboard Notification",
            "description": "Create in-app notification visible on dashboard",
            "default": true
          },
          "webhook": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WebhookConfig"
              },
              {
                "type": "null"
              }
            ],
            "description": "Webhook to call (HTTP POST with event data)"
          }
        },
        "type": "object",
        "title": "AlertRuleActions",
        "description": "Actions to execute when rule triggers",
        "examples": [
          {
            "dashboard_notification": true,
            "webhook": {
              "headers": {
                "X-API-Key": "secret"
              },
              "url": "https://hooks.example.com/alert"
            }
          }
        ]
      },
      "AlertRuleConditions": {
        "properties": {
          "rule_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Type",
            "description": "Rule type: 'any' (default, matches any detection) or 'package_delivery' (requires package + carrier)",
            "default": "any"
          },
          "carriers": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Carriers",
            "description": "Carrier filter for package_delivery rules. Valid values: fedex, ups, usps, amazon, dhl. Empty/null = any carrier."
          },
          "object_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Object Types",
            "description": "Object types to match (OR logic within list). Empty/null = any object."
          },
          "cameras": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cameras",
            "description": "Camera UUIDs to match. Empty/null = any camera."
          },
          "time_of_day": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/TimeOfDay"
              },
              {
                "type": "null"
              }
            ],
            "description": "Time range when rule is active (HH:MM format)"
          },
          "days_of_week": {
            "anyOf": [
              {
                "items": {
                  "type": "integer"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Days Of Week",
            "description": "Days when rule is active (1=Monday, 7=Sunday). Empty/null = any day."
          },
          "min_confidence": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Confidence",
            "description": "Minimum confidence threshold (0-100). Null = no threshold."
          }
        },
        "type": "object",
        "title": "AlertRuleConditions",
        "description": "Conditions that must match for the rule to trigger (AND logic between conditions)",
        "examples": [
          {
            "cameras": [],
            "days_of_week": [
              1,
              2,
              3,
              4,
              5
            ],
            "min_confidence": 80,
            "object_types": [
              "person",
              "package"
            ],
            "rule_type": "any",
            "time_of_day": {
              "end": "17:00",
              "start": "09:00"
            }
          },
          {
            "cameras": [],
            "carriers": [
              "fedex",
              "ups",
              "amazon"
            ],
            "min_confidence": 70,
            "rule_type": "package_delivery",
            "time_of_day": {
              "end": "20:00",
              "start": "08:00"
            }
          }
        ]
      },
      "AlertRuleCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name",
            "description": "Human-readable rule name"
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether rule is active",
            "default": true
          },
          "conditions": {
            "$ref": "#/components/schemas/AlertRuleConditions",
            "description": "Conditions that must match for rule to trigger"
          },
          "actions": {
            "$ref": "#/components/schemas/AlertRuleActions"
          },
          "cooldown_minutes": {
            "type": "integer",
            "maximum": 1440.0,
            "minimum": 0.0,
            "title": "Cooldown Minutes",
            "description": "Minimum minutes between triggers (0-1440, max 24 hours)",
            "default": 5
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "AlertRuleCreate",
        "description": "Schema for creating a new alert rule via POST /api/v1/alert-rules",
        "examples": [
          {
            "actions": {
              "dashboard_notification": true,
              "webhook": {
                "headers": {
                  "Authorization": "Bearer token"
                },
                "url": "https://hooks.example.com/delivery"
              }
            },
            "conditions": {
              "cameras": [],
              "days_of_week": [
                1,
                2,
                3,
                4,
                5
              ],
              "min_confidence": 75,
              "object_types": [
                "person",
                "package"
              ],
              "time_of_day": {
                "end": "18:00",
                "start": "08:00"
              }
            },
            "cooldown_minutes": 10,
            "is_enabled": true,
            "name": "Package Delivery Alert"
          }
        ]
      },
      "AlertRuleListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/AlertRuleResponse"
            },
            "type": "array",
            "title": "Data",
            "description": "List of alert rules"
          },
          "total_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Count",
            "description": "Total number of rules"
          }
        },
        "type": "object",
        "required": [
          "data",
          "total_count"
        ],
        "title": "AlertRuleListResponse",
        "description": "Schema for paginated alert rule list responses",
        "examples": [
          {
            "data": [
              {
                "actions": {
                  "dashboard_notification": true
                },
                "conditions": {
                  "object_types": [
                    "person",
                    "package"
                  ]
                },
                "cooldown_minutes": 10,
                "created_at": "2025-11-01T10:00:00Z",
                "id": "123e4567-e89b-12d3-a456-426614174000",
                "is_enabled": true,
                "name": "Package Delivery Alert",
                "trigger_count": 0,
                "updated_at": "2025-11-01T10:00:00Z"
              }
            ],
            "total_count": 1
          }
        ]
      },
      "AlertRuleResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Alert rule UUID"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Rule name"
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether rule is active"
          },
          "conditions": {
            "$ref": "#/components/schemas/AlertRuleConditions",
            "description": "Rule conditions"
          },
          "actions": {
            "$ref": "#/components/schemas/AlertRuleActions",
            "description": "Rule actions"
          },
          "cooldown_minutes": {
            "type": "integer",
            "title": "Cooldown Minutes",
            "description": "Cooldown period in minutes"
          },
          "last_triggered_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Triggered At",
            "description": "When rule last triggered"
          },
          "trigger_count": {
            "type": "integer",
            "title": "Trigger Count",
            "description": "Total trigger count"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "is_enabled",
          "conditions",
          "actions",
          "cooldown_minutes",
          "trigger_count",
          "created_at",
          "updated_at"
        ],
        "title": "AlertRuleResponse",
        "description": "Schema for alert rule API responses",
        "examples": [
          {
            "actions": {
              "dashboard_notification": true,
              "webhook": {
                "headers": {},
                "url": "https://hooks.example.com/delivery"
              }
            },
            "conditions": {
              "cameras": [],
              "days_of_week": [
                1,
                2,
                3,
                4,
                5
              ],
              "min_confidence": 75,
              "object_types": [
                "person",
                "package"
              ],
              "time_of_day": {
                "end": "18:00",
                "start": "08:00"
              }
            },
            "cooldown_minutes": 10,
            "created_at": "2025-11-01T10:00:00Z",
            "id": "123e4567-e89b-12d3-a456-426614174000",
            "is_enabled": true,
            "last_triggered_at": "2025-11-17T14:30:00Z",
            "name": "Package Delivery Alert",
            "trigger_count": 42,
            "updated_at": "2025-11-15T16:30:00Z"
          }
        ]
      },
      "AlertRuleTestRequest": {
        "properties": {
          "limit": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Limit",
            "description": "Maximum events to test against (1-100)",
            "default": 50
          }
        },
        "type": "object",
        "title": "AlertRuleTestRequest",
        "description": "Schema for testing an alert rule against historical events",
        "examples": [
          {
            "limit": 50
          }
        ]
      },
      "AlertRuleTestResponse": {
        "properties": {
          "rule_id": {
            "type": "string",
            "title": "Rule Id",
            "description": "Alert rule UUID that was tested"
          },
          "events_tested": {
            "type": "integer",
            "title": "Events Tested",
            "description": "Number of events tested"
          },
          "events_matched": {
            "type": "integer",
            "title": "Events Matched",
            "description": "Number of events that would trigger this rule"
          },
          "matching_event_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Matching Event Ids",
            "description": "IDs of events that would match"
          }
        },
        "type": "object",
        "required": [
          "rule_id",
          "events_tested",
          "events_matched",
          "matching_event_ids"
        ],
        "title": "AlertRuleTestResponse",
        "description": "Schema for alert rule test results",
        "examples": [
          {
            "events_matched": 12,
            "events_tested": 50,
            "matching_event_ids": [
              "abc123",
              "def456",
              "ghi789"
            ],
            "rule_id": "123e4567-e89b-12d3-a456-426614174000"
          }
        ]
      },
      "AlertRuleUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Human-readable rule name"
          },
          "is_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Enabled",
            "description": "Whether rule is active"
          },
          "conditions": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AlertRuleConditions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Conditions that must match"
          },
          "actions": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AlertRuleActions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Actions to execute"
          },
          "cooldown_minutes": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 1440.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cooldown Minutes",
            "description": "Minimum minutes between triggers (0-1440)"
          }
        },
        "type": "object",
        "title": "AlertRuleUpdate",
        "description": "Schema for updating an alert rule via PUT /api/v1/alert-rules/{id}",
        "examples": [
          {
            "cooldown_minutes": 30,
            "is_enabled": false,
            "name": "Updated Rule Name"
          }
        ]
      },
      "AnomalyScoreRequest": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID for baseline lookup"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Event timestamp for timing analysis"
          },
          "objects_detected": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Objects Detected",
            "description": "List of detected object types (e.g., ['person', 'vehicle'])",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "timestamp"
        ],
        "title": "AnomalyScoreRequest",
        "description": "Request model for ad-hoc anomaly scoring."
      },
      "AnomalyScoreResponse": {
        "properties": {
          "event_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Id",
            "description": "Event UUID (null for ad-hoc scoring)"
          },
          "total_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Total Score",
            "description": "Combined anomaly score (0.0=normal, 1.0=highly anomalous)"
          },
          "timing_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Timing Score",
            "description": "Timing component score based on hourly patterns"
          },
          "day_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Day Score",
            "description": "Day-of-week component score"
          },
          "object_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Object Score",
            "description": "Object type component score"
          },
          "severity": {
            "type": "string",
            "title": "Severity",
            "description": "Severity classification: 'low', 'medium', or 'high'"
          },
          "has_baseline": {
            "type": "boolean",
            "title": "Has Baseline",
            "description": "Whether baseline patterns were available for scoring"
          }
        },
        "type": "object",
        "required": [
          "total_score",
          "timing_score",
          "day_score",
          "object_score",
          "severity",
          "has_baseline"
        ],
        "title": "AnomalyScoreResponse",
        "description": "Response model for anomaly score calculation."
      },
      "ApplySuggestionRequest": {
        "properties": {
          "suggestion_id": {
            "type": "string",
            "title": "Suggestion Id",
            "description": "ID of suggestion to apply"
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id",
            "description": "Camera ID for camera-specific prompt (optional)"
          }
        },
        "type": "object",
        "required": [
          "suggestion_id"
        ],
        "title": "ApplySuggestionRequest",
        "description": "Request body for POST /api/v1/feedback/prompt-insights/apply."
      },
      "ApplySuggestionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the suggestion was applied"
          },
          "new_prompt": {
            "type": "string",
            "title": "New Prompt",
            "description": "The updated prompt text"
          },
          "prompt_version": {
            "type": "integer",
            "title": "Prompt Version",
            "description": "Version number of the new prompt"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "new_prompt",
          "prompt_version",
          "message"
        ],
        "title": "ApplySuggestionResponse",
        "description": "Response for POST /api/v1/feedback/prompt-insights/apply."
      },
      "AssignEventRequest": {
        "properties": {
          "entity_id": {
            "type": "string",
            "title": "Entity Id",
            "description": "UUID of the entity to assign the event to"
          }
        },
        "type": "object",
        "required": [
          "entity_id"
        ],
        "title": "AssignEventRequest",
        "description": "Request for event assignment operation (Story P9-4.4)."
      },
      "AssignEventResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the operation succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action taken: 'assign', 'move', or 'none'"
          },
          "entity_id": {
            "type": "string",
            "title": "Entity Id",
            "description": "UUID of the target entity"
          },
          "entity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Name",
            "description": "Name of the target entity"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "action",
          "entity_id"
        ],
        "title": "AssignEventResponse",
        "description": "Response for event assignment operation (Story P9-4.4)."
      },
      "AudioThresholdsResponse": {
        "properties": {
          "glass_break": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Glass Break",
            "description": "Confidence threshold for glass break detection"
          },
          "gunshot": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Gunshot",
            "description": "Confidence threshold for gunshot detection"
          },
          "scream": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Scream",
            "description": "Confidence threshold for scream detection"
          },
          "doorbell": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Doorbell",
            "description": "Confidence threshold for doorbell detection"
          },
          "other": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Other",
            "description": "Confidence threshold for other audio events"
          }
        },
        "type": "object",
        "required": [
          "glass_break",
          "gunshot",
          "scream",
          "doorbell",
          "other"
        ],
        "title": "AudioThresholdsResponse",
        "description": "Response schema for audio detection thresholds",
        "examples": [
          {
            "doorbell": 0.7,
            "glass_break": 0.7,
            "gunshot": 0.7,
            "other": 0.7,
            "scream": 0.7
          }
        ]
      },
      "BackupContentsResponse": {
        "properties": {
          "has_database": {
            "type": "boolean",
            "title": "Has Database",
            "description": "Backup includes database",
            "default": false
          },
          "has_thumbnails": {
            "type": "boolean",
            "title": "Has Thumbnails",
            "description": "Backup includes thumbnails",
            "default": false
          },
          "has_settings": {
            "type": "boolean",
            "title": "Has Settings",
            "description": "Backup includes settings",
            "default": false
          },
          "database_size_bytes": {
            "type": "integer",
            "title": "Database Size Bytes",
            "description": "Database size in bytes",
            "default": 0
          },
          "thumbnails_count": {
            "type": "integer",
            "title": "Thumbnails Count",
            "description": "Number of thumbnails",
            "default": 0
          },
          "settings_count": {
            "type": "integer",
            "title": "Settings Count",
            "description": "Number of settings",
            "default": 0
          }
        },
        "type": "object",
        "title": "BackupContentsResponse",
        "description": "Information about what's contained in a backup (FF-007)"
      },
      "BackupListItem": {
        "properties": {
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Backup timestamp identifier"
          },
          "size_bytes": {
            "type": "integer",
            "title": "Size Bytes",
            "description": "Backup file size in bytes"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "ISO 8601 creation time"
          },
          "app_version": {
            "type": "string",
            "title": "App Version",
            "description": "App version at backup time"
          },
          "database_size_bytes": {
            "type": "integer",
            "title": "Database Size Bytes",
            "description": "Database size in backup",
            "default": 0
          },
          "thumbnails_count": {
            "type": "integer",
            "title": "Thumbnails Count",
            "description": "Number of thumbnails",
            "default": 0
          },
          "download_url": {
            "type": "string",
            "title": "Download Url",
            "description": "URL to download"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "size_bytes",
          "created_at",
          "app_version",
          "download_url"
        ],
        "title": "BackupListItem",
        "description": "Information about an available backup"
      },
      "BackupListResponse": {
        "properties": {
          "backups": {
            "items": {
              "$ref": "#/components/schemas/BackupListItem"
            },
            "type": "array",
            "title": "Backups",
            "description": "List of available backups"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of backups"
          }
        },
        "type": "object",
        "required": [
          "backups",
          "total_count"
        ],
        "title": "BackupListResponse",
        "description": "Response listing available backups"
      },
      "BackupOptions": {
        "properties": {
          "include_database": {
            "type": "boolean",
            "title": "Include Database",
            "description": "Include events, cameras, alert rules",
            "default": true
          },
          "include_thumbnails": {
            "type": "boolean",
            "title": "Include Thumbnails",
            "description": "Include thumbnail images",
            "default": true
          },
          "include_settings": {
            "type": "boolean",
            "title": "Include Settings",
            "description": "Include system settings",
            "default": true
          },
          "include_ai_config": {
            "type": "boolean",
            "title": "Include Ai Config",
            "description": "Include AI provider config (keys excluded)",
            "default": true
          },
          "include_protect_config": {
            "type": "boolean",
            "title": "Include Protect Config",
            "description": "Include Protect controller config",
            "default": true
          }
        },
        "type": "object",
        "title": "BackupOptions",
        "description": "Options for selective backup (FF-007)",
        "example": {
          "include_ai_config": true,
          "include_database": true,
          "include_protect_config": true,
          "include_settings": true,
          "include_thumbnails": true
        }
      },
      "BackupResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether backup was successful"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "description": "Backup timestamp identifier"
          },
          "size_bytes": {
            "type": "integer",
            "title": "Size Bytes",
            "description": "Backup file size in bytes"
          },
          "download_url": {
            "type": "string",
            "title": "Download Url",
            "description": "URL to download the backup"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          },
          "database_size_bytes": {
            "type": "integer",
            "title": "Database Size Bytes",
            "description": "Database size in backup",
            "default": 0
          },
          "thumbnails_count": {
            "type": "integer",
            "title": "Thumbnails Count",
            "description": "Number of thumbnails in backup",
            "default": 0
          },
          "thumbnails_size_bytes": {
            "type": "integer",
            "title": "Thumbnails Size Bytes",
            "description": "Thumbnails size in backup",
            "default": 0
          },
          "settings_count": {
            "type": "integer",
            "title": "Settings Count",
            "description": "Number of settings in backup",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "success",
          "timestamp",
          "size_bytes",
          "download_url",
          "message"
        ],
        "title": "BackupResponse",
        "description": "Response from backup creation",
        "example": {
          "database_size_bytes": 10485760,
          "download_url": "/api/v1/system/backup/2025-01-15-14-30-00/download",
          "message": "Backup created successfully",
          "settings_count": 15,
          "size_bytes": 15728640,
          "success": true,
          "thumbnails_count": 150,
          "thumbnails_size_bytes": 5242880,
          "timestamp": "2025-01-15-14-30-00"
        }
      },
      "BatchEmbeddingRequest": {
        "properties": {
          "limit": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Limit",
            "description": "Maximum number of events to process (max 100 per request)",
            "default": 100
          }
        },
        "type": "object",
        "title": "BatchEmbeddingRequest",
        "description": "Request model for batch embedding generation."
      },
      "BatchEmbeddingResponse": {
        "properties": {
          "processed": {
            "type": "integer",
            "title": "Processed",
            "description": "Number of embeddings successfully generated"
          },
          "failed": {
            "type": "integer",
            "title": "Failed",
            "description": "Number of embeddings that failed to generate"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of events processed"
          },
          "remaining": {
            "type": "integer",
            "title": "Remaining",
            "description": "Number of events still without embeddings"
          }
        },
        "type": "object",
        "required": [
          "processed",
          "failed",
          "total",
          "remaining"
        ],
        "title": "BatchEmbeddingResponse",
        "description": "Response model for batch embedding generation."
      },
      "BatchPatternResponse": {
        "properties": {
          "total_cameras": {
            "type": "integer",
            "title": "Total Cameras",
            "description": "Total cameras processed"
          },
          "patterns_calculated": {
            "type": "integer",
            "title": "Patterns Calculated",
            "description": "Patterns successfully calculated"
          },
          "patterns_skipped": {
            "type": "integer",
            "title": "Patterns Skipped",
            "description": "Patterns skipped (insufficient data)"
          },
          "elapsed_ms": {
            "type": "number",
            "title": "Elapsed Ms",
            "description": "Total processing time in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "total_cameras",
          "patterns_calculated",
          "patterns_skipped",
          "elapsed_ms"
        ],
        "title": "BatchPatternResponse",
        "description": "Response model for batch pattern calculation."
      },
      "Body_restore_from_backup_api_v1_system_restore_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          },
          "restore_database": {
            "type": "boolean",
            "title": "Restore Database",
            "default": true
          },
          "restore_thumbnails": {
            "type": "boolean",
            "title": "Restore Thumbnails",
            "default": true
          },
          "restore_settings": {
            "type": "boolean",
            "title": "Restore Settings",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_restore_from_backup_api_v1_system_restore_post"
      },
      "Body_validate_backup_api_v1_system_backup_validate_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_validate_backup_api_v1_system_backup_validate_post"
      },
      "BoundingBox": {
        "properties": {
          "x": {
            "type": "integer",
            "minimum": 0.0,
            "title": "X",
            "description": "X coordinate of top-left corner"
          },
          "y": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Y",
            "description": "Y coordinate of top-left corner"
          },
          "width": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Width",
            "description": "Width of bounding box"
          },
          "height": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Height",
            "description": "Height of bounding box"
          }
        },
        "type": "object",
        "required": [
          "x",
          "y",
          "width",
          "height"
        ],
        "title": "BoundingBox",
        "description": "Bounding box coordinates for detected motion",
        "examples": [
          {
            "height": 300,
            "width": 200,
            "x": 100,
            "y": 50
          }
        ]
      },
      "CameraCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "User-friendly camera name"
          },
          "type": {
            "type": "string",
            "enum": [
              "rtsp",
              "usb"
            ],
            "title": "Type",
            "description": "Camera type: rtsp or usb"
          },
          "frame_rate": {
            "type": "integer",
            "maximum": 30.0,
            "minimum": 1.0,
            "title": "Frame Rate",
            "description": "Target frames per second",
            "default": 5
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether camera capture is active",
            "default": true
          },
          "motion_enabled": {
            "type": "boolean",
            "title": "Motion Enabled",
            "description": "Whether motion detection is active",
            "default": true
          },
          "motion_sensitivity": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Motion Sensitivity",
            "description": "Motion detection sensitivity level",
            "default": "medium"
          },
          "motion_cooldown": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 0.0,
            "title": "Motion Cooldown",
            "description": "Seconds between motion triggers",
            "default": 60
          },
          "motion_algorithm": {
            "type": "string",
            "enum": [
              "mog2",
              "knn",
              "frame_diff"
            ],
            "title": "Motion Algorithm",
            "description": "Motion detection algorithm",
            "default": "mog2"
          },
          "analysis_mode": {
            "type": "string",
            "enum": [
              "single_frame",
              "multi_frame",
              "video_native"
            ],
            "title": "Analysis Mode",
            "description": "AI analysis mode: single_frame (fast, low cost), multi_frame (balanced), video_native (best quality, highest cost)",
            "default": "single_frame"
          },
          "homekit_stream_quality": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Homekit Stream Quality",
            "description": "HomeKit stream quality: low (480p, 15fps), medium (720p, 25fps), high (1080p, 30fps)",
            "default": "medium"
          },
          "rtsp_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Rtsp Url",
            "description": "Full RTSP URL"
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "description": "RTSP authentication username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "RTSP password (will be encrypted)"
          },
          "device_index": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Index",
            "description": "USB camera device index (0, 1, 2, ...)"
          },
          "audio_enabled": {
            "type": "boolean",
            "title": "Audio Enabled",
            "description": "Whether audio stream extraction is enabled",
            "default": false
          },
          "audio_event_types": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Audio Event Types",
            "description": "JSON array of audio event types to detect: glass_break, gunshot, scream, doorbell"
          },
          "audio_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Threshold",
            "description": "Per-camera confidence threshold override (0.0-1.0)"
          }
        },
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "title": "CameraCreate",
        "description": "Schema for creating a new camera",
        "examples": [
          {
            "frame_rate": 5,
            "is_enabled": true,
            "motion_cooldown": 60,
            "motion_sensitivity": "medium",
            "name": "Front Door Camera",
            "password": "secret123",
            "rtsp_url": "rtsp://192.168.1.50:554/stream1",
            "type": "rtsp",
            "username": "admin"
          },
          {
            "device_index": 0,
            "frame_rate": 15,
            "is_enabled": true,
            "name": "Webcam",
            "type": "usb"
          }
        ]
      },
      "CameraFeedbackStats": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID"
          },
          "camera_name": {
            "type": "string",
            "title": "Camera Name",
            "description": "Human-readable camera name"
          },
          "helpful_count": {
            "type": "integer",
            "title": "Helpful Count",
            "description": "Number of helpful ratings"
          },
          "not_helpful_count": {
            "type": "integer",
            "title": "Not Helpful Count",
            "description": "Number of not helpful ratings"
          },
          "accuracy_rate": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Accuracy Rate",
            "description": "Accuracy rate as percentage (helpful / total * 100)"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "camera_name",
          "helpful_count",
          "not_helpful_count",
          "accuracy_rate"
        ],
        "title": "CameraFeedbackStats",
        "description": "Per-camera feedback statistics for accuracy tracking."
      },
      "CameraInsight": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID"
          },
          "camera_name": {
            "type": "string",
            "title": "Camera Name",
            "description": "Human-readable camera name"
          },
          "accuracy_rate": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Accuracy Rate",
            "description": "Accuracy rate as percentage"
          },
          "sample_count": {
            "type": "integer",
            "title": "Sample Count",
            "description": "Number of feedback samples"
          },
          "top_categories": {
            "items": {
              "$ref": "#/components/schemas/CorrectionCategory"
            },
            "type": "array",
            "title": "Top Categories",
            "description": "Most common correction categories for this camera"
          },
          "suggestions": {
            "items": {
              "$ref": "#/components/schemas/PromptSuggestion"
            },
            "type": "array",
            "title": "Suggestions",
            "description": "Camera-specific suggestions (if accuracy is low)"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "camera_name",
          "accuracy_rate",
          "sample_count"
        ],
        "title": "CameraInsight",
        "description": "Per-camera analysis results."
      },
      "CameraResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "User-friendly camera name"
          },
          "type": {
            "type": "string",
            "enum": [
              "rtsp",
              "usb"
            ],
            "title": "Type",
            "description": "Camera type: rtsp or usb"
          },
          "frame_rate": {
            "type": "integer",
            "maximum": 30.0,
            "minimum": 1.0,
            "title": "Frame Rate",
            "description": "Target frames per second",
            "default": 5
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether camera capture is active",
            "default": true
          },
          "motion_enabled": {
            "type": "boolean",
            "title": "Motion Enabled",
            "description": "Whether motion detection is active",
            "default": true
          },
          "motion_sensitivity": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Motion Sensitivity",
            "description": "Motion detection sensitivity level",
            "default": "medium"
          },
          "motion_cooldown": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 0.0,
            "title": "Motion Cooldown",
            "description": "Seconds between motion triggers",
            "default": 60
          },
          "motion_algorithm": {
            "type": "string",
            "enum": [
              "mog2",
              "knn",
              "frame_diff"
            ],
            "title": "Motion Algorithm",
            "description": "Motion detection algorithm",
            "default": "mog2"
          },
          "analysis_mode": {
            "type": "string",
            "enum": [
              "single_frame",
              "multi_frame",
              "video_native"
            ],
            "title": "Analysis Mode",
            "description": "AI analysis mode: single_frame (fast, low cost), multi_frame (balanced), video_native (best quality, highest cost)",
            "default": "single_frame"
          },
          "homekit_stream_quality": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Homekit Stream Quality",
            "description": "HomeKit stream quality: low (480p, 15fps), medium (720p, 25fps), high (1080p, 30fps)",
            "default": "medium"
          },
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Camera UUID"
          },
          "rtsp_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rtsp Url",
            "description": "RTSP URL (credentials removed)"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "device_index": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Index"
          },
          "detection_zones": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Detection Zones",
            "description": "JSON array of DetectionZone objects"
          },
          "detection_schedule": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Detection Schedule",
            "description": "JSON object: DetectionSchedule schema"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "source_type": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "rtsp",
                  "usb",
                  "protect"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Type",
            "description": "Camera source: rtsp, usb, or protect"
          },
          "protect_controller_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Protect Controller Id",
            "description": "UniFi Protect controller ID"
          },
          "protect_camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Protect Camera Id",
            "description": "Camera ID in Protect system"
          },
          "protect_camera_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Protect Camera Type",
            "description": "Protect camera model type"
          },
          "smart_detection_types": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Smart Detection Types",
            "description": "Enabled smart detection types"
          },
          "is_doorbell": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Doorbell",
            "description": "Whether camera is a doorbell"
          },
          "audio_enabled": {
            "type": "boolean",
            "title": "Audio Enabled",
            "description": "Whether audio stream extraction is enabled",
            "default": false
          },
          "audio_codec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Codec",
            "description": "Detected audio codec: 'aac', 'pcmu', 'opus', etc."
          },
          "audio_event_types": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Audio Event Types",
            "description": "JSON array of audio event types to detect"
          },
          "audio_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Threshold",
            "description": "Per-camera confidence threshold override (0.0-1.0)"
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "CameraResponse",
        "description": "Schema for camera API responses",
        "examples": [
          {
            "created_at": "2025-11-15T10:30:00Z",
            "frame_rate": 5,
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "is_enabled": true,
            "motion_cooldown": 60,
            "motion_sensitivity": "medium",
            "name": "Front Door Camera",
            "rtsp_url": "rtsp://192.168.1.50:554/stream1",
            "type": "rtsp",
            "updated_at": "2025-11-15T10:30:00Z",
            "username": "admin"
          }
        ]
      },
      "CameraTestDetailedResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether connection test succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "thumbnail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail",
            "description": "Base64-encoded JPEG thumbnail with data URI prefix"
          },
          "resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution",
            "description": "Stream resolution (e.g., '1920x1080')"
          },
          "fps": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps",
            "description": "Frames per second"
          },
          "codec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Codec",
            "description": "Video codec (e.g., 'h264', 'MJPG')"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "CameraTestDetailedResponse",
        "description": "Schema for pre-save camera connection test response with stream info",
        "examples": [
          {
            "codec": "h264",
            "fps": 30.0,
            "message": "Connection successful",
            "resolution": "1920x1080",
            "success": true,
            "thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."
          },
          {
            "message": "Authentication failed. Check username and password.",
            "success": false
          }
        ]
      },
      "CameraTestRequest": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "rtsp",
              "usb"
            ],
            "title": "Type",
            "description": "Camera type: rtsp or usb"
          },
          "rtsp_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Rtsp Url",
            "description": "Full RTSP URL"
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "description": "RTSP authentication username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "RTSP password (plain text, not persisted)"
          },
          "device_index": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Device Index",
            "description": "USB camera device index (0, 1, 2, ...)"
          }
        },
        "type": "object",
        "required": [
          "type"
        ],
        "title": "CameraTestRequest",
        "description": "Schema for testing camera connection before saving (no database record created)",
        "examples": [
          {
            "password": "secret123",
            "rtsp_url": "rtsp://192.168.1.50:554/stream1",
            "type": "rtsp",
            "username": "admin"
          },
          {
            "device_index": 0,
            "type": "usb"
          }
        ]
      },
      "CameraTestResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether connection test succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "thumbnail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail",
            "description": "Base64-encoded JPEG thumbnail (if successful)"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "CameraTestResponse",
        "description": "Schema for camera connection test response",
        "examples": [
          {
            "message": "Connection successful",
            "success": true,
            "thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."
          },
          {
            "message": "Authentication failed. Check username and password.",
            "success": false
          }
        ]
      },
      "CameraUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "rtsp_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Rtsp Url"
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "frame_rate": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 30.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Rate"
          },
          "is_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Enabled"
          },
          "motion_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Enabled"
          },
          "motion_sensitivity": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Sensitivity"
          },
          "motion_cooldown": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 300.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Cooldown"
          },
          "motion_algorithm": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "mog2",
                  "knn",
                  "frame_diff"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Algorithm"
          },
          "detection_zones": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Detection Zones",
            "description": "JSON array of DetectionZone objects (accepts object or string)"
          },
          "detection_schedule": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Detection Schedule",
            "description": "JSON object: DetectionSchedule schema (accepts object or string)"
          },
          "analysis_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "single_frame",
                  "multi_frame",
                  "video_native"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Mode",
            "description": "AI analysis mode: single_frame (fast, low cost), multi_frame (balanced), video_native (best quality, highest cost)"
          },
          "homekit_stream_quality": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Homekit Stream Quality",
            "description": "HomeKit stream quality: low (480p, 15fps), medium (720p, 25fps), high (1080p, 30fps)"
          },
          "audio_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Enabled",
            "description": "Whether audio stream extraction is enabled"
          },
          "audio_event_types": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Audio Event Types",
            "description": "JSON array of audio event types to detect: glass_break, gunshot, scream, doorbell"
          },
          "audio_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Threshold",
            "description": "Per-camera confidence threshold override (0.0-1.0)"
          }
        },
        "type": "object",
        "title": "CameraUpdate",
        "description": "Schema for updating an existing camera (all fields optional)"
      },
      "ChangePasswordRequest": {
        "properties": {
          "current_password": {
            "type": "string",
            "minLength": 1,
            "title": "Current Password",
            "description": "Current password"
          },
          "new_password": {
            "type": "string",
            "minLength": 8,
            "title": "New Password",
            "description": "New password (8+ chars, uppercase, number, special)"
          }
        },
        "type": "object",
        "required": [
          "current_password",
          "new_password"
        ],
        "title": "ChangePasswordRequest",
        "description": "Change password request body"
      },
      "CleanupResponse": {
        "properties": {
          "deleted_count": {
            "type": "integer",
            "title": "Deleted Count",
            "description": "Number of events deleted"
          },
          "thumbnails_deleted": {
            "type": "integer",
            "title": "Thumbnails Deleted",
            "description": "Number of thumbnails deleted"
          },
          "space_freed_mb": {
            "type": "number",
            "title": "Space Freed Mb",
            "description": "Disk space freed in MB"
          }
        },
        "type": "object",
        "required": [
          "deleted_count",
          "thumbnails_deleted",
          "space_freed_mb"
        ],
        "title": "CleanupResponse",
        "description": "Schema for manual cleanup response\n\nAttributes:\n    deleted_count: Number of events deleted\n    thumbnails_deleted: Number of thumbnail files deleted\n    space_freed_mb: Amount of disk space freed in megabytes\n\nExample:\n    {\n        \"deleted_count\": 450,\n        \"thumbnails_deleted\": 380,\n        \"space_freed_mb\": 12.3\n    }",
        "example": {
          "deleted_count": 450,
          "space_freed_mb": 12.3,
          "thumbnails_deleted": 380
        }
      },
      "CorrectionCategory": {
        "type": "string",
        "enum": [
          "object_misidentification",
          "action_wrong",
          "missing_detail",
          "context_error",
          "general"
        ],
        "title": "CorrectionCategory",
        "description": "Categories for classifying user corrections."
      },
      "CorrectionSummary": {
        "properties": {
          "correction_text": {
            "type": "string",
            "title": "Correction Text",
            "description": "Correction text provided by users"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of times this correction was submitted"
          }
        },
        "type": "object",
        "required": [
          "correction_text",
          "count"
        ],
        "title": "CorrectionSummary",
        "description": "Summary of common correction patterns."
      },
      "CorrelatedEventResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Event UUID"
          },
          "camera_name": {
            "type": "string",
            "title": "Camera Name",
            "description": "Camera name for display"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url",
            "description": "Full URL to thumbnail image"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Event timestamp (UTC)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "camera_name",
          "timestamp"
        ],
        "title": "CorrelatedEventResponse",
        "description": "Schema for correlated events in multi-camera event display (Story P2-4.4)"
      },
      "CostCapStatus": {
        "properties": {
          "daily_cost": {
            "type": "number",
            "title": "Daily Cost",
            "description": "Current day's total cost in USD"
          },
          "daily_cap": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Daily Cap",
            "description": "Daily cap in USD (null = no limit)"
          },
          "daily_percent": {
            "type": "number",
            "title": "Daily Percent",
            "description": "Percentage of daily cap used (0 if no cap)"
          },
          "monthly_cost": {
            "type": "number",
            "title": "Monthly Cost",
            "description": "Current month's total cost in USD"
          },
          "monthly_cap": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Monthly Cap",
            "description": "Monthly cap in USD (null = no limit)"
          },
          "monthly_percent": {
            "type": "number",
            "title": "Monthly Percent",
            "description": "Percentage of monthly cap used (0 if no cap)"
          },
          "is_paused": {
            "type": "boolean",
            "title": "Is Paused",
            "description": "True if AI analysis is paused due to cap"
          },
          "pause_reason": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "cost_cap_daily",
                  "cost_cap_monthly"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Pause Reason",
            "description": "Reason for pause (null if not paused)"
          }
        },
        "type": "object",
        "required": [
          "daily_cost",
          "daily_percent",
          "monthly_cost",
          "monthly_percent",
          "is_paused"
        ],
        "title": "CostCapStatus",
        "description": "Response schema for cost cap status endpoint.\n\nStory P3-7.3: Implement Daily/Monthly Cost Caps.\n\nProvides current cost usage and cap status for enforcement and UI display.",
        "example": {
          "daily_cap": 1.0,
          "daily_cost": 0.75,
          "daily_percent": 75.0,
          "is_paused": false,
          "monthly_cap": 20.0,
          "monthly_cost": 12.5,
          "monthly_percent": 62.5
        }
      },
      "DailyFeedbackStats": {
        "properties": {
          "date": {
            "type": "string",
            "format": "date",
            "title": "Date",
            "description": "Date (YYYY-MM-DD)"
          },
          "helpful_count": {
            "type": "integer",
            "title": "Helpful Count",
            "description": "Number of helpful ratings on this day"
          },
          "not_helpful_count": {
            "type": "integer",
            "title": "Not Helpful Count",
            "description": "Number of not helpful ratings on this day"
          }
        },
        "type": "object",
        "required": [
          "date",
          "helpful_count",
          "not_helpful_count"
        ],
        "title": "DailyFeedbackStats",
        "description": "Daily feedback counts for trend analysis."
      },
      "DailySummaryResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Summary UUID (for saved summaries)"
          },
          "summary_text": {
            "type": "string",
            "title": "Summary Text",
            "description": "Generated natural language summary"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of summarized period"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of summarized period"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events in summary"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At",
            "description": "When the summary was generated"
          },
          "stats": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SummaryStats"
              },
              {
                "type": "null"
              }
            ],
            "description": "Event statistics breakdown"
          },
          "ai_cost": {
            "type": "number",
            "title": "Ai Cost",
            "description": "Cost of AI generation (USD)",
            "default": 0.0
          },
          "provider_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Used",
            "description": "AI provider used"
          },
          "camera_count": {
            "type": "integer",
            "title": "Camera Count",
            "description": "Number of cameras with events",
            "default": 0
          },
          "alert_count": {
            "type": "integer",
            "title": "Alert Count",
            "description": "Number of alerts triggered",
            "default": 0
          },
          "doorbell_count": {
            "type": "integer",
            "title": "Doorbell Count",
            "description": "Number of doorbell ring events",
            "default": 0
          },
          "person_count": {
            "type": "integer",
            "title": "Person Count",
            "description": "Number of person detections",
            "default": 0
          },
          "vehicle_count": {
            "type": "integer",
            "title": "Vehicle Count",
            "description": "Number of vehicle detections",
            "default": 0
          },
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date of summary (YYYY-MM-DD)"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "description": "Whether this was from cache",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "summary_text",
          "period_start",
          "period_end",
          "event_count",
          "generated_at",
          "date"
        ],
        "title": "DailySummaryResponse",
        "description": "Response for daily summary endpoint."
      },
      "DeleteDataResponse": {
        "properties": {
          "deleted_count": {
            "type": "integer",
            "title": "Deleted Count",
            "description": "Number of events deleted"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether deletion was successful"
          }
        },
        "type": "object",
        "required": [
          "deleted_count",
          "success"
        ],
        "title": "DeleteDataResponse",
        "description": "Response from delete all data operation"
      },
      "DeleteFacesResponse": {
        "properties": {
          "deleted_count": {
            "type": "integer",
            "title": "Deleted Count",
            "description": "Number of face embeddings deleted"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "deleted_count",
          "message"
        ],
        "title": "DeleteFacesResponse",
        "description": "Response model for face deletion."
      },
      "DeleteVehiclesResponse": {
        "properties": {
          "deleted_count": {
            "type": "integer",
            "title": "Deleted Count",
            "description": "Number of vehicle embeddings deleted"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "deleted_count",
          "message"
        ],
        "title": "DeleteVehiclesResponse",
        "description": "Response model for vehicle deletion."
      },
      "DeliveryStatusResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether delivery was successful"
          },
          "channels_attempted": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Channels Attempted",
            "description": "Channels attempted"
          },
          "channels_succeeded": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Channels Succeeded",
            "description": "Channels that succeeded"
          },
          "errors": {
            "additionalProperties": true,
            "type": "object",
            "title": "Errors",
            "description": "Errors per channel"
          },
          "delivery_time_ms": {
            "type": "integer",
            "title": "Delivery Time Ms",
            "description": "Delivery time in milliseconds",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "DeliveryStatusResponse",
        "description": "Delivery status for a digest."
      },
      "DetectionSchedule": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Schedule UUID"
          },
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Schedule name"
          },
          "days_of_week": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Days Of Week",
            "description": "Days active (0=Mon, 6=Sun)"
          },
          "start_time": {
            "type": "string",
            "pattern": "^([01]\\d|2[0-3]):([0-5]\\d)$",
            "title": "Start Time",
            "description": "Start time (HH:MM)"
          },
          "end_time": {
            "type": "string",
            "pattern": "^([01]\\d|2[0-3]):([0-5]\\d)$",
            "title": "End Time",
            "description": "End time (HH:MM)"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether schedule is active",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "days_of_week",
          "start_time",
          "end_time"
        ],
        "title": "DetectionSchedule",
        "description": "Schema for detection schedule (future F2.3)",
        "examples": [
          {
            "days_of_week": [
              0,
              1,
              2,
              3,
              4
            ],
            "enabled": true,
            "end_time": "18:00",
            "id": "schedule-1",
            "name": "Weekday Daytime",
            "start_time": "08:00"
          }
        ]
      },
      "DetectionZone": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Zone UUID"
          },
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Zone name"
          },
          "vertices": {
            "items": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "array",
            "minItems": 3,
            "title": "Vertices",
            "description": "Polygon vertices [{x, y}, ...]"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether zone is active",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "name",
          "vertices"
        ],
        "title": "DetectionZone",
        "description": "Schema for polygon detection zone (future F2.2)",
        "examples": [
          {
            "enabled": true,
            "id": "zone-1",
            "name": "Front Yard",
            "vertices": [
              {
                "x": 100,
                "y": 100
              },
              {
                "x": 500,
                "y": 100
              },
              {
                "x": 500,
                "y": 400
              },
              {
                "x": 100,
                "y": 400
              }
            ]
          }
        ]
      },
      "DeviceDetailsRequest": {
        "properties": {
          "endpoint_url": {
            "type": "string",
            "title": "Endpoint Url",
            "description": "ONVIF device service URL from discovery"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "description": "Username for ONVIF authentication (if required)"
          },
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "Password for ONVIF authentication (if required)"
          }
        },
        "type": "object",
        "required": [
          "endpoint_url"
        ],
        "title": "DeviceDetailsRequest",
        "description": "Request to fetch detailed information from a discovered ONVIF device.",
        "example": {
          "endpoint_url": "http://192.168.1.100:80/onvif/device_service",
          "password": "password123",
          "username": "admin"
        }
      },
      "DeviceDetailsResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Status: 'success', 'auth_required', or 'error'"
          },
          "device": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DiscoveredCameraDetails"
              },
              {
                "type": "null"
              }
            ],
            "description": "Device details if successful"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if status is 'error' or 'auth_required'"
          },
          "duration_ms": {
            "type": "integer",
            "title": "Duration Ms",
            "description": "Time taken to query device in milliseconds",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "DeviceDetailsResponse",
        "description": "Response from device details endpoint.",
        "example": {
          "device": {
            "device_info": {
              "manufacturer": "Dahua",
              "model": "IPC-HDW2431T-AS-S2",
              "name": "IPC-HDW2431T"
            },
            "endpoint_url": "http://192.168.1.100:80/onvif/device_service",
            "id": "camera-192-168-1-100-80",
            "ip_address": "192.168.1.100",
            "port": 80,
            "primary_rtsp_url": "rtsp://192.168.1.100:554/stream",
            "profiles": [],
            "requires_auth": false
          },
          "duration_ms": 1234,
          "status": "success"
        }
      },
      "DeviceDetailsStatusResponse": {
        "properties": {
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether device details query is available"
          },
          "library_installed": {
            "type": "boolean",
            "title": "Library Installed",
            "description": "Whether onvif-zeep is installed"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "available",
          "library_installed",
          "message"
        ],
        "title": "DeviceDetailsStatusResponse",
        "description": "Response for device details status check."
      },
      "DeviceInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Device name (from GetDeviceInformation or derived from model)"
          },
          "manufacturer": {
            "type": "string",
            "title": "Manufacturer",
            "description": "Device manufacturer"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "Device model"
          },
          "firmware_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Firmware Version",
            "description": "Firmware version"
          },
          "serial_number": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Serial Number",
            "description": "Device serial number"
          },
          "hardware_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Hardware Id",
            "description": "Hardware identifier"
          }
        },
        "type": "object",
        "required": [
          "name",
          "manufacturer",
          "model"
        ],
        "title": "DeviceInfo",
        "description": "Device information from ONVIF GetDeviceInformation response.",
        "example": {
          "firmware_version": "2.800.0000000.44.R",
          "hardware_id": "1.0",
          "manufacturer": "Dahua",
          "model": "IPC-HDW2431T-AS-S2",
          "name": "IPC-HDW2431T",
          "serial_number": "6G12345678"
        }
      },
      "DigestListResponse": {
        "properties": {
          "digests": {
            "items": {
              "$ref": "#/components/schemas/DigestResponse"
            },
            "type": "array",
            "title": "Digests",
            "description": "List of digests"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of digests"
          }
        },
        "type": "object",
        "required": [
          "digests",
          "total"
        ],
        "title": "DigestListResponse",
        "description": "Response for listing digests."
      },
      "DigestResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Digest UUID"
          },
          "summary_text": {
            "type": "string",
            "title": "Summary Text",
            "description": "Generated summary text"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of period"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of period"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At",
            "description": "When generated"
          },
          "digest_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Digest Type",
            "description": "Type of digest"
          },
          "ai_cost": {
            "type": "number",
            "title": "Ai Cost",
            "description": "AI generation cost",
            "default": 0.0
          },
          "provider_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Used",
            "description": "AI provider used"
          },
          "delivery_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DeliveryStatusResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Delivery status"
          }
        },
        "type": "object",
        "required": [
          "id",
          "summary_text",
          "period_start",
          "period_end",
          "event_count",
          "generated_at",
          "digest_type"
        ],
        "title": "DigestResponse",
        "description": "Response model for a digest."
      },
      "DigestStatusResponse": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether scheduler is enabled"
          },
          "schedule_time": {
            "type": "string",
            "title": "Schedule Time",
            "description": "Scheduled time (HH:MM)"
          },
          "last_run": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Run",
            "description": "Last execution time"
          },
          "last_status": {
            "type": "string",
            "title": "Last Status",
            "description": "Status of last run"
          },
          "last_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Error",
            "description": "Error from last run if any"
          },
          "next_run": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Run",
            "description": "Next scheduled run time"
          }
        },
        "type": "object",
        "required": [
          "enabled",
          "schedule_time",
          "last_run",
          "last_status",
          "last_error",
          "next_run"
        ],
        "title": "DigestStatusResponse",
        "description": "Response for digest status endpoint."
      },
      "DigestTriggerRequest": {
        "properties": {
          "date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date",
            "description": "Date to generate digest for (YYYY-MM-DD). Defaults to yesterday."
          }
        },
        "type": "object",
        "title": "DigestTriggerRequest",
        "description": "Request model for triggering digest generation."
      },
      "DigestTriggerResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          },
          "digest": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DigestResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "Generated digest if successful"
          },
          "skipped": {
            "type": "boolean",
            "title": "Skipped",
            "description": "Whether generation was skipped",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "DigestTriggerResponse",
        "description": "Response for digest trigger endpoint."
      },
      "DiscoveredCameraDetails": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique identifier for this camera (generated from endpoint URL)"
          },
          "endpoint_url": {
            "type": "string",
            "title": "Endpoint Url",
            "description": "ONVIF device service URL"
          },
          "ip_address": {
            "type": "string",
            "title": "Ip Address",
            "description": "IP address extracted from endpoint URL"
          },
          "port": {
            "type": "integer",
            "title": "Port",
            "description": "Port number extracted from endpoint URL"
          },
          "device_info": {
            "$ref": "#/components/schemas/DeviceInfo",
            "description": "Device information from GetDeviceInformation"
          },
          "profiles": {
            "items": {
              "$ref": "#/components/schemas/StreamProfile"
            },
            "type": "array",
            "title": "Profiles",
            "description": "Available stream profiles"
          },
          "primary_rtsp_url": {
            "type": "string",
            "title": "Primary Rtsp Url",
            "description": "Primary/best quality RTSP URL (highest resolution profile)"
          },
          "requires_auth": {
            "type": "boolean",
            "title": "Requires Auth",
            "description": "Whether the device requires authentication for ONVIF queries",
            "default": false
          },
          "discovered_at": {
            "type": "string",
            "format": "date-time",
            "title": "Discovered At",
            "description": "Timestamp when device details were retrieved"
          }
        },
        "type": "object",
        "required": [
          "id",
          "endpoint_url",
          "ip_address",
          "port",
          "device_info",
          "primary_rtsp_url"
        ],
        "title": "DiscoveredCameraDetails",
        "description": "Full camera details retrieved via ONVIF GetDeviceInformation and GetProfiles.\n\nThis is the comprehensive model returned when querying a specific device.",
        "example": {
          "device_info": {
            "firmware_version": "2.800.0000000.44.R",
            "hardware_id": "1.0",
            "manufacturer": "Dahua",
            "model": "IPC-HDW2431T-AS-S2",
            "name": "IPC-HDW2431T",
            "serial_number": "6G12345678"
          },
          "discovered_at": "2025-12-14T10:30:00Z",
          "endpoint_url": "http://192.168.1.100:80/onvif/device_service",
          "id": "camera-192-168-1-100-80",
          "ip_address": "192.168.1.100",
          "port": 80,
          "primary_rtsp_url": "rtsp://192.168.1.100:554/cam/realmonitor?channel=1&subtype=0",
          "profiles": [
            {
              "encoding": "H264",
              "fps": 25,
              "height": 1520,
              "name": "mainStream",
              "resolution": "2688x1520",
              "rtsp_url": "rtsp://192.168.1.100:554/cam/realmonitor?channel=1&subtype=0",
              "token": "profile_token_1",
              "width": 2688
            },
            {
              "encoding": "H264",
              "fps": 25,
              "height": 480,
              "name": "subStream",
              "resolution": "704x480",
              "rtsp_url": "rtsp://192.168.1.100:554/cam/realmonitor?channel=1&subtype=1",
              "token": "profile_token_2",
              "width": 704
            }
          ],
          "requires_auth": false
        }
      },
      "DiscoveredDevice": {
        "properties": {
          "endpoint_url": {
            "type": "string",
            "title": "Endpoint Url",
            "description": "XAddrs service URL from ProbeMatch response"
          },
          "scopes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Scopes",
            "description": "Device scopes (e.g., onvif://www.onvif.org/type/NetworkVideoTransmitter)"
          },
          "types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Types",
            "description": "Device types from ProbeMatch (e.g., tdn:NetworkVideoTransmitter)"
          },
          "metadata_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata Version",
            "description": "Metadata version from ProbeMatch if available"
          }
        },
        "type": "object",
        "required": [
          "endpoint_url"
        ],
        "title": "DiscoveredDevice",
        "description": "Represents a device discovered via WS-Discovery.\n\nContains the minimal information extracted from ProbeMatch responses.\nFull device details (manufacturer, model, RTSP URLs) are retrieved\nin Story P5-2.2 via GetDeviceInformation.",
        "example": {
          "endpoint_url": "http://192.168.1.100:80/onvif/device_service",
          "metadata_version": "1",
          "scopes": [
            "onvif://www.onvif.org/type/NetworkVideoTransmitter",
            "onvif://www.onvif.org/Profile/Streaming"
          ],
          "types": [
            "tdn:NetworkVideoTransmitter"
          ]
        }
      },
      "DiscoveryRequest": {
        "properties": {
          "timeout": {
            "type": "integer",
            "maximum": 60.0,
            "minimum": 1.0,
            "title": "Timeout",
            "description": "Discovery timeout in seconds (default: 10, max: 60)",
            "default": 10
          }
        },
        "type": "object",
        "title": "DiscoveryRequest",
        "description": "Request body for camera discovery endpoint.",
        "example": {
          "timeout": 10
        }
      },
      "DiscoveryResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Discovery status: 'complete', 'timeout', or 'error'"
          },
          "duration_ms": {
            "type": "integer",
            "title": "Duration Ms",
            "description": "Time taken for discovery scan in milliseconds"
          },
          "devices": {
            "items": {
              "$ref": "#/components/schemas/DiscoveredDevice"
            },
            "type": "array",
            "title": "Devices",
            "description": "List of discovered ONVIF devices"
          },
          "device_count": {
            "type": "integer",
            "title": "Device Count",
            "description": "Number of devices discovered"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "description": "Error message if status is 'error'"
          }
        },
        "type": "object",
        "required": [
          "status",
          "duration_ms",
          "device_count"
        ],
        "title": "DiscoveryResponse",
        "description": "Response from camera discovery endpoint.",
        "example": {
          "device_count": 1,
          "devices": [
            {
              "endpoint_url": "http://192.168.1.100:80/onvif/device_service",
              "metadata_version": "1",
              "scopes": [
                "onvif://www.onvif.org/type/NetworkVideoTransmitter"
              ],
              "types": [
                "tdn:NetworkVideoTransmitter"
              ]
            }
          ],
          "duration_ms": 8234,
          "status": "complete"
        }
      },
      "DiscoveryStatusResponse": {
        "properties": {
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether ONVIF discovery is available"
          },
          "library_installed": {
            "type": "boolean",
            "title": "Library Installed",
            "description": "Whether WSDiscovery is installed"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "available",
          "library_installed",
          "message"
        ],
        "title": "DiscoveryStatusResponse",
        "description": "Response for discovery status check."
      },
      "EmbeddingStatsResponse": {
        "properties": {
          "total_events": {
            "type": "integer",
            "title": "Total Events",
            "description": "Total number of events in database"
          },
          "events_with_embeddings": {
            "type": "integer",
            "title": "Events With Embeddings",
            "description": "Number of events with embeddings"
          },
          "events_without_embeddings": {
            "type": "integer",
            "title": "Events Without Embeddings",
            "description": "Number of events without embeddings"
          },
          "coverage_percent": {
            "type": "number",
            "title": "Coverage Percent",
            "description": "Percentage of events with embeddings"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version",
            "description": "Current model version"
          },
          "embedding_dimension": {
            "type": "integer",
            "title": "Embedding Dimension",
            "description": "Embedding vector dimension"
          }
        },
        "type": "object",
        "required": [
          "total_events",
          "events_with_embeddings",
          "events_without_embeddings",
          "coverage_percent",
          "model_version",
          "embedding_dimension"
        ],
        "title": "EmbeddingStatsResponse",
        "description": "Response model for embedding statistics."
      },
      "EmbeddingStatusResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Event UUID"
          },
          "exists": {
            "type": "boolean",
            "title": "Exists",
            "description": "Whether an embedding exists for this event"
          },
          "model_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Version",
            "description": "Model version used"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "When the embedding was created"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "exists"
        ],
        "title": "EmbeddingStatusResponse",
        "description": "Response model for embedding status."
      },
      "EntityCreateRequest": {
        "properties": {
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type: person, vehicle, or unknown"
          },
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Name for the entity"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Notes about this entity"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status for priority notifications",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status to suppress notifications",
            "default": false
          },
          "vehicle_color": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Color",
            "description": "Vehicle color (e.g., 'white', 'black', 'silver')"
          },
          "vehicle_make": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Make",
            "description": "Vehicle make (e.g., 'toyota', 'ford', 'honda')"
          },
          "vehicle_model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Model",
            "description": "Vehicle model (e.g., 'camry', 'f150', 'civic')"
          },
          "reference_image": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference Image",
            "description": "Base64 encoded reference image (max 2MB, jpeg/png/webp)"
          }
        },
        "type": "object",
        "required": [
          "entity_type"
        ],
        "title": "EntityCreateRequest",
        "description": "Request model for creating an entity (Story P7-4.1, P10-4.2)."
      },
      "EntityDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Entity UUID"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type: person, vehicle, or unknown"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "User notes about this entity"
          },
          "thumbnail_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Path",
            "description": "Path to entity thumbnail"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times this entity has been seen"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status for priority notifications",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status to suppress notifications",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Record update timestamp"
          },
          "recent_events": {
            "items": {
              "$ref": "#/components/schemas/EventSummaryForEntity"
            },
            "type": "array",
            "title": "Recent Events",
            "description": "Recent events associated with this entity",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "id",
          "entity_type",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count",
          "created_at",
          "updated_at"
        ],
        "title": "EntityDetailResponse",
        "description": "Detailed entity response with recent events."
      },
      "EntityEventsResponse": {
        "properties": {
          "entity_id": {
            "type": "string",
            "title": "Entity Id",
            "description": "Entity UUID"
          },
          "events": {
            "items": {
              "$ref": "#/components/schemas/EventSummaryForEntity"
            },
            "type": "array",
            "title": "Events",
            "description": "List of events for this entity"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total event count for this entity"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Events per page"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether more events exist beyond current page"
          }
        },
        "type": "object",
        "required": [
          "entity_id",
          "events",
          "total",
          "page",
          "limit",
          "has_more"
        ],
        "title": "EntityEventsResponse",
        "description": "Response model for paginated entity events (Story P9-4.2)."
      },
      "EntityListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Entity UUID"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type: 'person' or 'vehicle'"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Entity name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "entity_type",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count"
        ],
        "title": "EntityListItem",
        "description": "Single entity in VIP/blocked list."
      },
      "EntityListResponse": {
        "properties": {
          "entities": {
            "items": {
              "$ref": "#/components/schemas/EntityResponse"
            },
            "type": "array",
            "title": "Entities",
            "description": "List of entities"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total entity count"
          }
        },
        "type": "object",
        "required": [
          "entities",
          "total"
        ],
        "title": "EntityListResponse",
        "description": "Response model for entity list."
      },
      "EntityResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Entity UUID"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type: person, vehicle, or unknown"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "User notes about this entity"
          },
          "thumbnail_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Path",
            "description": "Path to entity thumbnail"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times this entity has been seen"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status for priority notifications",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status to suppress notifications",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "entity_type",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count"
        ],
        "title": "EntityResponse",
        "description": "Response model for an entity."
      },
      "EntityUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "New name for the entity"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Notes about this entity"
          },
          "is_vip": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Vip",
            "description": "VIP status for priority notifications"
          },
          "is_blocked": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Blocked",
            "description": "Blocked status to suppress notifications"
          }
        },
        "type": "object",
        "title": "EntityUpdateRequest",
        "description": "Request model for updating an entity."
      },
      "EventCreate": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "UUID of the camera that triggered the event"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event occurred (UTC with timezone)"
          },
          "description": {
            "type": "string",
            "maxLength": 5000,
            "minLength": 1,
            "title": "Description",
            "description": "AI-generated natural language description"
          },
          "confidence": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "AI confidence score (0-100)"
          },
          "objects_detected": {
            "items": {
              "type": "string",
              "enum": [
                "person",
                "vehicle",
                "animal",
                "package",
                "unknown"
              ]
            },
            "type": "array",
            "minItems": 1,
            "title": "Objects Detected",
            "description": "List of detected object types"
          },
          "thumbnail_path": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Path",
            "description": "Relative path to thumbnail image (filesystem mode)"
          },
          "thumbnail_base64": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Base64",
            "description": "Base64-encoded JPEG thumbnail (database mode)"
          },
          "alert_triggered": {
            "type": "boolean",
            "title": "Alert Triggered",
            "description": "Whether alert rules were triggered",
            "default": false
          },
          "source_type": {
            "type": "string",
            "enum": [
              "rtsp",
              "usb",
              "protect"
            ],
            "title": "Source Type",
            "description": "Event source type",
            "default": "rtsp"
          },
          "protect_event_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Protect Event Id",
            "description": "UniFi Protect's native event ID"
          },
          "smart_detection_type": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "person",
                  "vehicle",
                  "package",
                  "animal",
                  "motion",
                  "ring"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Smart Detection Type",
            "description": "Protect smart detection type"
          },
          "is_doorbell_ring": {
            "type": "boolean",
            "title": "Is Doorbell Ring",
            "description": "Whether event was triggered by doorbell ring",
            "default": false
          },
          "fallback_reason": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Reason",
            "description": "Reason for fallback to snapshot analysis (e.g., 'clip_download_failed')"
          },
          "analysis_mode": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Mode",
            "description": "Analysis mode used (single_frame/multi_frame/video_native)"
          },
          "frame_count_used": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 10.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Count Used",
            "description": "Number of frames sent to AI for multi-frame analysis"
          },
          "audio_transcription": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Transcription",
            "description": "Transcribed speech from doorbell audio"
          },
          "ai_confidence": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Confidence",
            "description": "AI self-reported confidence score (0-100)"
          },
          "low_confidence": {
            "type": "boolean",
            "title": "Low Confidence",
            "description": "True if ai_confidence < 50 or vague description, flagging uncertain descriptions",
            "default": false
          },
          "vague_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vague Reason",
            "description": "Human-readable explanation of why description was flagged as vague"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "timestamp",
          "description",
          "confidence",
          "objects_detected"
        ],
        "title": "EventCreate",
        "description": "Schema for creating a new event via POST /api/v1/events",
        "examples": [
          {
            "alert_triggered": true,
            "camera_id": "550e8400-e29b-41d4-a716-446655440000",
            "confidence": 85,
            "description": "Person walking towards front door carrying a package",
            "objects_detected": [
              "person",
              "package"
            ],
            "thumbnail_base64": "/9j/4AAQSkZJRgABAQEAAA...",
            "timestamp": "2025-11-17T14:30:00Z"
          }
        ]
      },
      "EventListResponse": {
        "properties": {
          "events": {
            "items": {
              "$ref": "#/components/schemas/EventResponse"
            },
            "type": "array",
            "title": "Events",
            "description": "List of events in current page"
          },
          "total_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Count",
            "description": "Total number of events matching filters"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether more results are available"
          },
          "next_offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Offset",
            "description": "Offset for next page (None if no more results)"
          },
          "limit": {
            "type": "integer",
            "maximum": 500.0,
            "minimum": 1.0,
            "title": "Limit",
            "description": "Number of events per page"
          },
          "offset": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Offset",
            "description": "Current offset"
          }
        },
        "type": "object",
        "required": [
          "events",
          "total_count",
          "has_more",
          "limit",
          "offset"
        ],
        "title": "EventListResponse",
        "description": "Schema for paginated event list responses",
        "examples": [
          {
            "events": [
              {
                "alert_triggered": false,
                "camera_id": "550e8400-e29b-41d4-a716-446655440000",
                "confidence": 85,
                "created_at": "2025-11-17T14:30:01Z",
                "description": "Person walking towards front door",
                "id": "123e4567-e89b-12d3-a456-426614174000",
                "objects_detected": [
                  "person"
                ],
                "thumbnail_path": "thumbnails/2025-11-17/event_123e4567.jpg",
                "timestamp": "2025-11-17T14:30:00Z"
              }
            ],
            "has_more": true,
            "limit": 50,
            "next_offset": 50,
            "offset": 0,
            "total_count": 150
          }
        ]
      },
      "EventResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Event UUID"
          },
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID"
          },
          "camera_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Name",
            "description": "Human-readable camera name for display"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Event timestamp (UTC with timezone)"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "AI-generated description"
          },
          "confidence": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "AI confidence score (0-100)"
          },
          "objects_detected": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Objects Detected",
            "description": "Detected object types"
          },
          "thumbnail_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Path",
            "description": "Relative thumbnail path"
          },
          "thumbnail_base64": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Base64",
            "description": "Base64-encoded thumbnail"
          },
          "alert_triggered": {
            "type": "boolean",
            "title": "Alert Triggered",
            "description": "Whether alert was triggered"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Event source type (rtsp, usb, protect)",
            "default": "rtsp"
          },
          "protect_event_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Protect Event Id",
            "description": "UniFi Protect's native event ID"
          },
          "smart_detection_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smart Detection Type",
            "description": "Protect smart detection type (person/vehicle/package/animal/motion/ring)"
          },
          "is_doorbell_ring": {
            "type": "boolean",
            "title": "Is Doorbell Ring",
            "description": "Whether event was triggered by doorbell ring",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp (UTC)"
          },
          "correlation_group_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correlation Group Id",
            "description": "UUID linking correlated events across cameras"
          },
          "correlated_events": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/CorrelatedEventResponse"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correlated Events",
            "description": "Related events from same correlation group"
          },
          "provider_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Used",
            "description": "AI provider that generated description (openai/grok/claude/gemini)"
          },
          "fallback_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Reason",
            "description": "Reason for fallback to snapshot analysis (e.g., 'clip_download_failed')"
          },
          "analysis_mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Mode",
            "description": "Analysis mode used (single_frame/multi_frame/video_native)"
          },
          "frame_count_used": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Count Used",
            "description": "Number of frames sent to AI for multi-frame analysis"
          },
          "audio_transcription": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Transcription",
            "description": "Transcribed speech from doorbell audio"
          },
          "ai_confidence": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Confidence",
            "description": "AI self-reported confidence score (0-100)"
          },
          "low_confidence": {
            "type": "boolean",
            "title": "Low Confidence",
            "description": "True if ai_confidence < 50 or vague description, flagging uncertain descriptions",
            "default": false
          },
          "vague_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vague Reason",
            "description": "Human-readable explanation of why description was flagged as vague"
          },
          "reanalyzed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reanalyzed At",
            "description": "Timestamp of last re-analysis (null = never re-analyzed)"
          },
          "reanalysis_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Reanalysis Count",
            "description": "Number of re-analyses performed",
            "default": 0
          },
          "ai_cost": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Cost",
            "description": "Estimated cost in USD for AI analysis"
          },
          "key_frames_base64": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Key Frames Base64",
            "description": "Base64-encoded key frames used for AI analysis"
          },
          "frame_timestamps": {
            "anyOf": [
              {
                "items": {
                  "type": "number"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Timestamps",
            "description": "Timestamps in seconds for each key frame"
          },
          "matched_entity": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MatchedEntitySummary"
              },
              {
                "type": "null"
              }
            ],
            "description": "Matched recurring entity, if any"
          },
          "entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Id",
            "description": "UUID of linked entity (for assignment UI)"
          },
          "entity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Name",
            "description": "Name of linked entity (for display)"
          },
          "feedback": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FeedbackResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "User feedback on this event's description"
          },
          "audio_event_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Event Type",
            "description": "Detected audio event type (glass_break/gunshot/scream/doorbell/other)"
          },
          "audio_confidence": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Confidence",
            "description": "Audio event detection confidence score (0.0-1.0)"
          },
          "audio_duration_ms": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio Duration Ms",
            "description": "Duration of audio event in milliseconds"
          },
          "delivery_carrier": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Carrier",
            "description": "Detected delivery carrier (fedex/ups/usps/amazon/dhl)"
          },
          "delivery_carrier_display": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Delivery Carrier Display",
            "description": "Human-readable carrier name (FedEx/UPS/USPS/Amazon/DHL)"
          },
          "video_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Video Path",
            "description": "Path to stored full motion video file"
          }
        },
        "type": "object",
        "required": [
          "id",
          "camera_id",
          "timestamp",
          "description",
          "confidence",
          "objects_detected",
          "alert_triggered",
          "created_at"
        ],
        "title": "EventResponse",
        "description": "Schema for event API responses",
        "examples": [
          {
            "alert_triggered": true,
            "camera_id": "550e8400-e29b-41d4-a716-446655440000",
            "confidence": 85,
            "created_at": "2025-11-17T14:30:01Z",
            "description": "Person walking towards front door carrying a package",
            "id": "123e4567-e89b-12d3-a456-426614174000",
            "objects_detected": [
              "person",
              "package"
            ],
            "thumbnail_path": "thumbnails/2025-11-17/event_123e4567.jpg",
            "timestamp": "2025-11-17T14:30:00Z"
          }
        ]
      },
      "EventStatsResponse": {
        "properties": {
          "total_events": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Events",
            "description": "Total number of events in time range"
          },
          "events_by_camera": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Events By Camera",
            "description": "Event count grouped by camera_id"
          },
          "events_by_object_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Events By Object Type",
            "description": "Event count grouped by detected object type"
          },
          "average_confidence": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Average Confidence",
            "description": "Average confidence score"
          },
          "alerts_triggered": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Alerts Triggered",
            "description": "Number of events that triggered alerts"
          },
          "time_range": {
            "additionalProperties": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ]
            },
            "type": "object",
            "title": "Time Range",
            "description": "Time range of queried events (start, end)"
          }
        },
        "type": "object",
        "required": [
          "total_events",
          "events_by_camera",
          "events_by_object_type",
          "average_confidence",
          "alerts_triggered",
          "time_range"
        ],
        "title": "EventStatsResponse",
        "description": "Schema for event statistics aggregation",
        "examples": [
          {
            "alerts_triggered": 45,
            "average_confidence": 78.4,
            "events_by_camera": {
              "550e8400-e29b-41d4-a716-446655440000": 823,
              "660e8400-e29b-41d4-a716-446655440001": 424
            },
            "events_by_object_type": {
              "animal": 78,
              "package": 32,
              "person": 892,
              "vehicle": 245
            },
            "time_range": {
              "end": "2025-11-17T23:59:59Z",
              "start": "2025-11-10T00:00:00Z"
            },
            "total_events": 1247
          }
        ]
      },
      "EventSummaryForEntity": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Event UUID"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Event timestamp"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "AI-generated event description"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url",
            "description": "Thumbnail URL"
          },
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID"
          },
          "similarity_score": {
            "type": "number",
            "title": "Similarity Score",
            "description": "Similarity score when matched"
          }
        },
        "type": "object",
        "required": [
          "id",
          "timestamp",
          "description",
          "camera_id",
          "similarity_score"
        ],
        "title": "EventSummaryForEntity",
        "description": "Event summary for entity detail responses."
      },
      "FaceEmbeddingResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "UUID of the face embedding"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the associated event"
          },
          "entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Id",
            "description": "UUID of linked entity (if any)"
          },
          "bounding_box": {
            "additionalProperties": true,
            "type": "object",
            "title": "Bounding Box",
            "description": "Face bounding box: {x, y, width, height}"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Face detection confidence"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version",
            "description": "Model version used for embedding"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "When the face embedding was created (ISO 8601)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "bounding_box",
          "confidence",
          "model_version",
          "created_at"
        ],
        "title": "FaceEmbeddingResponse",
        "description": "Response model for a single face embedding."
      },
      "FaceEmbeddingsResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the event"
          },
          "face_count": {
            "type": "integer",
            "title": "Face Count",
            "description": "Number of face embeddings"
          },
          "faces": {
            "items": {
              "$ref": "#/components/schemas/FaceEmbeddingResponse"
            },
            "type": "array",
            "title": "Faces",
            "description": "List of face embeddings"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "face_count",
          "faces"
        ],
        "title": "FaceEmbeddingsResponse",
        "description": "Response model for face embeddings list."
      },
      "FaceStatsResponse": {
        "properties": {
          "total_face_embeddings": {
            "type": "integer",
            "title": "Total Face Embeddings",
            "description": "Total face embeddings in database"
          },
          "face_recognition_enabled": {
            "type": "boolean",
            "title": "Face Recognition Enabled",
            "description": "Whether face recognition is enabled"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version",
            "description": "Current face embedding model version"
          }
        },
        "type": "object",
        "required": [
          "total_face_embeddings",
          "face_recognition_enabled",
          "model_version"
        ],
        "title": "FaceStatsResponse",
        "description": "Response model for face embedding statistics."
      },
      "FeedbackCreate": {
        "properties": {
          "rating": {
            "type": "string",
            "enum": [
              "helpful",
              "not_helpful"
            ],
            "title": "Rating",
            "description": "User's rating of the AI description"
          },
          "correction": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction",
            "description": "Optional correction text (max 500 characters)"
          },
          "correction_type": {
            "anyOf": [
              {
                "type": "string",
                "const": "not_package"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Type",
            "description": "Type of correction (e.g., 'not_package' for package false positives)"
          }
        },
        "type": "object",
        "required": [
          "rating"
        ],
        "title": "FeedbackCreate",
        "description": "Schema for creating new feedback on an event."
      },
      "FeedbackResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id"
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id"
          },
          "rating": {
            "type": "string",
            "title": "Rating"
          },
          "correction": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction"
          },
          "correction_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Type"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "was_edited": {
            "type": "boolean",
            "title": "Was Edited",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "rating",
          "created_at"
        ],
        "title": "FeedbackResponse",
        "description": "Schema for feedback response."
      },
      "FeedbackStatsResponse": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of feedback submissions"
          },
          "helpful_count": {
            "type": "integer",
            "title": "Helpful Count",
            "description": "Total helpful ratings"
          },
          "not_helpful_count": {
            "type": "integer",
            "title": "Not Helpful Count",
            "description": "Total not helpful ratings"
          },
          "accuracy_rate": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Accuracy Rate",
            "description": "Overall accuracy rate as percentage (helpful / total * 100)"
          },
          "feedback_by_camera": {
            "additionalProperties": {
              "$ref": "#/components/schemas/CameraFeedbackStats"
            },
            "type": "object",
            "title": "Feedback By Camera",
            "description": "Feedback statistics grouped by camera ID"
          },
          "daily_trend": {
            "items": {
              "$ref": "#/components/schemas/DailyFeedbackStats"
            },
            "type": "array",
            "title": "Daily Trend",
            "description": "Daily feedback counts for trend analysis (last 30 days or specified range)"
          },
          "top_corrections": {
            "items": {
              "$ref": "#/components/schemas/CorrectionSummary"
            },
            "type": "array",
            "title": "Top Corrections",
            "description": "Most common correction patterns (top 10)"
          },
          "summary_feedback": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SummaryFeedbackStats"
              },
              {
                "type": "null"
              }
            ],
            "description": "Statistics for summary feedback (null if no summary feedback exists)"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "helpful_count",
          "not_helpful_count",
          "accuracy_rate"
        ],
        "title": "FeedbackStatsResponse",
        "description": "Aggregate feedback statistics response.\n\nProvides overall accuracy metrics, per-camera breakdown, daily trends,\nand common correction patterns for AI description quality monitoring.\nStory P9-3.6: Includes summary feedback statistics."
      },
      "FeedbackUpdate": {
        "properties": {
          "rating": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "helpful",
                  "not_helpful"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Rating",
            "description": "Updated rating (optional)"
          },
          "correction": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction",
            "description": "Updated correction text (max 500 characters)"
          },
          "correction_type": {
            "anyOf": [
              {
                "type": "string",
                "const": "not_package"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Type",
            "description": "Type of correction (e.g., 'not_package' for package false positives)"
          }
        },
        "type": "object",
        "title": "FeedbackUpdate",
        "description": "Schema for updating existing feedback."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HomeKitConfigResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "bridge_name": {
            "type": "string",
            "title": "Bridge Name"
          },
          "port": {
            "type": "integer",
            "title": "Port"
          },
          "motion_reset_seconds": {
            "type": "integer",
            "title": "Motion Reset Seconds"
          },
          "max_motion_duration": {
            "type": "integer",
            "title": "Max Motion Duration"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "enabled",
          "bridge_name",
          "port",
          "motion_reset_seconds",
          "max_motion_duration"
        ],
        "title": "HomeKitConfigResponse",
        "description": "HomeKit configuration response.",
        "example": {
          "bridge_name": "ArgusAI",
          "created_at": "2025-12-14T10:00:00Z",
          "enabled": true,
          "id": 1,
          "max_motion_duration": 300,
          "motion_reset_seconds": 30,
          "port": 51826,
          "updated_at": "2025-12-14T10:00:00Z"
        }
      },
      "HomeKitConnectivityTestResponse": {
        "properties": {
          "mdns_visible": {
            "type": "boolean",
            "title": "Mdns Visible",
            "description": "Whether the _hap._tcp service is visible via mDNS"
          },
          "discovered_as": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discovered As",
            "description": "Service name as discovered (e.g., 'ArgusAI._hap._tcp.local')"
          },
          "port_accessible": {
            "type": "boolean",
            "title": "Port Accessible",
            "description": "Whether the HAP port (TCP) is accessible"
          },
          "network_binding": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/NetworkBindingInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "Current network binding configuration"
          },
          "firewall_issues": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Firewall Issues",
            "description": "Detected firewall or network issues"
          },
          "recommendations": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Recommendations",
            "description": "Troubleshooting recommendations based on test results"
          },
          "test_duration_ms": {
            "type": "integer",
            "title": "Test Duration Ms",
            "description": "Time taken to complete the test in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "mdns_visible",
          "port_accessible",
          "test_duration_ms"
        ],
        "title": "HomeKitConnectivityTestResponse",
        "description": "Response from HomeKit connectivity test endpoint (Story P7-1.2 AC1, AC2, AC6).\n\nTests mDNS visibility and port accessibility for troubleshooting discovery issues.",
        "example": {
          "discovered_as": "ArgusAI._hap._tcp.local",
          "firewall_issues": [],
          "mdns_visible": true,
          "network_binding": {
            "ip": "192.168.1.100",
            "port": 51826
          },
          "port_accessible": true,
          "recommendations": [],
          "test_duration_ms": 1250
        }
      },
      "HomeKitDiagnosticEntry": {
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event occurred"
          },
          "level": {
            "type": "string",
            "pattern": "^(debug|info|warning|error)$",
            "title": "Level",
            "description": "Log level: debug, info, warning, error"
          },
          "category": {
            "type": "string",
            "pattern": "^(lifecycle|pairing|event|delivery|network|mdns)$",
            "title": "Category",
            "description": "Event category: lifecycle, pairing, event, delivery, network, mdns"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable log message"
          },
          "details": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Details",
            "description": "Additional structured data (camera_id, sensor_type, etc.)"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "level",
          "category",
          "message"
        ],
        "title": "HomeKitDiagnosticEntry",
        "description": "A single diagnostic log entry for HomeKit operations (Story P7-1.1 AC1-4, P7-1.3 AC2).\n\nCategories:\n- lifecycle: Bridge start/stop, driver events\n- pairing: Pairing attempts, success/failure\n- event: Characteristic updates (motion, occupancy, etc.)\n- delivery: Event delivery confirmation logs (Story P7-1.3)\n- network: IP binding, port info\n- mdns: mDNS/Bonjour advertisement status",
        "example": {
          "category": "event",
          "details": {
            "camera_id": "abc-123",
            "reset_seconds": 30,
            "sensor_type": "motion"
          },
          "level": "info",
          "message": "Motion triggered for Front Door",
          "timestamp": "2025-12-17T10:30:00Z"
        }
      },
      "HomeKitDiagnosticsResponse": {
        "properties": {
          "bridge_running": {
            "type": "boolean",
            "title": "Bridge Running",
            "description": "Whether the HAP server is running"
          },
          "mdns_advertising": {
            "type": "boolean",
            "title": "Mdns Advertising",
            "description": "Whether mDNS/Bonjour service is advertising"
          },
          "network_binding": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/NetworkBindingInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "IP/port binding information"
          },
          "connected_clients": {
            "type": "integer",
            "title": "Connected Clients",
            "description": "Number of currently connected HomeKit clients",
            "default": 0
          },
          "last_event_delivery": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LastEventDeliveryInfo"
              },
              {
                "type": "null"
              }
            ],
            "description": "Information about the most recent event delivery"
          },
          "sensor_deliveries": {
            "items": {
              "$ref": "#/components/schemas/LastEventDeliveryInfo"
            },
            "type": "array",
            "title": "Sensor Deliveries",
            "description": "Per-sensor delivery history (Story P7-1.4 AC3)"
          },
          "recent_logs": {
            "items": {
              "$ref": "#/components/schemas/HomeKitDiagnosticEntry"
            },
            "type": "array",
            "title": "Recent Logs",
            "description": "Recent diagnostic log entries (newest first)"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Current warning messages"
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Current error messages"
          }
        },
        "type": "object",
        "required": [
          "bridge_running",
          "mdns_advertising"
        ],
        "title": "HomeKitDiagnosticsResponse",
        "description": "Complete diagnostic information for HomeKit troubleshooting (Story P7-1.1 AC5).\n\nReturned by GET /api/v1/homekit/diagnostics endpoint.",
        "example": {
          "bridge_running": true,
          "connected_clients": 2,
          "errors": [],
          "last_event_delivery": {
            "camera_id": "abc-123",
            "camera_name": "Front Door",
            "delivered": true,
            "sensor_type": "motion",
            "timestamp": "2025-12-17T10:30:00Z"
          },
          "mdns_advertising": true,
          "network_binding": {
            "interface": "en0",
            "ip": "192.168.1.100",
            "port": 51826
          },
          "recent_logs": [
            {
              "category": "event",
              "details": {
                "camera_id": "abc-123",
                "reset_seconds": 30
              },
              "level": "info",
              "message": "Motion triggered for Front Door",
              "timestamp": "2025-12-17T10:30:00Z"
            }
          ],
          "sensor_deliveries": [
            {
              "camera_id": "abc-123",
              "camera_name": "Front Door",
              "delivered": true,
              "sensor_type": "motion",
              "timestamp": "2025-12-17T10:30:00Z"
            },
            {
              "camera_id": "def-456",
              "camera_name": "Backyard",
              "delivered": true,
              "sensor_type": "occupancy",
              "timestamp": "2025-12-17T10:25:00Z"
            }
          ],
          "warnings": []
        }
      },
      "HomeKitDisableResponse": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "default": false
          },
          "running": {
            "type": "boolean",
            "title": "Running",
            "default": false
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "HomeKitDisableResponse",
        "description": "Response after disabling HomeKit.",
        "example": {
          "enabled": false,
          "message": "HomeKit bridge disabled",
          "running": false
        }
      },
      "HomeKitEnableRequest": {
        "properties": {
          "bridge_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 64
              },
              {
                "type": "null"
              }
            ],
            "title": "Bridge Name",
            "description": "Bridge display name",
            "default": "ArgusAI"
          },
          "port": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 65535.0,
                "minimum": 1024.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Port",
            "description": "HAP server port",
            "default": 51826
          }
        },
        "type": "object",
        "title": "HomeKitEnableRequest",
        "description": "Request body for enabling HomeKit.",
        "example": {
          "bridge_name": "ArgusAI",
          "port": 51826
        }
      },
      "HomeKitEnableResponse": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "default": true
          },
          "running": {
            "type": "boolean",
            "title": "Running"
          },
          "port": {
            "type": "integer",
            "title": "Port"
          },
          "setup_code": {
            "type": "string",
            "title": "Setup Code",
            "description": "Pairing code in XXX-XX-XXX format"
          },
          "setup_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Setup Uri",
            "description": "X-HM:// Setup URI for QR code (Story P5-1.2)"
          },
          "qr_code_data": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qr Code Data",
            "description": "Base64 PNG QR code for pairing"
          },
          "bridge_name": {
            "type": "string",
            "title": "Bridge Name"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "running",
          "port",
          "setup_code",
          "bridge_name",
          "message"
        ],
        "title": "HomeKitEnableResponse",
        "description": "Response after enabling HomeKit.",
        "example": {
          "bridge_name": "ArgusAI",
          "enabled": true,
          "message": "HomeKit bridge enabled successfully",
          "port": 51826,
          "qr_code_data": "data:image/png;base64,...",
          "running": true,
          "setup_code": "123-45-678",
          "setup_uri": "X-HM://0023B6WQLAB1C"
        }
      },
      "HomeKitStatusResponse": {
        "properties": {
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether HAP-python is installed and available"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether HomeKit is enabled in config"
          },
          "running": {
            "type": "boolean",
            "title": "Running",
            "description": "Whether bridge is currently running"
          },
          "paired": {
            "type": "boolean",
            "title": "Paired",
            "description": "Whether any iOS devices are paired"
          },
          "accessory_count": {
            "type": "integer",
            "title": "Accessory Count",
            "description": "Number of motion sensor accessories in bridge"
          },
          "camera_count": {
            "type": "integer",
            "title": "Camera Count",
            "description": "Number of camera accessories (Story P5-1.3)",
            "default": 0
          },
          "active_streams": {
            "type": "integer",
            "title": "Active Streams",
            "description": "Currently active camera streams (Story P5-1.3)",
            "default": 0
          },
          "bridge_name": {
            "type": "string",
            "title": "Bridge Name",
            "description": "Bridge name shown in Apple Home"
          },
          "setup_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Setup Code",
            "description": "Pairing code (hidden if paired)"
          },
          "setup_uri": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Setup Uri",
            "description": "X-HM:// Setup URI for QR code (Story P5-1.2)"
          },
          "qr_code_data": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qr Code Data",
            "description": "Base64 PNG QR code for pairing (hidden if paired)"
          },
          "port": {
            "type": "integer",
            "title": "Port",
            "description": "HAP server port"
          },
          "ffmpeg_available": {
            "type": "boolean",
            "title": "Ffmpeg Available",
            "description": "Whether ffmpeg is available for streaming (Story P5-1.3)",
            "default": false
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if any"
          }
        },
        "type": "object",
        "required": [
          "available",
          "enabled",
          "running",
          "paired",
          "accessory_count",
          "bridge_name",
          "port"
        ],
        "title": "HomeKitStatusResponse",
        "description": "HomeKit bridge status response.",
        "example": {
          "accessory_count": 3,
          "active_streams": 1,
          "available": true,
          "bridge_name": "ArgusAI",
          "camera_count": 3,
          "enabled": true,
          "ffmpeg_available": true,
          "paired": false,
          "port": 51826,
          "qr_code_data": "data:image/png;base64,...",
          "running": true,
          "setup_code": "123-45-678",
          "setup_uri": "X-HM://0023B6WQLAB1C"
        }
      },
      "HomeKitTestEventRequest": {
        "properties": {
          "camera_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Camera Id",
            "description": "Camera identifier (UUID) to trigger the event for"
          },
          "event_type": {
            "type": "string",
            "enum": [
              "motion",
              "occupancy",
              "vehicle",
              "animal",
              "package",
              "doorbell"
            ],
            "title": "Event Type",
            "description": "Type of event to trigger: motion, occupancy, vehicle, animal, package, or doorbell",
            "default": "motion"
          }
        },
        "type": "object",
        "required": [
          "camera_id"
        ],
        "title": "HomeKitTestEventRequest",
        "description": "Request body for triggering a test HomeKit event (Story P7-1.3 AC5).\n\nUsed by POST /api/v1/homekit/test-event to manually trigger events\nfor testing HomeKit integration and event delivery.",
        "example": {
          "camera_id": "abc-123-def-456",
          "event_type": "motion"
        }
      },
      "HomeKitTestEventResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the event was triggered successfully"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera identifier that was triggered"
          },
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Type of event that was triggered"
          },
          "sensor_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sensor Name",
            "description": "Name of the HomeKit sensor that was triggered"
          },
          "delivered_to_clients": {
            "type": "integer",
            "title": "Delivered To Clients",
            "description": "Number of connected HomeKit clients that received the event",
            "default": 0
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event was triggered"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "camera_id",
          "event_type"
        ],
        "title": "HomeKitTestEventResponse",
        "description": "Response from test event trigger (Story P7-1.3 AC5).\n\nConfirms whether the test event was successfully triggered and\nprovides details about delivery to connected HomeKit clients.",
        "example": {
          "camera_id": "abc-123-def-456",
          "delivered_to_clients": 2,
          "event_type": "motion",
          "message": "Motion event triggered for Front Door Motion",
          "sensor_name": "Front Door Motion",
          "success": true,
          "timestamp": "2025-12-18T10:30:00Z"
        }
      },
      "HomekitEnableRequest": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Whether to enable HomeKit integration"
          }
        },
        "type": "object",
        "required": [
          "enabled"
        ],
        "title": "HomekitEnableRequest",
        "description": "Request to enable/disable HomeKit integration.",
        "example": {
          "enabled": true
        }
      },
      "HomekitResetResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "new_setup_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Setup Code"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "HomekitResetResponse",
        "description": "Response for HomeKit pairing reset.",
        "example": {
          "message": "HomeKit pairing reset. Please re-pair with the Home app.",
          "new_setup_code": "123-45-678",
          "success": true
        }
      },
      "HomekitStatusResponse": {
        "properties": {
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "running": {
            "type": "boolean",
            "title": "Running"
          },
          "paired": {
            "type": "boolean",
            "title": "Paired"
          },
          "accessory_count": {
            "type": "integer",
            "title": "Accessory Count"
          },
          "bridge_name": {
            "type": "string",
            "title": "Bridge Name"
          },
          "setup_code": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Setup Code"
          },
          "qr_code_data": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Qr Code Data"
          },
          "port": {
            "type": "integer",
            "title": "Port"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether HAP-python is installed"
          }
        },
        "type": "object",
        "required": [
          "enabled",
          "running",
          "paired",
          "accessory_count",
          "bridge_name",
          "port",
          "available"
        ],
        "title": "HomekitStatusResponse",
        "description": "HomeKit integration status response.",
        "example": {
          "accessory_count": 3,
          "available": true,
          "bridge_name": "ArgusAI",
          "enabled": true,
          "paired": false,
          "port": 51826,
          "qr_code_data": "data:image/png;base64,...",
          "running": true,
          "setup_code": "031-45-154"
        }
      },
      "LastEventDeliveryInfo": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera that triggered the event"
          },
          "camera_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Name",
            "description": "Human-readable camera name (Story P7-1.4)"
          },
          "sensor_type": {
            "type": "string",
            "title": "Sensor Type",
            "description": "Type of sensor (motion, occupancy, vehicle, etc.)"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event was delivered"
          },
          "delivered": {
            "type": "boolean",
            "title": "Delivered",
            "description": "Whether delivery was successful"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "sensor_type",
          "timestamp",
          "delivered"
        ],
        "title": "LastEventDeliveryInfo",
        "description": "Information about the most recent event delivery.",
        "example": {
          "camera_id": "abc-123",
          "camera_name": "Front Door",
          "delivered": true,
          "sensor_type": "motion",
          "timestamp": "2025-12-17T10:30:00Z"
        }
      },
      "LogEntry": {
        "properties": {
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "level": {
            "type": "string",
            "title": "Level"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "module": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Module"
          },
          "logger": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Logger"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id"
          },
          "function": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Function"
          },
          "line": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line"
          },
          "extra": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "level",
          "message"
        ],
        "title": "LogEntry",
        "description": "Single log entry from JSON log file"
      },
      "LogFilesResponse": {
        "properties": {
          "files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Files"
          },
          "directory": {
            "type": "string",
            "title": "Directory"
          }
        },
        "type": "object",
        "required": [
          "files",
          "directory"
        ],
        "title": "LogFilesResponse",
        "description": "Response for available log files endpoint"
      },
      "LoginRequest": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "Username"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password",
            "description": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "description": "Login request body"
      },
      "LoginResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type",
            "default": "bearer"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse",
            "description": "User information"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "user"
        ],
        "title": "LoginResponse",
        "description": "Login response with user info"
      },
      "LogsResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/LogEntry"
            },
            "type": "array",
            "title": "Entries"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "limit": {
            "type": "integer",
            "title": "Limit"
          },
          "offset": {
            "type": "integer",
            "title": "Offset"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More"
          }
        },
        "type": "object",
        "required": [
          "entries",
          "total",
          "limit",
          "offset",
          "has_more"
        ],
        "title": "LogsResponse",
        "description": "Response for log query endpoint"
      },
      "MQTTConfigResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "broker_host": {
            "type": "string",
            "title": "Broker Host"
          },
          "broker_port": {
            "type": "integer",
            "title": "Broker Port"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "topic_prefix": {
            "type": "string",
            "title": "Topic Prefix"
          },
          "discovery_prefix": {
            "type": "string",
            "title": "Discovery Prefix"
          },
          "discovery_enabled": {
            "type": "boolean",
            "title": "Discovery Enabled"
          },
          "qos": {
            "type": "integer",
            "title": "Qos"
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled"
          },
          "retain_messages": {
            "type": "boolean",
            "title": "Retain Messages"
          },
          "use_tls": {
            "type": "boolean",
            "title": "Use Tls"
          },
          "message_expiry_seconds": {
            "type": "integer",
            "title": "Message Expiry Seconds",
            "description": "MQTT 5.0 message expiry in seconds (60-3600)",
            "default": 300
          },
          "availability_topic": {
            "type": "string",
            "title": "Availability Topic",
            "description": "Topic for birth/will messages (defaults to {topic_prefix}/status)",
            "default": ""
          },
          "birth_message": {
            "type": "string",
            "title": "Birth Message",
            "description": "Message published on connect",
            "default": "online"
          },
          "will_message": {
            "type": "string",
            "title": "Will Message",
            "description": "Message published on unexpected disconnect",
            "default": "offline"
          },
          "has_password": {
            "type": "boolean",
            "title": "Has Password",
            "description": "Whether password is configured"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "broker_host",
          "broker_port",
          "topic_prefix",
          "discovery_prefix",
          "discovery_enabled",
          "qos",
          "enabled",
          "retain_messages",
          "use_tls",
          "has_password"
        ],
        "title": "MQTTConfigResponse",
        "description": "MQTT configuration response (password omitted).",
        "example": {
          "availability_topic": "liveobject/status",
          "birth_message": "online",
          "broker_host": "192.168.1.100",
          "broker_port": 1883,
          "created_at": "2025-12-10T10:00:00Z",
          "discovery_enabled": true,
          "discovery_prefix": "homeassistant",
          "enabled": true,
          "has_password": true,
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "message_expiry_seconds": 300,
          "qos": 1,
          "retain_messages": true,
          "topic_prefix": "liveobject",
          "updated_at": "2025-12-10T10:00:00Z",
          "use_tls": false,
          "username": "homeassistant",
          "will_message": "offline"
        }
      },
      "MQTTConfigUpdate": {
        "properties": {
          "broker_host": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Broker Host",
            "description": "MQTT broker hostname or IP"
          },
          "broker_port": {
            "type": "integer",
            "maximum": 65535.0,
            "minimum": 1.0,
            "title": "Broker Port",
            "description": "MQTT broker port",
            "default": 1883
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "description": "Authentication username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "Authentication password (plain text)"
          },
          "topic_prefix": {
            "type": "string",
            "maxLength": 100,
            "title": "Topic Prefix",
            "description": "MQTT topic prefix",
            "default": "liveobject"
          },
          "discovery_prefix": {
            "type": "string",
            "maxLength": 100,
            "title": "Discovery Prefix",
            "description": "Home Assistant discovery prefix",
            "default": "homeassistant"
          },
          "discovery_enabled": {
            "type": "boolean",
            "title": "Discovery Enabled",
            "description": "Enable Home Assistant discovery",
            "default": true
          },
          "qos": {
            "type": "integer",
            "maximum": 2.0,
            "minimum": 0.0,
            "title": "Qos",
            "description": "Quality of Service level (0, 1, or 2)",
            "default": 1
          },
          "enabled": {
            "type": "boolean",
            "title": "Enabled",
            "description": "Enable MQTT publishing",
            "default": true
          },
          "retain_messages": {
            "type": "boolean",
            "title": "Retain Messages",
            "description": "Retain messages on broker",
            "default": true
          },
          "use_tls": {
            "type": "boolean",
            "title": "Use Tls",
            "description": "Use TLS/SSL connection",
            "default": false
          },
          "message_expiry_seconds": {
            "type": "integer",
            "maximum": 3600.0,
            "minimum": 60.0,
            "title": "Message Expiry Seconds",
            "description": "MQTT 5.0 message expiry in seconds (60-3600)",
            "default": 300
          },
          "availability_topic": {
            "type": "string",
            "maxLength": 255,
            "title": "Availability Topic",
            "description": "Topic for birth/will messages (leave empty for default)",
            "default": ""
          },
          "birth_message": {
            "type": "string",
            "maxLength": 100,
            "title": "Birth Message",
            "description": "Message published on connect",
            "default": "online"
          },
          "will_message": {
            "type": "string",
            "maxLength": 100,
            "title": "Will Message",
            "description": "Message published on unexpected disconnect",
            "default": "offline"
          }
        },
        "type": "object",
        "required": [
          "broker_host"
        ],
        "title": "MQTTConfigUpdate",
        "description": "Request body for updating MQTT configuration.",
        "example": {
          "availability_topic": "",
          "birth_message": "online",
          "broker_host": "192.168.1.100",
          "broker_port": 1883,
          "discovery_enabled": true,
          "discovery_prefix": "homeassistant",
          "enabled": true,
          "message_expiry_seconds": 300,
          "password": "mqtt_password",
          "qos": 1,
          "retain_messages": true,
          "topic_prefix": "liveobject",
          "use_tls": false,
          "username": "homeassistant",
          "will_message": "offline"
        }
      },
      "MQTTStatusResponse": {
        "properties": {
          "connected": {
            "type": "boolean",
            "title": "Connected"
          },
          "broker": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Broker"
          },
          "last_connected_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Connected At"
          },
          "messages_published": {
            "type": "integer",
            "title": "Messages Published"
          },
          "last_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Error"
          },
          "reconnect_attempt": {
            "type": "integer",
            "title": "Reconnect Attempt",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "connected",
          "messages_published"
        ],
        "title": "MQTTStatusResponse",
        "description": "MQTT connection status response.",
        "example": {
          "broker": "192.168.1.100:1883",
          "connected": true,
          "last_connected_at": "2025-12-10T10:00:00Z",
          "messages_published": 1234,
          "reconnect_attempt": 0
        }
      },
      "MQTTTestRequest": {
        "properties": {
          "broker_host": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Broker Host"
          },
          "broker_port": {
            "type": "integer",
            "maximum": 65535.0,
            "minimum": 1.0,
            "title": "Broker Port",
            "default": 1883
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "use_tls": {
            "type": "boolean",
            "title": "Use Tls",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "broker_host"
        ],
        "title": "MQTTTestRequest",
        "description": "Request body for testing MQTT connection.",
        "example": {
          "broker_host": "192.168.1.100",
          "broker_port": 1883,
          "password": "mqtt_password",
          "use_tls": false,
          "username": "homeassistant"
        }
      },
      "MQTTTestResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "MQTTTestResponse",
        "description": "Response for MQTT connection test.",
        "example": {
          "message": "Connected to 192.168.1.100:1883",
          "success": true
        }
      },
      "MarkReadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count"
          }
        },
        "type": "object",
        "required": [
          "success",
          "updated_count"
        ],
        "title": "MarkReadResponse",
        "description": "Response for mark as read operations."
      },
      "MatchedEntitySummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Entity UUID"
          },
          "entity_type": {
            "type": "string",
            "title": "Entity Type",
            "description": "Entity type: person, vehicle, or unknown"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name for the entity"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "Timestamp of first occurrence"
          },
          "occurrence_count": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Occurrence Count",
            "description": "Number of times this entity has been seen"
          },
          "similarity_score": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity Score",
            "description": "Match similarity score"
          }
        },
        "type": "object",
        "required": [
          "id",
          "entity_type",
          "first_seen_at",
          "occurrence_count"
        ],
        "title": "MatchedEntitySummary",
        "description": "Summary of a matched entity for event responses (Story P4-3.3)",
        "examples": [
          {
            "entity_type": "person",
            "first_seen_at": "2025-11-01T10:30:00Z",
            "id": "550e8400-e29b-41d4-a716-446655440123",
            "name": "Mail Carrier",
            "occurrence_count": 15,
            "similarity_score": 0.87
          }
        ]
      },
      "MergeEntitiesRequest": {
        "properties": {
          "primary_entity_id": {
            "type": "string",
            "title": "Primary Entity Id",
            "description": "UUID of the entity to keep (receives all events)"
          },
          "secondary_entity_id": {
            "type": "string",
            "title": "Secondary Entity Id",
            "description": "UUID of the entity to merge into primary and delete"
          }
        },
        "type": "object",
        "required": [
          "primary_entity_id",
          "secondary_entity_id"
        ],
        "title": "MergeEntitiesRequest",
        "description": "Request model for merging two entities (Story P9-4.5)."
      },
      "MergeEntitiesResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the merge succeeded"
          },
          "merged_entity_id": {
            "type": "string",
            "title": "Merged Entity Id",
            "description": "UUID of the primary entity that was kept"
          },
          "merged_entity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Merged Entity Name",
            "description": "Name of the primary entity"
          },
          "events_moved": {
            "type": "integer",
            "title": "Events Moved",
            "description": "Number of events moved to primary entity"
          },
          "deleted_entity_id": {
            "type": "string",
            "title": "Deleted Entity Id",
            "description": "UUID of the deleted secondary entity"
          },
          "deleted_entity_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted Entity Name",
            "description": "Name of the deleted entity"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "merged_entity_id",
          "events_moved",
          "deleted_entity_id",
          "message"
        ],
        "title": "MergeEntitiesResponse",
        "description": "Response model for entity merge operation (Story P9-4.5)."
      },
      "MessageResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "MessageResponse",
        "description": "Simple message response"
      },
      "MetaResponse": {
        "properties": {
          "request_id": {
            "type": "string",
            "title": "Request Id",
            "description": "Unique request identifier"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Count",
            "description": "Number of items (for list responses)"
          }
        },
        "type": "object",
        "title": "MetaResponse",
        "description": "Standard meta response object"
      },
      "MotionConfigResponse": {
        "properties": {
          "motion_enabled": {
            "type": "boolean",
            "title": "Motion Enabled"
          },
          "motion_sensitivity": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Motion Sensitivity"
          },
          "motion_cooldown": {
            "type": "integer",
            "title": "Motion Cooldown"
          },
          "motion_algorithm": {
            "type": "string",
            "enum": [
              "mog2",
              "knn",
              "frame_diff"
            ],
            "title": "Motion Algorithm"
          }
        },
        "type": "object",
        "required": [
          "motion_enabled",
          "motion_sensitivity",
          "motion_cooldown",
          "motion_algorithm"
        ],
        "title": "MotionConfigResponse",
        "description": "Schema for motion configuration response"
      },
      "MotionConfigUpdate": {
        "properties": {
          "motion_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Enabled",
            "description": "Whether motion detection is active"
          },
          "motion_sensitivity": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Sensitivity",
            "description": "Motion detection sensitivity level"
          },
          "motion_cooldown": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 300.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Cooldown",
            "description": "Seconds between motion triggers (0-300)"
          },
          "motion_algorithm": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "mog2",
                  "knn",
                  "frame_diff"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Algorithm",
            "description": "Motion detection algorithm"
          }
        },
        "type": "object",
        "title": "MotionConfigUpdate",
        "description": "Schema for updating motion detection configuration",
        "examples": [
          {
            "motion_algorithm": "mog2",
            "motion_cooldown": 60,
            "motion_enabled": true,
            "motion_sensitivity": "medium"
          }
        ]
      },
      "MotionEventResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Event UUID"
          },
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Camera UUID"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Motion detection timestamp"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence score"
          },
          "motion_intensity": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Intensity",
            "description": "Motion intensity metric"
          },
          "algorithm_used": {
            "type": "string",
            "title": "Algorithm Used",
            "description": "Algorithm that detected motion"
          },
          "bounding_box": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bounding Box",
            "description": "Motion bounding box (JSON)"
          },
          "frame_thumbnail": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Thumbnail",
            "description": "Base64-encoded JPEG thumbnail"
          },
          "ai_event_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Event Id",
            "description": "Linked AI event ID (F3)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "camera_id",
          "timestamp",
          "confidence",
          "algorithm_used",
          "created_at"
        ],
        "title": "MotionEventResponse",
        "description": "Schema for motion event API response",
        "examples": [
          {
            "algorithm_used": "mog2",
            "bounding_box": {
              "height": 400,
              "width": 250,
              "x": 150,
              "y": 75
            },
            "camera_id": "660e8400-e29b-41d4-a716-446655440000",
            "confidence": 0.92,
            "created_at": "2025-11-15T14:30:01Z",
            "frame_thumbnail": "data:image/jpeg;base64,/9j/4AAQSkZJRg...",
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "motion_intensity": 15.5,
            "timestamp": "2025-11-15T14:30:00Z"
          }
        ]
      },
      "MotionEventStatsResponse": {
        "properties": {
          "total_events": {
            "type": "integer",
            "title": "Total Events",
            "description": "Total number of motion events"
          },
          "events_by_camera": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Events By Camera",
            "description": "Event counts by camera ID"
          },
          "events_by_hour": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Events By Hour",
            "description": "Event counts by hour (0-23)"
          },
          "average_confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Average Confidence",
            "description": "Average confidence score"
          }
        },
        "type": "object",
        "required": [
          "total_events",
          "events_by_camera",
          "events_by_hour",
          "average_confidence"
        ],
        "title": "MotionEventStatsResponse",
        "description": "Schema for motion event statistics response",
        "examples": [
          {
            "average_confidence": 0.87,
            "events_by_camera": {
              "camera-1": 89,
              "camera-2": 68
            },
            "events_by_hour": {
              "0": 2,
              "1": 1,
              "10": 8,
              "11": 7,
              "12": 9,
              "13": 11,
              "14": 14,
              "15": 13,
              "16": 9,
              "17": 7,
              "18": 8,
              "19": 5,
              "2": 0,
              "20": 3,
              "21": 1,
              "22": 1,
              "23": 0,
              "3": 0,
              "4": 0,
              "5": 3,
              "6": 12,
              "7": 18,
              "8": 15,
              "9": 10
            },
            "total_events": 157
          }
        ]
      },
      "MotionTestRequest": {
        "properties": {
          "sensitivity": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Sensitivity",
            "description": "Override sensitivity for test"
          },
          "algorithm": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "mog2",
                  "knn",
                  "frame_diff"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Algorithm",
            "description": "Override algorithm for test"
          }
        },
        "type": "object",
        "title": "MotionTestRequest",
        "description": "Schema for motion test endpoint request",
        "examples": [
          {
            "algorithm": "mog2",
            "sensitivity": "high"
          }
        ]
      },
      "MotionTestResponse": {
        "properties": {
          "motion_detected": {
            "type": "boolean",
            "title": "Motion Detected",
            "description": "Whether motion was detected"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence score"
          },
          "bounding_box": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BoundingBox"
              },
              {
                "type": "null"
              }
            ],
            "description": "Motion bounding box"
          },
          "preview_image": {
            "type": "string",
            "title": "Preview Image",
            "description": "Base64-encoded preview image with overlay"
          }
        },
        "type": "object",
        "required": [
          "motion_detected",
          "confidence",
          "preview_image"
        ],
        "title": "MotionTestResponse",
        "description": "Schema for motion test endpoint response",
        "examples": [
          {
            "bounding_box": {
              "height": 300,
              "width": 200,
              "x": 100,
              "y": 50
            },
            "confidence": 0.85,
            "motion_detected": true,
            "preview_image": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."
          }
        ]
      },
      "NetworkBindingInfo": {
        "properties": {
          "ip": {
            "type": "string",
            "title": "Ip",
            "description": "IP address the bridge is bound to"
          },
          "port": {
            "type": "integer",
            "title": "Port",
            "description": "Port number"
          },
          "interface": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Interface",
            "description": "Network interface name if specific"
          }
        },
        "type": "object",
        "required": [
          "ip",
          "port"
        ],
        "title": "NetworkBindingInfo",
        "description": "Network binding information for the HomeKit bridge.",
        "example": {
          "interface": "en0",
          "ip": "192.168.1.100",
          "port": 51826
        }
      },
      "NotificationListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/NotificationResponse"
            },
            "type": "array",
            "title": "Data"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "unread_count": {
            "type": "integer",
            "title": "Unread Count"
          }
        },
        "type": "object",
        "required": [
          "data",
          "total_count",
          "unread_count"
        ],
        "title": "NotificationListResponse",
        "description": "Response schema for notification list."
      },
      "NotificationPreferencesRequest": {
        "properties": {
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Push subscription endpoint URL"
          }
        },
        "type": "object",
        "required": [
          "endpoint"
        ],
        "title": "NotificationPreferencesRequest",
        "description": "Request body for getting preferences by subscription endpoint."
      },
      "NotificationPreferencesResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Preference record UUID"
          },
          "subscription_id": {
            "type": "string",
            "title": "Subscription Id",
            "description": "Associated subscription UUID"
          },
          "enabled_cameras": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled Cameras",
            "description": "List of enabled camera IDs (null = all)"
          },
          "enabled_object_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled Object Types",
            "description": "List of enabled object types (null = all)"
          },
          "quiet_hours_enabled": {
            "type": "boolean",
            "title": "Quiet Hours Enabled",
            "description": "Whether quiet hours are enabled"
          },
          "quiet_hours_start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quiet Hours Start",
            "description": "Quiet hours start time (HH:MM)"
          },
          "quiet_hours_end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quiet Hours End",
            "description": "Quiet hours end time (HH:MM)"
          },
          "timezone": {
            "type": "string",
            "title": "Timezone",
            "description": "IANA timezone string"
          },
          "sound_enabled": {
            "type": "boolean",
            "title": "Sound Enabled",
            "description": "Whether notification sound is enabled"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "ISO 8601 creation timestamp"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "description": "ISO 8601 last update timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "subscription_id",
          "quiet_hours_enabled",
          "timezone",
          "sound_enabled"
        ],
        "title": "NotificationPreferencesResponse",
        "description": "Response containing notification preferences.",
        "example": {
          "created_at": "2025-12-10T10:30:00Z",
          "enabled_object_types": [
            "person",
            "vehicle"
          ],
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "quiet_hours_enabled": true,
          "quiet_hours_end": "07:00",
          "quiet_hours_start": "22:00",
          "sound_enabled": true,
          "subscription_id": "660e8400-e29b-41d4-a716-446655440001",
          "timezone": "America/New_York",
          "updated_at": "2025-12-10T14:22:00Z"
        }
      },
      "NotificationPreferencesUpdate": {
        "properties": {
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Push subscription endpoint URL to identify subscription"
          },
          "enabled_cameras": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled Cameras",
            "description": "List of enabled camera IDs (null = all)"
          },
          "enabled_object_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enabled Object Types",
            "description": "List of enabled object types (null = all)"
          },
          "quiet_hours_enabled": {
            "type": "boolean",
            "title": "Quiet Hours Enabled",
            "description": "Whether quiet hours are enabled",
            "default": false
          },
          "quiet_hours_start": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quiet Hours Start",
            "description": "Quiet hours start time (HH:MM)"
          },
          "quiet_hours_end": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Quiet Hours End",
            "description": "Quiet hours end time (HH:MM)"
          },
          "timezone": {
            "type": "string",
            "title": "Timezone",
            "description": "IANA timezone string",
            "default": "UTC"
          },
          "sound_enabled": {
            "type": "boolean",
            "title": "Sound Enabled",
            "description": "Whether notification sound is enabled",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "endpoint"
        ],
        "title": "NotificationPreferencesUpdate",
        "description": "Request body for updating notification preferences.",
        "example": {
          "enabled_object_types": [
            "person",
            "vehicle"
          ],
          "endpoint": "https://fcm.googleapis.com/fcm/send/...",
          "quiet_hours_enabled": true,
          "quiet_hours_end": "07:00",
          "quiet_hours_start": "22:00",
          "sound_enabled": true,
          "timezone": "America/New_York"
        }
      },
      "NotificationResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id"
          },
          "rule_id": {
            "type": "string",
            "title": "Rule Id"
          },
          "rule_name": {
            "type": "string",
            "title": "Rule Name"
          },
          "event_description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Description"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url"
          },
          "read": {
            "type": "boolean",
            "title": "Read"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "rule_id",
          "rule_name",
          "read",
          "created_at"
        ],
        "title": "NotificationResponse",
        "description": "Response schema for a single notification."
      },
      "PairingInfo": {
        "properties": {
          "pairing_id": {
            "type": "string",
            "title": "Pairing Id",
            "description": "Unique identifier for the pairing (client UUID)"
          },
          "is_admin": {
            "type": "boolean",
            "title": "Is Admin",
            "description": "Whether this client has admin permissions"
          },
          "permissions": {
            "type": "integer",
            "title": "Permissions",
            "description": "HAP permission level (0=regular, 1=admin)"
          }
        },
        "type": "object",
        "required": [
          "pairing_id",
          "is_admin",
          "permissions"
        ],
        "title": "PairingInfo",
        "description": "Information about a paired HomeKit client (Story P5-1.8).",
        "example": {
          "is_admin": true,
          "pairing_id": "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
          "permissions": 1
        }
      },
      "PairingsListResponse": {
        "properties": {
          "pairings": {
            "items": {
              "$ref": "#/components/schemas/PairingInfo"
            },
            "type": "array",
            "title": "Pairings",
            "description": "List of paired clients"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Total number of paired clients"
          }
        },
        "type": "object",
        "required": [
          "count"
        ],
        "title": "PairingsListResponse",
        "description": "Response containing list of paired devices (Story P5-1.8).",
        "example": {
          "count": 1,
          "pairings": [
            {
              "is_admin": true,
              "pairing_id": "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
              "permissions": 1
            }
          ]
        }
      },
      "PatternResponse": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "UUID of the camera"
          },
          "hourly_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Hourly Distribution",
            "description": "Events per hour (0-23) across all days"
          },
          "daily_distribution": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Daily Distribution",
            "description": "Events per day-of-week (0=Monday, 6=Sunday)"
          },
          "peak_hours": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Peak Hours",
            "description": "Hours with above-average activity (zero-padded, e.g., '09', '14', '17')"
          },
          "quiet_hours": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Quiet Hours",
            "description": "Hours with minimal activity (zero-padded, e.g., '02', '03', '04')"
          },
          "average_events_per_day": {
            "type": "number",
            "title": "Average Events Per Day",
            "description": "Mean daily event count"
          },
          "last_calculated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Calculated At",
            "description": "When patterns were last calculated"
          },
          "calculation_window_days": {
            "type": "integer",
            "title": "Calculation Window Days",
            "description": "Number of days used for calculation"
          },
          "insufficient_data": {
            "type": "boolean",
            "title": "Insufficient Data",
            "description": "True if camera has insufficient history for meaningful patterns",
            "default": false
          },
          "object_type_distribution": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "integer"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Object Type Distribution",
            "description": "Object type counts, e.g., {'person': 150, 'vehicle': 45, 'package': 12}"
          },
          "dominant_object_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dominant Object Type",
            "description": "Most frequently detected object type"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "hourly_distribution",
          "daily_distribution",
          "peak_hours",
          "quiet_hours",
          "average_events_per_day",
          "last_calculated_at",
          "calculation_window_days"
        ],
        "title": "PatternResponse",
        "description": "Response model for camera activity patterns."
      },
      "PersonDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Person UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          },
          "recent_faces": {
            "items": {
              "$ref": "#/components/schemas/PersonFaceItem"
            },
            "type": "array",
            "title": "Recent Faces",
            "description": "Recent face detections",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count",
          "created_at",
          "updated_at"
        ],
        "title": "PersonDetailResponse",
        "description": "Response for GET /persons/{id} endpoint."
      },
      "PersonFaceItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Face embedding UUID"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Event UUID"
          },
          "bounding_box": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bounding Box",
            "description": "Face bounding box coordinates"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Face detection confidence"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When face was detected"
          },
          "event_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Timestamp",
            "description": "Event timestamp"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url",
            "description": "Event thumbnail URL"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "confidence",
          "created_at"
        ],
        "title": "PersonFaceItem",
        "description": "Face embedding linked to a person."
      },
      "PersonListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Person UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "face_count": {
            "type": "integer",
            "title": "Face Count",
            "description": "Number of face embeddings linked to this person"
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count",
          "face_count"
        ],
        "title": "PersonListItem",
        "description": "Single person in list response."
      },
      "PersonListResponse": {
        "properties": {
          "persons": {
            "items": {
              "$ref": "#/components/schemas/PersonListItem"
            },
            "type": "array",
            "title": "Persons",
            "description": "List of persons"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of persons"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Maximum returned"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Pagination offset"
          }
        },
        "type": "object",
        "required": [
          "persons",
          "total",
          "limit",
          "offset"
        ],
        "title": "PersonListResponse",
        "description": "Response for GET /persons endpoint."
      },
      "PersonUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "New name for the person (None to clear)"
          },
          "is_vip": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Vip",
            "description": "Mark as VIP for priority alerts (Story P4-8.4)"
          },
          "is_blocked": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Blocked",
            "description": "Block alerts for this person (Story P4-8.4)"
          }
        },
        "type": "object",
        "title": "PersonUpdateRequest",
        "description": "Request for PUT /persons/{id} endpoint."
      },
      "PersonUpdateResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Person UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Updated name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status (Story P4-8.4)",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status (Story P4-8.4)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count"
        ],
        "title": "PersonUpdateResponse",
        "description": "Response for PUT /persons/{id} endpoint."
      },
      "PromptHistoryEntry": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "History entry UUID"
          },
          "prompt_version": {
            "type": "integer",
            "title": "Prompt Version",
            "description": "Version number"
          },
          "prompt_text": {
            "type": "string",
            "title": "Prompt Text",
            "description": "Full prompt text"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source: 'manual', 'suggestion', 'ab_test'"
          },
          "applied_suggestions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Applied Suggestions",
            "description": "List of suggestion IDs that were applied"
          },
          "accuracy_before": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy Before",
            "description": "Accuracy rate before this prompt was applied"
          },
          "accuracy_after": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Accuracy After",
            "description": "Accuracy rate after this prompt was applied"
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id",
            "description": "Camera ID if this is a camera-specific prompt"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When this version was created"
          }
        },
        "type": "object",
        "required": [
          "id",
          "prompt_version",
          "prompt_text",
          "source",
          "created_at"
        ],
        "title": "PromptHistoryEntry",
        "description": "A record of prompt evolution."
      },
      "PromptHistoryResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/PromptHistoryEntry"
            },
            "type": "array",
            "title": "Entries",
            "description": "Prompt history entries, newest first"
          },
          "current_version": {
            "type": "integer",
            "title": "Current Version",
            "description": "Current active prompt version"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of prompt versions"
          }
        },
        "type": "object",
        "required": [
          "current_version",
          "total_count"
        ],
        "title": "PromptHistoryResponse",
        "description": "Response for GET /api/v1/feedback/prompt-history."
      },
      "PromptInsightsResponse": {
        "properties": {
          "suggestions": {
            "items": {
              "$ref": "#/components/schemas/PromptSuggestion"
            },
            "type": "array",
            "title": "Suggestions",
            "description": "Global prompt improvement suggestions"
          },
          "camera_insights": {
            "additionalProperties": {
              "$ref": "#/components/schemas/CameraInsight"
            },
            "type": "object",
            "title": "Camera Insights",
            "description": "Per-camera analysis insights keyed by camera ID"
          },
          "sample_count": {
            "type": "integer",
            "title": "Sample Count",
            "description": "Total number of feedback corrections analyzed"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Overall confidence in the analysis"
          },
          "min_samples_met": {
            "type": "boolean",
            "title": "Min Samples Met",
            "description": "Whether minimum sample threshold (10) was met"
          }
        },
        "type": "object",
        "required": [
          "sample_count",
          "confidence",
          "min_samples_met"
        ],
        "title": "PromptInsightsResponse",
        "description": "Response for GET /api/v1/feedback/prompt-insights."
      },
      "PromptRefinementRequest": {
        "properties": {
          "current_prompt": {
            "type": "string",
            "title": "Current Prompt",
            "description": "The current AI description prompt to be refined"
          },
          "include_feedback": {
            "type": "boolean",
            "title": "Include Feedback",
            "description": "Whether to include user feedback data in refinement",
            "default": true
          },
          "max_feedback_samples": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Max Feedback Samples",
            "description": "Maximum number of feedback samples to analyze",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "current_prompt"
        ],
        "title": "PromptRefinementRequest",
        "description": "Request schema for POST /api/v1/ai/refine-prompt (Story P8-3.3)",
        "example": {
          "current_prompt": "Describe what you see in this image in one concise sentence. Focus on objects, people, and actions.",
          "include_feedback": true,
          "max_feedback_samples": 50
        }
      },
      "PromptRefinementResponse": {
        "properties": {
          "suggested_prompt": {
            "type": "string",
            "title": "Suggested Prompt",
            "description": "AI-suggested improved prompt"
          },
          "changes_summary": {
            "type": "string",
            "title": "Changes Summary",
            "description": "Summary of what was changed and why"
          },
          "feedback_analyzed": {
            "type": "integer",
            "title": "Feedback Analyzed",
            "description": "Total number of feedback samples analyzed"
          },
          "positive_examples": {
            "type": "integer",
            "title": "Positive Examples",
            "description": "Number of positive (thumbs up) feedback samples"
          },
          "negative_examples": {
            "type": "integer",
            "title": "Negative Examples",
            "description": "Number of negative (thumbs down) feedback samples"
          },
          "provider_used": {
            "type": "string",
            "title": "Provider Used",
            "description": "Name of the AI provider used for refinement (Story P9-1.6)"
          }
        },
        "type": "object",
        "required": [
          "suggested_prompt",
          "changes_summary",
          "feedback_analyzed",
          "positive_examples",
          "negative_examples",
          "provider_used"
        ],
        "title": "PromptRefinementResponse",
        "description": "Response schema for POST /api/v1/ai/refine-prompt (Story P8-3.3, P9-1.6)",
        "example": {
          "changes_summary": "Added structured format with numbered sections. Incorporated feedback patterns: users prefer specific person counts and vehicle details. Emphasized package detection based on positive feedback.",
          "feedback_analyzed": 47,
          "negative_examples": 15,
          "positive_examples": 32,
          "provider_used": "OpenAI GPT-4o",
          "suggested_prompt": "You are analyzing a home security camera image. Describe:\n1. People present (count, appearance, actions)\n2. Vehicles (type, color, location)\n3. Packages or deliveries\n4. Any unusual or concerning activity\n\nBe specific and concise."
        }
      },
      "PromptSuggestion": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique suggestion identifier"
          },
          "category": {
            "$ref": "#/components/schemas/CorrectionCategory",
            "description": "Category of correction pattern"
          },
          "suggestion_text": {
            "type": "string",
            "title": "Suggestion Text",
            "description": "Suggested prompt improvement text"
          },
          "example_corrections": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Example Corrections",
            "description": "Example user corrections that led to this suggestion"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence in the suggestion (0.0 to 1.0)"
          },
          "impact_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Impact Score",
            "description": "Expected impact score based on frequency (0.0 to 1.0)"
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id",
            "description": "Camera ID if this is a camera-specific suggestion"
          }
        },
        "type": "object",
        "required": [
          "id",
          "category",
          "suggestion_text",
          "confidence",
          "impact_score"
        ],
        "title": "PromptSuggestion",
        "description": "A suggested improvement to the AI description prompt."
      },
      "ProtectCameraDisableData": {
        "properties": {
          "protect_camera_id": {
            "type": "string",
            "title": "Protect Camera Id",
            "description": "Native Protect camera ID"
          },
          "is_enabled_for_ai": {
            "type": "boolean",
            "title": "Is Enabled For Ai",
            "description": "Always false for disable response",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "protect_camera_id"
        ],
        "title": "ProtectCameraDisableData",
        "description": "Data returned when camera is disabled (AC7)"
      },
      "ProtectCameraDisableResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectCameraDisableData"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectCameraDisableResponse",
        "description": "Response for camera disable endpoint (AC7)"
      },
      "ProtectCameraDiscoveryMeta": {
        "properties": {
          "request_id": {
            "type": "string",
            "title": "Request Id",
            "description": "Unique request identifier"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Response timestamp"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of cameras discovered"
          },
          "controller_id": {
            "type": "string",
            "title": "Controller Id",
            "description": "Controller ID that was queried"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "description": "Whether results were returned from cache"
          },
          "cached_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cached At",
            "description": "When results were cached (if cached)"
          },
          "warning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning",
            "description": "Warning message if any issues occurred"
          }
        },
        "type": "object",
        "required": [
          "count",
          "controller_id",
          "cached"
        ],
        "title": "ProtectCameraDiscoveryMeta",
        "description": "Meta response for camera discovery (AC6)"
      },
      "ProtectCameraEnableData": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Database camera ID"
          },
          "protect_camera_id": {
            "type": "string",
            "title": "Protect Camera Id",
            "description": "Native Protect camera ID"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Camera name"
          },
          "is_enabled_for_ai": {
            "type": "boolean",
            "title": "Is Enabled For Ai",
            "description": "Always true for enable response",
            "default": true
          },
          "smart_detection_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Smart Detection Types",
            "description": "Configured smart detection types"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "protect_camera_id",
          "name",
          "smart_detection_types"
        ],
        "title": "ProtectCameraEnableData",
        "description": "Data returned when camera is enabled (AC6)"
      },
      "ProtectCameraEnableRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Override camera name (optional)"
          },
          "smart_detection_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Smart Detection Types",
            "description": "Smart detection types to filter (default: person, vehicle, package)"
          }
        },
        "type": "object",
        "title": "ProtectCameraEnableRequest",
        "description": "Request body for enabling a camera for AI analysis (AC6)",
        "examples": [
          {
            "smart_detection_types": [
              "person",
              "vehicle",
              "package"
            ]
          }
        ]
      },
      "ProtectCameraEnableResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectCameraEnableData"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectCameraEnableResponse",
        "description": "Response for camera enable endpoint (AC6)"
      },
      "ProtectCameraFiltersData": {
        "properties": {
          "protect_camera_id": {
            "type": "string",
            "title": "Protect Camera Id",
            "description": "Native Protect camera ID"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Camera name"
          },
          "smart_detection_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Smart Detection Types",
            "description": "Updated smart detection types"
          },
          "is_enabled_for_ai": {
            "type": "boolean",
            "title": "Is Enabled For Ai",
            "description": "Whether camera is enabled for AI analysis"
          }
        },
        "type": "object",
        "required": [
          "protect_camera_id",
          "name",
          "smart_detection_types",
          "is_enabled_for_ai"
        ],
        "title": "ProtectCameraFiltersData",
        "description": "Data returned when camera filters are updated (Story P2-2.3, AC7)"
      },
      "ProtectCameraFiltersRequest": {
        "properties": {
          "smart_detection_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Smart Detection Types",
            "description": "Smart detection types to filter. Use ['motion'] for all motion mode."
          }
        },
        "type": "object",
        "required": [
          "smart_detection_types"
        ],
        "title": "ProtectCameraFiltersRequest",
        "description": "Request body for updating camera filters (Story P2-2.3, AC7)",
        "examples": [
          {
            "smart_detection_types": [
              "person",
              "vehicle",
              "package"
            ]
          },
          {
            "smart_detection_types": [
              "motion"
            ]
          }
        ]
      },
      "ProtectCameraFiltersResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectCameraFiltersData"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectCameraFiltersResponse",
        "description": "Response for camera filters endpoint (Story P2-2.3, AC7)"
      },
      "ProtectCamerasResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/ProtectDiscoveredCamera"
            },
            "type": "array",
            "title": "Data"
          },
          "meta": {
            "$ref": "#/components/schemas/ProtectCameraDiscoveryMeta"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectCamerasResponse",
        "description": "Camera discovery response with meta (AC5, AC6)",
        "examples": [
          {
            "data": [
              {
                "is_doorbell": true,
                "is_enabled_for_ai": true,
                "is_online": true,
                "model": "G4 Doorbell Pro",
                "name": "Front Door",
                "protect_camera_id": "abc123def456",
                "smart_detection_capabilities": [
                  "person",
                  "vehicle",
                  "package"
                ],
                "type": "doorbell"
              },
              {
                "is_doorbell": false,
                "is_enabled_for_ai": false,
                "is_online": true,
                "model": "G4 Pro",
                "name": "Backyard",
                "protect_camera_id": "xyz789ghi012",
                "smart_detection_capabilities": [
                  "person",
                  "vehicle"
                ],
                "type": "camera"
              }
            ],
            "meta": {
              "cached": false,
              "controller_id": "660e8400-e29b-41d4-a716-446655440001",
              "count": 2,
              "request_id": "550e8400-e29b-41d4-a716-446655440000",
              "timestamp": "2025-11-30T10:30:00Z"
            }
          }
        ]
      },
      "ProtectConnectionResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectConnectionStatusData"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectConnectionResponse",
        "description": "Connection/disconnect response with meta (AC10)"
      },
      "ProtectConnectionStatusData": {
        "properties": {
          "controller_id": {
            "type": "string",
            "title": "Controller Id",
            "description": "Controller UUID"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Connection status: connected, disconnected, connecting, reconnecting, error"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if status is 'error'"
          }
        },
        "type": "object",
        "required": [
          "controller_id",
          "status"
        ],
        "title": "ProtectConnectionStatusData",
        "description": "Connection status result data (AC10)",
        "examples": [
          {
            "controller_id": "550e8400-e29b-41d4-a716-446655440000",
            "status": "connected"
          }
        ]
      },
      "ProtectControllerCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "User-friendly controller name"
          },
          "host": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Host",
            "description": "IP address or hostname"
          },
          "port": {
            "type": "integer",
            "maximum": 65535.0,
            "minimum": 1.0,
            "title": "Port",
            "description": "HTTPS port",
            "default": 443
          },
          "verify_ssl": {
            "type": "boolean",
            "title": "Verify Ssl",
            "description": "Whether to verify SSL certificates",
            "default": false
          },
          "username": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Username",
            "description": "Protect authentication username"
          },
          "password": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Password",
            "description": "Protect password (will be encrypted)"
          }
        },
        "type": "object",
        "required": [
          "name",
          "host",
          "username",
          "password"
        ],
        "title": "ProtectControllerCreate",
        "description": "Schema for creating a new Protect controller",
        "examples": [
          {
            "host": "192.168.1.1",
            "name": "Home UDM Pro",
            "password": "secretpassword",
            "port": 443,
            "username": "admin",
            "verify_ssl": false
          }
        ]
      },
      "ProtectControllerDeleteResponse": {
        "properties": {
          "data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Data",
            "default": {
              "deleted": true
            }
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "meta"
        ],
        "title": "ProtectControllerDeleteResponse",
        "description": "Delete operation response"
      },
      "ProtectControllerListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/ProtectControllerResponse"
            },
            "type": "array",
            "title": "Data"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectControllerListResponse",
        "description": "List of controllers response with meta"
      },
      "ProtectControllerResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "User-friendly controller name"
          },
          "host": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Host",
            "description": "IP address or hostname"
          },
          "port": {
            "type": "integer",
            "maximum": 65535.0,
            "minimum": 1.0,
            "title": "Port",
            "description": "HTTPS port",
            "default": 443
          },
          "verify_ssl": {
            "type": "boolean",
            "title": "Verify Ssl",
            "description": "Whether to verify SSL certificates",
            "default": false
          },
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Controller UUID"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Protect authentication username"
          },
          "is_connected": {
            "type": "boolean",
            "title": "Is Connected",
            "description": "Current connection status"
          },
          "last_connected_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Connected At",
            "description": "Last successful connection timestamp"
          },
          "last_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Error",
            "description": "Last connection error message"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "name",
          "host",
          "id",
          "username",
          "is_connected",
          "created_at",
          "updated_at"
        ],
        "title": "ProtectControllerResponse",
        "description": "Schema for controller API responses",
        "examples": [
          {
            "created_at": "2025-11-30T10:00:00Z",
            "host": "192.168.1.1",
            "id": "550e8400-e29b-41d4-a716-446655440000",
            "is_connected": true,
            "last_connected_at": "2025-11-30T10:30:00Z",
            "name": "Home UDM Pro",
            "port": 443,
            "updated_at": "2025-11-30T10:30:00Z",
            "username": "admin",
            "verify_ssl": false
          }
        ]
      },
      "ProtectControllerSingleResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectControllerResponse"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectControllerSingleResponse",
        "description": "Single controller response with meta"
      },
      "ProtectControllerTest": {
        "properties": {
          "host": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Host",
            "description": "IP address or hostname"
          },
          "port": {
            "type": "integer",
            "maximum": 65535.0,
            "minimum": 1.0,
            "title": "Port",
            "description": "HTTPS port",
            "default": 443
          },
          "username": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Username",
            "description": "Protect authentication username"
          },
          "password": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Password",
            "description": "Protect password"
          },
          "verify_ssl": {
            "type": "boolean",
            "title": "Verify Ssl",
            "description": "Whether to verify SSL certificates",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "host",
          "username",
          "password"
        ],
        "title": "ProtectControllerTest",
        "description": "Schema for testing controller connection (no name required)",
        "examples": [
          {
            "host": "192.168.1.1",
            "password": "secretpassword",
            "port": 443,
            "username": "admin",
            "verify_ssl": false
          }
        ]
      },
      "ProtectControllerUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "host": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Host"
          },
          "port": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 65535.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Port"
          },
          "username": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "verify_ssl": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Verify Ssl"
          }
        },
        "type": "object",
        "title": "ProtectControllerUpdate",
        "description": "Schema for updating an existing controller (all fields optional)"
      },
      "ProtectDiscoveredCamera": {
        "properties": {
          "protect_camera_id": {
            "type": "string",
            "title": "Protect Camera Id",
            "description": "Native Protect camera ID"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Camera name from Protect"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Camera type: 'camera' or 'doorbell'"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "Camera model (e.g., 'G4 Doorbell Pro', 'G4 Pro')"
          },
          "is_online": {
            "type": "boolean",
            "title": "Is Online",
            "description": "Whether camera is currently online"
          },
          "is_doorbell": {
            "type": "boolean",
            "title": "Is Doorbell",
            "description": "Whether camera is a doorbell"
          },
          "is_enabled_for_ai": {
            "type": "boolean",
            "title": "Is Enabled For Ai",
            "description": "Whether camera is enabled for AI processing",
            "default": false
          },
          "smart_detection_capabilities": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Smart Detection Capabilities",
            "description": "Smart detection types the camera supports (e.g., ['person', 'vehicle', 'package'])"
          },
          "smart_detection_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Smart Detection Types",
            "description": "Configured filter types for enabled cameras (Story P2-2.3)"
          },
          "is_new": {
            "type": "boolean",
            "title": "Is New",
            "description": "Whether this camera was newly discovered (not in database) (Story P2-2.4 AC11)",
            "default": false
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id",
            "description": "Database camera ID (only set when camera is enabled for AI)"
          },
          "analysis_mode": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "single_frame",
                  "multi_frame",
                  "video_native"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Mode",
            "description": "AI analysis mode for this camera (Story P3-3.3)"
          }
        },
        "type": "object",
        "required": [
          "protect_camera_id",
          "name",
          "type",
          "model",
          "is_online",
          "is_doorbell"
        ],
        "title": "ProtectDiscoveredCamera",
        "description": "Schema for a camera discovered from a Protect controller (AC2, AC5)",
        "examples": [
          {
            "is_doorbell": true,
            "is_enabled_for_ai": false,
            "is_new": true,
            "is_online": true,
            "model": "G4 Doorbell Pro",
            "name": "Front Door",
            "protect_camera_id": "abc123def456",
            "smart_detection_capabilities": [
              "person",
              "vehicle",
              "package"
            ],
            "type": "doorbell"
          },
          {
            "is_doorbell": false,
            "is_enabled_for_ai": true,
            "is_new": false,
            "is_online": true,
            "model": "G4 Pro",
            "name": "Driveway",
            "protect_camera_id": "xyz789",
            "smart_detection_capabilities": [
              "person",
              "vehicle"
            ],
            "smart_detection_types": [
              "person",
              "vehicle",
              "package"
            ],
            "type": "camera"
          }
        ]
      },
      "ProtectTestResponse": {
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ProtectTestResultData"
          },
          "meta": {
            "$ref": "#/components/schemas/MetaResponse"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ProtectTestResponse",
        "description": "Connection test response with meta"
      },
      "ProtectTestResultData": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether connection was successful"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable result message"
          },
          "firmware_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Firmware Version",
            "description": "Controller firmware version (on success)"
          },
          "camera_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Count",
            "description": "Number of cameras discovered (on success)"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "ProtectTestResultData",
        "description": "Connection test result data",
        "examples": [
          {
            "camera_count": 6,
            "firmware_version": "3.0.16",
            "message": "Connected successfully",
            "success": true
          }
        ]
      },
      "ProviderCapability": {
        "properties": {
          "video": {
            "type": "boolean",
            "title": "Video",
            "description": "Whether provider supports native video input"
          },
          "max_video_duration": {
            "type": "integer",
            "title": "Max Video Duration",
            "description": "Maximum video duration in seconds (0 if no video)"
          },
          "max_video_size_mb": {
            "type": "integer",
            "title": "Max Video Size Mb",
            "description": "Maximum video file size in MB (0 if no video)"
          },
          "supported_formats": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Supported Formats",
            "description": "Supported video formats (empty if no video)"
          },
          "max_images": {
            "type": "integer",
            "title": "Max Images",
            "description": "Maximum images for multi-frame analysis"
          },
          "configured": {
            "type": "boolean",
            "title": "Configured",
            "description": "Whether provider has an API key configured"
          }
        },
        "type": "object",
        "required": [
          "video",
          "max_video_duration",
          "max_video_size_mb",
          "supported_formats",
          "max_images",
          "configured"
        ],
        "title": "ProviderCapability",
        "description": "Capability information for a single AI provider (Story P3-4.1)"
      },
      "PublishDiscoveryResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "cameras_published": {
            "type": "integer",
            "title": "Cameras Published",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "PublishDiscoveryResponse",
        "description": "Response for publishing discovery configs.",
        "example": {
          "cameras_published": 5,
          "message": "Published discovery for 5 cameras",
          "success": true
        }
      },
      "PushRequirementsResponse": {
        "properties": {
          "https_required": {
            "type": "boolean",
            "title": "Https Required",
            "description": "Whether HTTPS is required for push notifications",
            "default": true
          },
          "https_configured": {
            "type": "boolean",
            "title": "Https Configured",
            "description": "Whether HTTPS is currently configured",
            "default": false
          },
          "warning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning",
            "description": "Warning message if HTTPS is not configured"
          },
          "ready": {
            "type": "boolean",
            "title": "Ready",
            "description": "Whether push notifications are ready to use",
            "default": false
          }
        },
        "type": "object",
        "title": "PushRequirementsResponse",
        "description": "Response containing push notification requirements and warnings (Story P9-5.1).",
        "example": {
          "https_configured": false,
          "https_required": true,
          "ready": false,
          "warning": "Push notifications require HTTPS for full functionality. Configure SSL to enable push notifications."
        }
      },
      "ReanalyzeRequest": {
        "properties": {
          "analysis_mode": {
            "type": "string",
            "enum": [
              "single_frame",
              "multi_frame",
              "video_native"
            ],
            "title": "Analysis Mode",
            "description": "Analysis mode to use for re-analysis: single_frame, multi_frame, or video_native"
          }
        },
        "type": "object",
        "required": [
          "analysis_mode"
        ],
        "title": "ReanalyzeRequest",
        "description": "Schema for event re-analysis request (Story P3-6.4)\n\nUsed by POST /api/v1/events/{id}/reanalyze endpoint.",
        "examples": [
          {
            "analysis_mode": "multi_frame"
          }
        ]
      },
      "RecalculatePatternResponse": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "UUID of the camera"
          },
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether recalculation succeeded"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          },
          "insufficient_data": {
            "type": "boolean",
            "title": "Insufficient Data",
            "description": "True if camera has insufficient history",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "success",
          "message"
        ],
        "title": "RecalculatePatternResponse",
        "description": "Response model for pattern recalculation."
      },
      "RecentSummariesResponse": {
        "properties": {
          "summaries": {
            "items": {
              "$ref": "#/components/schemas/RecentSummaryItem"
            },
            "type": "array",
            "title": "Summaries",
            "description": "List of recent summaries (today and yesterday)"
          }
        },
        "type": "object",
        "required": [
          "summaries"
        ],
        "title": "RecentSummariesResponse",
        "description": "Response for recent summaries endpoint (Story P4-4.4)."
      },
      "RecentSummaryItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Summary UUID"
          },
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date in ISO format (YYYY-MM-DD)"
          },
          "summary_text": {
            "type": "string",
            "title": "Summary Text",
            "description": "Generated summary text"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events in summary"
          },
          "camera_count": {
            "type": "integer",
            "title": "Camera Count",
            "description": "Number of cameras with events",
            "default": 0
          },
          "alert_count": {
            "type": "integer",
            "title": "Alert Count",
            "description": "Number of alerts triggered",
            "default": 0
          },
          "doorbell_count": {
            "type": "integer",
            "title": "Doorbell Count",
            "description": "Number of doorbell rings",
            "default": 0
          },
          "person_count": {
            "type": "integer",
            "title": "Person Count",
            "description": "Number of person detections",
            "default": 0
          },
          "vehicle_count": {
            "type": "integer",
            "title": "Vehicle Count",
            "description": "Number of vehicle detections",
            "default": 0
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At",
            "description": "When the summary was generated"
          }
        },
        "type": "object",
        "required": [
          "id",
          "date",
          "summary_text",
          "event_count",
          "generated_at"
        ],
        "title": "RecentSummaryItem",
        "description": "A single summary item for recent summaries endpoint (Story P4-4.4)."
      },
      "RemovePairingResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "pairing_id": {
            "type": "string",
            "title": "Pairing Id",
            "description": "ID of the removed pairing"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "pairing_id"
        ],
        "title": "RemovePairingResponse",
        "description": "Response after removing a pairing (Story P5-1.8).",
        "example": {
          "message": "Pairing removed successfully",
          "pairing_id": "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",
          "success": true
        }
      },
      "RestoreResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether restore was successful"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          },
          "events_restored": {
            "type": "integer",
            "title": "Events Restored",
            "description": "Number of events restored",
            "default": 0
          },
          "settings_restored": {
            "type": "integer",
            "title": "Settings Restored",
            "description": "Number of settings restored",
            "default": 0
          },
          "thumbnails_restored": {
            "type": "integer",
            "title": "Thumbnails Restored",
            "description": "Number of thumbnails restored",
            "default": 0
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Any warnings during restore"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "RestoreResponse",
        "description": "Response from restore operation",
        "example": {
          "events_restored": 1234,
          "message": "Restore completed successfully",
          "settings_restored": 15,
          "success": true,
          "thumbnails_restored": 150,
          "warnings": []
        }
      },
      "RetentionPolicyResponse": {
        "properties": {
          "retention_days": {
            "type": "integer",
            "title": "Retention Days",
            "description": "Current retention policy in days"
          },
          "next_cleanup": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Next Cleanup",
            "description": "Next scheduled cleanup time (ISO 8601)"
          },
          "forever": {
            "type": "boolean",
            "title": "Forever",
            "description": "Whether events are kept forever"
          }
        },
        "type": "object",
        "required": [
          "retention_days",
          "forever"
        ],
        "title": "RetentionPolicyResponse",
        "description": "Schema for retention policy response\n\nAttributes:\n    retention_days: Current retention policy in days\n    next_cleanup: When the next scheduled cleanup will run (ISO 8601)\n    forever: Whether retention is set to forever (retention_days <= 0)\n\nExample:\n    {\n        \"retention_days\": 30,\n        \"next_cleanup\": \"2025-11-18T02:00:00Z\",\n        \"forever\": false\n    }",
        "example": {
          "forever": false,
          "next_cleanup": "2025-11-18T02:00:00Z",
          "retention_days": 30
        }
      },
      "RetentionPolicyUpdate": {
        "properties": {
          "retention_days": {
            "type": "integer",
            "title": "Retention Days",
            "description": "Number of days to retain events (-1 for forever, or 7/30/90/365)"
          }
        },
        "type": "object",
        "required": [
          "retention_days"
        ],
        "title": "RetentionPolicyUpdate",
        "description": "Schema for updating retention policy\n\nAttributes:\n    retention_days: Number of days to retain events\n        - -1 or 0: Keep forever\n        - 7: Keep for 7 days\n        - 30: Keep for 30 days\n        - 90: Keep for 90 days\n        - 365: Keep for 1 year\n\nExample:\n    {\n        \"retention_days\": 30\n    }"
      },
      "SSLStatusResponse": {
        "properties": {
          "ssl_enabled": {
            "type": "boolean",
            "title": "Ssl Enabled",
            "description": "Whether SSL is configured and enabled"
          },
          "ssl_ready": {
            "type": "boolean",
            "title": "Ssl Ready",
            "description": "Whether SSL is fully operational (enabled + valid certs)"
          },
          "certificate_valid": {
            "type": "boolean",
            "title": "Certificate Valid",
            "description": "Whether the certificate is valid",
            "default": false
          },
          "certificate_expires": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Certificate Expires",
            "description": "Certificate expiration date (ISO 8601)"
          },
          "certificate_issuer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Certificate Issuer",
            "description": "Certificate issuer name"
          },
          "certificate_subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Certificate Subject",
            "description": "Certificate subject (CN)"
          },
          "tls_version": {
            "type": "string",
            "title": "Tls Version",
            "description": "Minimum TLS version configured",
            "default": "N/A"
          },
          "ssl_port": {
            "type": "integer",
            "title": "Ssl Port",
            "description": "HTTPS port",
            "default": 443
          },
          "http_redirect": {
            "type": "boolean",
            "title": "Http Redirect",
            "description": "Whether HTTP to HTTPS redirect is enabled",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "ssl_enabled",
          "ssl_ready"
        ],
        "title": "SSLStatusResponse",
        "description": "Response containing SSL/HTTPS configuration status",
        "example": {
          "certificate_expires": "2026-12-23T00:00:00Z",
          "certificate_issuer": "Let's Encrypt Authority X3",
          "certificate_subject": "argusai.example.com",
          "certificate_valid": true,
          "http_redirect": true,
          "ssl_enabled": true,
          "ssl_port": 443,
          "ssl_ready": true,
          "tls_version": "TLSv1_2"
        }
      },
      "SimilarEventResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the similar event"
          },
          "similarity_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Similarity Score",
            "description": "Cosine similarity score (0.0 to 1.0, higher is more similar)"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url",
            "description": "URL to event thumbnail image"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "AI-generated description of the event"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "When the event occurred"
          },
          "camera_name": {
            "type": "string",
            "title": "Camera Name",
            "description": "Name of the camera that captured the event"
          },
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "UUID of the camera"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "similarity_score",
          "description",
          "timestamp",
          "camera_name",
          "camera_id"
        ],
        "title": "SimilarEventResponse",
        "description": "Response model for a similar event."
      },
      "SimilarEventsResponse": {
        "properties": {
          "source_event_id": {
            "type": "string",
            "title": "Source Event Id",
            "description": "UUID of the source event searched against"
          },
          "similar_events": {
            "items": {
              "$ref": "#/components/schemas/SimilarEventResponse"
            },
            "type": "array",
            "title": "Similar Events",
            "description": "List of similar events sorted by similarity score (highest first)"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results",
            "description": "Number of similar events found"
          },
          "query_params": {
            "additionalProperties": true,
            "type": "object",
            "title": "Query Params",
            "description": "Query parameters used for the search"
          }
        },
        "type": "object",
        "required": [
          "source_event_id",
          "similar_events",
          "total_results",
          "query_params"
        ],
        "title": "SimilarEventsResponse",
        "description": "Response model for similarity search results."
      },
      "StorageResponse": {
        "properties": {
          "database_mb": {
            "type": "number",
            "title": "Database Mb",
            "description": "Database size in MB"
          },
          "thumbnails_mb": {
            "type": "number",
            "title": "Thumbnails Mb",
            "description": "Thumbnails directory size in MB"
          },
          "total_mb": {
            "type": "number",
            "title": "Total Mb",
            "description": "Total storage used in MB"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events stored"
          }
        },
        "type": "object",
        "required": [
          "database_mb",
          "thumbnails_mb",
          "total_mb",
          "event_count"
        ],
        "title": "StorageResponse",
        "description": "Schema for storage monitoring response\n\nAttributes:\n    database_mb: Database size in megabytes\n    thumbnails_mb: Thumbnails directory size in megabytes\n    total_mb: Total storage used in megabytes\n    event_count: Number of events in database\n\nExample:\n    {\n        \"database_mb\": 15.2,\n        \"thumbnails_mb\": 8.5,\n        \"total_mb\": 23.7,\n        \"event_count\": 1234\n    }",
        "example": {
          "database_mb": 15.2,
          "event_count": 1234,
          "thumbnails_mb": 8.5,
          "total_mb": 23.7
        }
      },
      "StreamProfile": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Profile name (e.g., 'mainStream', 'subStream')"
          },
          "token": {
            "type": "string",
            "title": "Token",
            "description": "Profile token used for ONVIF API calls"
          },
          "resolution": {
            "type": "string",
            "title": "Resolution",
            "description": "Resolution as string (e.g., '1920x1080')"
          },
          "width": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Width",
            "description": "Video width in pixels"
          },
          "height": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Height",
            "description": "Video height in pixels"
          },
          "fps": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Fps",
            "description": "Frame rate (frames per second)"
          },
          "rtsp_url": {
            "type": "string",
            "title": "Rtsp Url",
            "description": "RTSP URL for this profile's stream"
          },
          "encoding": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Encoding",
            "description": "Video encoding (e.g., 'H264', 'H265', 'JPEG')"
          }
        },
        "type": "object",
        "required": [
          "name",
          "token",
          "resolution",
          "width",
          "height",
          "fps",
          "rtsp_url"
        ],
        "title": "StreamProfile",
        "description": "Represents a video stream profile from an ONVIF camera.\n\nContains profile name, resolution, frame rate, and RTSP URL.",
        "example": {
          "encoding": "H264",
          "fps": 30,
          "height": 1080,
          "name": "mainStream",
          "resolution": "1920x1080",
          "rtsp_url": "rtsp://192.168.1.100:554/stream1",
          "token": "profile_token_1",
          "width": 1920
        }
      },
      "StreamTestResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the stream test passed all checks"
          },
          "rtsp_accessible": {
            "type": "boolean",
            "title": "Rtsp Accessible",
            "description": "Whether the camera RTSP stream is accessible"
          },
          "ffmpeg_compatible": {
            "type": "boolean",
            "title": "Ffmpeg Compatible",
            "description": "Whether ffmpeg can process the stream"
          },
          "source_resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Resolution",
            "description": "Detected source resolution (e.g., '1920x1080')"
          },
          "source_fps": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Fps",
            "description": "Detected source frame rate"
          },
          "source_codec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Codec",
            "description": "Detected source video codec (e.g., 'h264')"
          },
          "target_resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Resolution",
            "description": "Target resolution for HomeKit (e.g., '1280x720')"
          },
          "target_fps": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Fps",
            "description": "Target frame rate for HomeKit"
          },
          "target_bitrate": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target Bitrate",
            "description": "Target bitrate in kbps"
          },
          "estimated_latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Estimated Latency Ms",
            "description": "Estimated stream latency in milliseconds"
          },
          "ffmpeg_command": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ffmpeg Command",
            "description": "Sanitized ffmpeg command for debugging (SRTP keys removed)"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if test failed"
          },
          "test_duration_ms": {
            "type": "integer",
            "title": "Test Duration Ms",
            "description": "Time taken to complete the test in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "success",
          "rtsp_accessible",
          "ffmpeg_compatible",
          "test_duration_ms"
        ],
        "title": "StreamTestResponse",
        "description": "Response from camera stream test endpoint (Story P7-3.3 AC3).\n\nValidates RTSP connectivity and ffmpeg compatibility for HomeKit streaming.",
        "example": {
          "estimated_latency_ms": 500,
          "ffmpeg_command": "ffmpeg -rtsp_transport tcp -i rtsp://... -vcodec libx264 ...",
          "ffmpeg_compatible": true,
          "rtsp_accessible": true,
          "source_codec": "h264",
          "source_fps": 30,
          "source_resolution": "1920x1080",
          "success": true,
          "target_bitrate": 1500,
          "target_fps": 25,
          "target_resolution": "1280x720",
          "test_duration_ms": 3500
        }
      },
      "SubscribeRequest": {
        "properties": {
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Push service endpoint URL"
          },
          "keys": {
            "$ref": "#/components/schemas/SubscriptionKeys",
            "description": "Encryption keys"
          },
          "user_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Agent",
            "description": "Browser user agent"
          }
        },
        "type": "object",
        "required": [
          "endpoint",
          "keys"
        ],
        "title": "SubscribeRequest",
        "description": "Request body for push subscription registration.",
        "example": {
          "endpoint": "https://fcm.googleapis.com/fcm/send/abc123...",
          "keys": {
            "auth": "tBHItJI5svbpez7KI4CCXg==",
            "p256dh": "BNcRdreALRFXTkOOUHK1EtK2wtaz5Ry4YfYCA_..."
          },
          "user_agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 14_0...)"
        }
      },
      "SubscriptionKeys": {
        "properties": {
          "p256dh": {
            "type": "string",
            "title": "P256Dh",
            "description": "P-256 public key for message encryption"
          },
          "auth": {
            "type": "string",
            "title": "Auth",
            "description": "Authentication secret"
          }
        },
        "type": "object",
        "required": [
          "p256dh",
          "auth"
        ],
        "title": "SubscriptionKeys",
        "description": "Browser push subscription keys."
      },
      "SubscriptionListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "endpoint": {
            "type": "string",
            "title": "Endpoint"
          },
          "user_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Agent"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "endpoint",
          "user_agent",
          "created_at",
          "last_used_at"
        ],
        "title": "SubscriptionListItem",
        "description": "Single subscription in list response."
      },
      "SubscriptionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Subscription UUID"
          },
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Truncated endpoint for display"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "ISO 8601 creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "endpoint",
          "created_at"
        ],
        "title": "SubscriptionResponse",
        "description": "Response for subscription operations.",
        "example": {
          "created_at": "2025-12-10T10:30:00Z",
          "endpoint": "https://fcm.googleapis.com/...xyz",
          "id": "550e8400-e29b-41d4-a716-446655440000"
        }
      },
      "SubscriptionsListResponse": {
        "properties": {
          "subscriptions": {
            "items": {
              "$ref": "#/components/schemas/SubscriptionListItem"
            },
            "type": "array",
            "title": "Subscriptions"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "subscriptions",
          "total"
        ],
        "title": "SubscriptionsListResponse",
        "description": "Response listing all subscriptions."
      },
      "SummaryFeedbackCreate": {
        "properties": {
          "rating": {
            "type": "string",
            "enum": [
              "positive",
              "negative"
            ],
            "title": "Rating",
            "description": "User's rating of the summary"
          },
          "correction_text": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Text",
            "description": "Optional correction text (max 500 characters)"
          }
        },
        "type": "object",
        "required": [
          "rating"
        ],
        "title": "SummaryFeedbackCreate",
        "description": "Schema for creating new feedback on a summary."
      },
      "SummaryFeedbackResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "summary_id": {
            "type": "string",
            "title": "Summary Id"
          },
          "rating": {
            "type": "string",
            "title": "Rating"
          },
          "correction_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Text"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "summary_id",
          "rating",
          "created_at"
        ],
        "title": "SummaryFeedbackResponse",
        "description": "Schema for summary feedback response."
      },
      "SummaryFeedbackStats": {
        "properties": {
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of summary feedback submissions"
          },
          "positive_count": {
            "type": "integer",
            "title": "Positive Count",
            "description": "Total positive ratings"
          },
          "negative_count": {
            "type": "integer",
            "title": "Negative Count",
            "description": "Total negative ratings"
          },
          "accuracy_rate": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Accuracy Rate",
            "description": "Accuracy rate as percentage (positive / total * 100)"
          }
        },
        "type": "object",
        "required": [
          "total_count",
          "positive_count",
          "negative_count",
          "accuracy_rate"
        ],
        "title": "SummaryFeedbackStats",
        "description": "Aggregate statistics for summary feedback."
      },
      "SummaryFeedbackUpdate": {
        "properties": {
          "rating": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "positive",
                  "negative"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Rating",
            "description": "Updated rating (optional)"
          },
          "correction_text": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Correction Text",
            "description": "Updated correction text (max 500 characters)"
          }
        },
        "type": "object",
        "title": "SummaryFeedbackUpdate",
        "description": "Schema for updating existing summary feedback."
      },
      "SummaryGenerateRequest": {
        "properties": {
          "hours_back": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 168.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Hours Back",
            "description": "Generate summary for last N hours (1-168). Mutually exclusive with start_time/end_time."
          },
          "start_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Start Time",
            "description": "Start of time period (ISO 8601). Required if hours_back not provided."
          },
          "end_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "End Time",
            "description": "End of time period (ISO 8601). Required if hours_back not provided."
          },
          "camera_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Ids",
            "description": "List of camera UUIDs to include (null = all cameras)"
          }
        },
        "type": "object",
        "title": "SummaryGenerateRequest",
        "description": "Request model for on-demand summary generation (Story P4-4.5).\n\nAccepts EITHER:\n- hours_back: Shorthand for \"last N hours\" (e.g., hours_back=3 for last 3 hours)\n- OR start_time + end_time: Explicit time range\n\nBoth modes are mutually exclusive."
      },
      "SummaryListResponse": {
        "properties": {
          "summaries": {
            "items": {
              "$ref": "#/components/schemas/SummaryResponse"
            },
            "type": "array",
            "title": "Summaries",
            "description": "List of summaries"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of summaries"
          }
        },
        "type": "object",
        "required": [
          "summaries",
          "total"
        ],
        "title": "SummaryListResponse",
        "description": "Response for listing summaries."
      },
      "SummaryResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Summary UUID (for saved summaries)"
          },
          "summary_text": {
            "type": "string",
            "title": "Summary Text",
            "description": "Generated natural language summary"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start",
            "description": "Start of summarized period"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End",
            "description": "End of summarized period"
          },
          "event_count": {
            "type": "integer",
            "title": "Event Count",
            "description": "Number of events in summary"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At",
            "description": "When the summary was generated"
          },
          "stats": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SummaryStats"
              },
              {
                "type": "null"
              }
            ],
            "description": "Event statistics breakdown"
          },
          "ai_cost": {
            "type": "number",
            "title": "Ai Cost",
            "description": "Cost of AI generation (USD)",
            "default": 0.0
          },
          "provider_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Used",
            "description": "AI provider used"
          },
          "camera_count": {
            "type": "integer",
            "title": "Camera Count",
            "description": "Number of cameras with events",
            "default": 0
          },
          "alert_count": {
            "type": "integer",
            "title": "Alert Count",
            "description": "Number of alerts triggered",
            "default": 0
          },
          "doorbell_count": {
            "type": "integer",
            "title": "Doorbell Count",
            "description": "Number of doorbell ring events",
            "default": 0
          },
          "person_count": {
            "type": "integer",
            "title": "Person Count",
            "description": "Number of person detections",
            "default": 0
          },
          "vehicle_count": {
            "type": "integer",
            "title": "Vehicle Count",
            "description": "Number of vehicle detections",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "summary_text",
          "period_start",
          "period_end",
          "event_count",
          "generated_at"
        ],
        "title": "SummaryResponse",
        "description": "Response model for generated summary (AC16, Story P4-4.5)."
      },
      "SummaryStats": {
        "properties": {
          "total_events": {
            "type": "integer",
            "title": "Total Events",
            "description": "Total number of events"
          },
          "by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Type",
            "description": "Event counts by object type"
          },
          "by_camera": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "By Camera",
            "description": "Event counts by camera"
          },
          "alerts_triggered": {
            "type": "integer",
            "title": "Alerts Triggered",
            "description": "Number of events that triggered alerts",
            "default": 0
          },
          "doorbell_rings": {
            "type": "integer",
            "title": "Doorbell Rings",
            "description": "Number of doorbell ring events",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "total_events"
        ],
        "title": "SummaryStats",
        "description": "Statistical breakdown of events in summary."
      },
      "SystemNotificationListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/SystemNotificationResponse"
            },
            "type": "array",
            "title": "Data"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "unread_count": {
            "type": "integer",
            "title": "Unread Count"
          }
        },
        "type": "object",
        "required": [
          "data",
          "total_count",
          "unread_count"
        ],
        "title": "SystemNotificationListResponse",
        "description": "Response schema for system notification list."
      },
      "SystemNotificationResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "notification_type": {
            "type": "string",
            "title": "Notification Type"
          },
          "severity": {
            "type": "string",
            "title": "Severity"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "action_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Action Url"
          },
          "extra_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Data"
          },
          "read": {
            "type": "boolean",
            "title": "Read"
          },
          "dismissed": {
            "type": "boolean",
            "title": "Dismissed"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "notification_type",
          "severity",
          "title",
          "message",
          "read",
          "dismissed",
          "created_at"
        ],
        "title": "SystemNotificationResponse",
        "description": "Response schema for a single system notification."
      },
      "SystemSettings": {
        "properties": {
          "system_name": {
            "type": "string",
            "maxLength": 100,
            "title": "System Name",
            "default": "ArgusAI"
          },
          "timezone": {
            "type": "string",
            "title": "Timezone",
            "default": "UTC"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "default": "English"
          },
          "date_format": {
            "type": "string",
            "enum": [
              "MM/DD/YYYY",
              "DD/MM/YYYY",
              "YYYY-MM-DD"
            ],
            "title": "Date Format",
            "default": "MM/DD/YYYY"
          },
          "time_format": {
            "type": "string",
            "enum": [
              "12h",
              "24h"
            ],
            "title": "Time Format",
            "default": "12h"
          },
          "primary_model": {
            "type": "string",
            "enum": [
              "gpt-4o-mini",
              "claude-3-haiku",
              "gemini-flash"
            ],
            "title": "Primary Model",
            "default": "gpt-4o-mini"
          },
          "primary_api_key": {
            "type": "string",
            "title": "Primary Api Key",
            "default": ""
          },
          "fallback_model": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "gpt-4o-mini",
                  "claude-3-haiku",
                  "gemini-flash"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Model"
          },
          "description_prompt": {
            "type": "string",
            "title": "Description Prompt",
            "default": "Describe what you see in this image in one concise sentence. Focus on objects, people, and actions."
          },
          "multi_frame_description_prompt": {
            "type": "string",
            "title": "Multi Frame Description Prompt",
            "description": "Custom prompt appended to multi-frame analysis (Story P3-2.4). Leave empty to use system defaults.",
            "default": ""
          },
          "summary_prompt": {
            "type": "string",
            "title": "Summary Prompt",
            "description": "Custom prompt for generating activity summaries. Variables: {date}, {event_count}, {camera_count}",
            "default": "Generate a daily activity summary for {date}.\nSummarize the {event_count} events detected across {camera_count} cameras.\nHighlight any notable patterns or unusual activity.\nKeep the summary concise (2-3 paragraphs)."
          },
          "motion_sensitivity": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Motion Sensitivity",
            "default": 50
          },
          "detection_method": {
            "type": "string",
            "enum": [
              "background_subtraction",
              "frame_difference"
            ],
            "title": "Detection Method",
            "default": "background_subtraction"
          },
          "cooldown_period": {
            "type": "integer",
            "maximum": 300.0,
            "minimum": 30.0,
            "title": "Cooldown Period",
            "default": 60
          },
          "min_motion_area": {
            "type": "number",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Min Motion Area",
            "default": 5
          },
          "save_debug_images": {
            "type": "boolean",
            "title": "Save Debug Images",
            "default": false
          },
          "retention_days": {
            "type": "integer",
            "title": "Retention Days",
            "default": 30
          },
          "thumbnail_storage": {
            "type": "string",
            "enum": [
              "filesystem",
              "database"
            ],
            "title": "Thumbnail Storage",
            "default": "filesystem"
          },
          "auto_cleanup": {
            "type": "boolean",
            "title": "Auto Cleanup",
            "default": true
          },
          "analysis_frame_count": {
            "type": "integer",
            "enum": [
              5,
              10,
              15,
              20
            ],
            "title": "Analysis Frame Count",
            "description": "Number of frames to extract for AI analysis",
            "default": 10
          },
          "frame_sampling_strategy": {
            "type": "string",
            "enum": [
              "uniform",
              "adaptive",
              "hybrid"
            ],
            "title": "Frame Sampling Strategy",
            "description": "Frame sampling strategy: uniform (fixed interval), adaptive (content-aware), or hybrid (uniform + adaptive filter)",
            "default": "uniform"
          },
          "store_motion_videos": {
            "type": "boolean",
            "title": "Store Motion Videos",
            "description": "Download and store full motion videos from Protect cameras",
            "default": false
          },
          "video_retention_days": {
            "type": "integer",
            "maximum": 365.0,
            "minimum": 1.0,
            "title": "Video Retention Days",
            "description": "Number of days to retain stored videos (separate from event retention)",
            "default": 30
          },
          "attempt_ocr_extraction": {
            "type": "boolean",
            "title": "Attempt Ocr Extraction",
            "description": "Attempt to extract timestamp/camera name from video frame overlays using OCR (CPU intensive, requires tesseract)",
            "default": false
          },
          "frame_extraction_offset_ms": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 0.0,
            "title": "Frame Extraction Offset Ms",
            "description": "Milliseconds to skip from clip start before extracting frames (0-10000ms, default 2000ms)",
            "default": 2000
          }
        },
        "type": "object",
        "title": "SystemSettings",
        "description": "Complete system settings schema\n\nCombines all configuration categories:\n- General settings (system name, timezone, date/time format)\n- AI model configuration (provider, API keys, prompts)\n- Motion detection parameters\n- Data retention and privacy settings",
        "example": {
          "auto_cleanup": true,
          "cooldown_period": 60,
          "date_format": "MM/DD/YYYY",
          "description_prompt": "Describe what you see in this image in one concise sentence.",
          "detection_method": "background_subtraction",
          "language": "English",
          "min_motion_area": 5,
          "motion_sensitivity": 50,
          "multi_frame_description_prompt": "",
          "primary_api_key": "sk-...",
          "primary_model": "gpt-4o-mini",
          "retention_days": 30,
          "save_debug_images": false,
          "system_name": "ArgusAI",
          "thumbnail_storage": "filesystem",
          "time_format": "12h",
          "timezone": "America/Los_Angeles"
        }
      },
      "SystemSettingsUpdate": {
        "properties": {
          "system_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "System Name"
          },
          "timezone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timezone"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language"
          },
          "date_format": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "MM/DD/YYYY",
                  "DD/MM/YYYY",
                  "YYYY-MM-DD"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Format"
          },
          "time_format": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "12h",
                  "24h"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Time Format"
          },
          "primary_model": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "gpt-4o-mini",
                  "claude-3-haiku",
                  "gemini-flash"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Model"
          },
          "primary_api_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Api Key"
          },
          "fallback_model": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "gpt-4o-mini",
                  "claude-3-haiku",
                  "gemini-flash"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Model"
          },
          "description_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description Prompt"
          },
          "multi_frame_description_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Multi Frame Description Prompt",
            "description": "Custom prompt appended to multi-frame analysis (Story P3-2.4). Leave empty to use system defaults."
          },
          "summary_prompt": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Summary Prompt",
            "description": "Custom prompt for generating activity summaries. Variables: {date}, {event_count}, {camera_count}"
          },
          "ai_api_key_openai": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Api Key Openai"
          },
          "ai_api_key_grok": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Api Key Grok"
          },
          "ai_api_key_claude": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Api Key Claude"
          },
          "ai_api_key_gemini": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Api Key Gemini"
          },
          "ai_provider_order": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Provider Order"
          },
          "motion_sensitivity": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Motion Sensitivity"
          },
          "detection_method": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "background_subtraction",
                  "frame_difference"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Detection Method"
          },
          "cooldown_period": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 300.0,
                "minimum": 30.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Cooldown Period"
          },
          "min_motion_area": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 10.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Min Motion Area"
          },
          "save_debug_images": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Save Debug Images"
          },
          "retention_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Retention Days"
          },
          "thumbnail_storage": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "filesystem",
                  "database"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Storage"
          },
          "auto_cleanup": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Cleanup"
          },
          "ai_daily_cost_cap": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Daily Cost Cap",
            "description": "Daily cost cap in USD (null = no limit)"
          },
          "ai_monthly_cost_cap": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Ai Monthly Cost Cap",
            "description": "Monthly cost cap in USD (null = no limit)"
          },
          "store_analysis_frames": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Analysis Frames",
            "description": "Store key frames used for AI analysis (default: true)"
          },
          "enable_context_enhanced_prompts": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enable Context Enhanced Prompts",
            "description": "Enable historical context in AI prompts (default: true)"
          },
          "context_ab_test_percentage": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Ab Test Percentage",
            "description": "Percentage of events to skip context for A/B testing (0 = disabled)"
          },
          "context_similarity_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Similarity Threshold",
            "description": "Minimum similarity threshold for context inclusion (default: 0.7)"
          },
          "context_time_window_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 365.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Time Window Days",
            "description": "Days of history to use for context (default: 30)"
          },
          "anomaly_low_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Anomaly Low Threshold",
            "description": "Threshold for low/medium anomaly classification (default: 0.3)"
          },
          "anomaly_high_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Anomaly High Threshold",
            "description": "Threshold for medium/high anomaly classification (default: 0.6)"
          },
          "anomaly_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Anomaly Enabled",
            "description": "Enable anomaly scoring for events (default: true)"
          },
          "face_recognition_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Face Recognition Enabled",
            "description": "Enable face detection and embedding storage (default: false, opt-in)"
          },
          "person_match_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Person Match Threshold",
            "description": "Similarity threshold for face-to-person matching (default: 0.70)"
          },
          "auto_create_persons": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Create Persons",
            "description": "Automatically create new person when no match found (default: true)"
          },
          "update_appearance_on_high_match": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Update Appearance On High Match",
            "description": "Update reference embedding on high-confidence matches (default: true)"
          },
          "vehicle_recognition_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Recognition Enabled",
            "description": "Enable vehicle detection and embedding storage (default: false, opt-in)"
          },
          "vehicle_match_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Match Threshold",
            "description": "Similarity threshold for vehicle matching (default: 0.65)"
          },
          "auto_create_vehicles": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Create Vehicles",
            "description": "Automatically create new vehicle when no match found (default: true)"
          },
          "analysis_frame_count": {
            "anyOf": [
              {
                "type": "integer",
                "enum": [
                  5,
                  10,
                  15,
                  20
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Frame Count",
            "description": "Number of frames to extract for AI analysis (default: 10)"
          },
          "frame_sampling_strategy": {
            "anyOf": [
              {
                "type": "string",
                "enum": [
                  "uniform",
                  "adaptive",
                  "hybrid"
                ]
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Sampling Strategy",
            "description": "Frame sampling strategy: uniform (default), adaptive, or hybrid"
          },
          "store_motion_videos": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Store Motion Videos",
            "description": "Download and store full motion videos from Protect cameras (default: false)"
          },
          "video_retention_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 365.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Video Retention Days",
            "description": "Number of days to retain stored videos (default: 30)"
          },
          "attempt_ocr_extraction": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Attempt Ocr Extraction",
            "description": "Attempt to extract timestamp/camera name from video frame overlays using OCR (default: false)"
          },
          "frame_extraction_offset_ms": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 10000.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Frame Extraction Offset Ms",
            "description": "Milliseconds to skip from clip start before extracting frames (0-10000ms, default 2000ms)"
          }
        },
        "type": "object",
        "title": "SystemSettingsUpdate",
        "description": "Partial update schema for system settings\nAll fields are optional to support partial updates"
      },
      "TestClipDownloadRequest": {
        "properties": {
          "camera_id": {
            "type": "string",
            "title": "Camera Id",
            "description": "Internal camera UUID (from cameras table)"
          },
          "start_time": {
            "type": "string",
            "format": "date-time",
            "title": "Start Time",
            "description": "Clip start time (ISO 8601 with timezone)"
          },
          "end_time": {
            "type": "string",
            "format": "date-time",
            "title": "End Time",
            "description": "Clip end time (ISO 8601 with timezone)"
          }
        },
        "type": "object",
        "required": [
          "camera_id",
          "start_time",
          "end_time"
        ],
        "title": "TestClipDownloadRequest",
        "description": "Request body for testing clip download (Story P3-1.5)",
        "examples": [
          {
            "camera_id": "550e8400-e29b-41d4-a716-446655440000",
            "end_time": "2025-12-05T10:00:30Z",
            "start_time": "2025-12-05T10:00:00Z"
          }
        ]
      },
      "TestClipDownloadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether clip download succeeded"
          },
          "file_size_bytes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Size Bytes",
            "description": "Size of downloaded clip in bytes (on success)"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds",
            "description": "Duration of video clip in seconds (on success)"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message describing failure (on failure)"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "TestClipDownloadResponse",
        "description": "Response for test clip download endpoint (Story P3-1.5)\n\nReturns HTTP 200 for all outcomes - check 'success' field for result.\nThis is a test endpoint, so failures are reported as data, not HTTP errors.",
        "examples": [
          {
            "duration_seconds": 10.5,
            "file_size_bytes": 2457600,
            "success": true
          },
          {
            "error": "Camera not found in any Protect controller",
            "success": false
          }
        ]
      },
      "TestConnectionRequest": {
        "properties": {
          "rtsp_url": {
            "type": "string",
            "minLength": 10,
            "title": "Rtsp Url",
            "description": "RTSP URL to test (must start with rtsp:// or rtsps://)"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "description": "Username for RTSP authentication (if required)"
          },
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "description": "Password for RTSP authentication (if required)"
          }
        },
        "type": "object",
        "required": [
          "rtsp_url"
        ],
        "title": "TestConnectionRequest",
        "description": "Request to test an RTSP connection without saving the camera.\n\nValidates the RTSP URL format and optionally includes credentials\nfor authenticated streams.",
        "example": {
          "password": "password123",
          "rtsp_url": "rtsp://192.168.1.100:554/stream",
          "username": "admin"
        }
      },
      "TestConnectionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the connection test was successful"
          },
          "latency_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latency Ms",
            "description": "Time to establish connection and receive first frame (ms)"
          },
          "resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution",
            "description": "Video resolution (e.g., '1920x1080')"
          },
          "fps": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fps",
            "description": "Frame rate (frames per second)"
          },
          "codec": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Codec",
            "description": "Video codec (e.g., 'H.264', 'H.265')"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if test failed"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "TestConnectionResponse",
        "description": "Response from RTSP connection test endpoint.\n\nReturns stream metadata on success, or error details on failure.",
        "examples": [
          {
            "codec": "H.264",
            "fps": 30,
            "latency_ms": 234,
            "resolution": "1920x1080",
            "success": true
          },
          {
            "error": "Authentication failed - check username/password",
            "success": false
          }
        ]
      },
      "TestKeyRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "openai",
              "anthropic",
              "google",
              "grok"
            ],
            "title": "Provider",
            "description": "AI provider to test"
          },
          "api_key": {
            "type": "string",
            "minLength": 1,
            "title": "Api Key",
            "description": "API key to test"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "api_key"
        ],
        "title": "TestKeyRequest",
        "description": "Request body for API key test endpoint"
      },
      "TestKeyResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "Whether the key is valid"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Result message"
          },
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "Provider that was tested"
          }
        },
        "type": "object",
        "required": [
          "valid",
          "message",
          "provider"
        ],
        "title": "TestKeyResponse",
        "description": "Response from API key test endpoint"
      },
      "TestNotificationResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "results": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/TestNotificationResult"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "TestNotificationResponse",
        "description": "Response from test notification endpoint."
      },
      "TestNotificationResult": {
        "properties": {
          "subscription_id": {
            "type": "string",
            "title": "Subscription Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "subscription_id",
          "success"
        ],
        "title": "TestNotificationResult",
        "description": "Result for a single subscription in test."
      },
      "ThresholdUpdateRequest": {
        "properties": {
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Audio event type to update (glass_break, gunshot, scream, doorbell, other)"
          },
          "threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Threshold",
            "description": "New confidence threshold value (0.0 to 1.0)"
          }
        },
        "type": "object",
        "required": [
          "event_type",
          "threshold"
        ],
        "title": "ThresholdUpdateRequest",
        "description": "Request schema for updating a single threshold",
        "examples": [
          {
            "event_type": "glass_break",
            "threshold": 0.8
          }
        ]
      },
      "ThresholdUpdateResponse": {
        "properties": {
          "event_type": {
            "type": "string",
            "title": "Event Type",
            "description": "Updated audio event type"
          },
          "old_threshold": {
            "type": "number",
            "title": "Old Threshold",
            "description": "Previous threshold value"
          },
          "new_threshold": {
            "type": "number",
            "title": "New Threshold",
            "description": "New threshold value"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "event_type",
          "old_threshold",
          "new_threshold",
          "message"
        ],
        "title": "ThresholdUpdateResponse",
        "description": "Response schema for threshold update",
        "examples": [
          {
            "event_type": "glass_break",
            "message": "Threshold updated successfully",
            "new_threshold": 0.8,
            "old_threshold": 0.7
          }
        ]
      },
      "TimeOfDay": {
        "properties": {
          "start": {
            "type": "string",
            "pattern": "^([01]\\d|2[0-3]):([0-5]\\d)$",
            "title": "Start",
            "description": "Start time in HH:MM format (24-hour)"
          },
          "end": {
            "type": "string",
            "pattern": "^([01]\\d|2[0-3]):([0-5]\\d)$",
            "title": "End",
            "description": "End time in HH:MM format (24-hour)"
          }
        },
        "type": "object",
        "required": [
          "start",
          "end"
        ],
        "title": "TimeOfDay",
        "description": "Time range for rule conditions (optional)",
        "examples": [
          {
            "end": "17:00",
            "start": "09:00"
          }
        ]
      },
      "TimeRangeResponse": {
        "properties": {
          "start": {
            "type": "string",
            "title": "Start",
            "description": "Start time ISO format"
          },
          "end": {
            "type": "string",
            "title": "End",
            "description": "End time ISO format"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable time description"
          }
        },
        "type": "object",
        "required": [
          "start",
          "end",
          "description"
        ],
        "title": "TimeRangeResponse",
        "description": "Time range information in response."
      },
      "UnlinkEventResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "UnlinkEventResponse",
        "description": "Response for event unlink operation (Story P9-4.3)."
      },
      "UnsubscribeRequest": {
        "properties": {
          "endpoint": {
            "type": "string",
            "title": "Endpoint",
            "description": "Push service endpoint URL to unsubscribe"
          }
        },
        "type": "object",
        "required": [
          "endpoint"
        ],
        "title": "UnsubscribeRequest",
        "description": "Request body for push unsubscription."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "User UUID"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Username"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Account active status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Account creation timestamp"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login",
            "description": "Last login timestamp"
          }
        },
        "type": "object",
        "required": [
          "id",
          "username",
          "is_active",
          "created_at"
        ],
        "title": "UserResponse",
        "description": "User information response"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "Whether backup is valid"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Validation result message"
          },
          "app_version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "App Version",
            "description": "Backup app version"
          },
          "backup_timestamp": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Backup Timestamp",
            "description": "Backup creation time"
          },
          "warnings": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Warnings",
            "description": "Validation warnings"
          },
          "contents": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BackupContentsResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "What's in the backup (FF-007)"
          }
        },
        "type": "object",
        "required": [
          "valid",
          "message"
        ],
        "title": "ValidationResponse",
        "description": "Response from backup validation"
      },
      "VapidPublicKeyResponse": {
        "properties": {
          "public_key": {
            "type": "string",
            "title": "Public Key",
            "description": "VAPID public key in URL-safe base64"
          }
        },
        "type": "object",
        "required": [
          "public_key"
        ],
        "title": "VapidPublicKeyResponse",
        "description": "Response containing VAPID public key."
      },
      "VehicleDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Vehicle UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Record creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          },
          "vehicle_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Type",
            "description": "Detected vehicle type"
          },
          "primary_color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Color",
            "description": "Primary color if detected"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata (colors, make, etc.)",
            "default": {}
          },
          "recent_detections": {
            "items": {
              "$ref": "#/components/schemas/VehicleDetectionItem"
            },
            "type": "array",
            "title": "Recent Detections",
            "description": "Recent detections",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count",
          "created_at",
          "updated_at"
        ],
        "title": "VehicleDetailResponse",
        "description": "Response for GET /vehicles/{id} endpoint."
      },
      "VehicleDetectionItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Vehicle embedding UUID"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "Event UUID"
          },
          "bounding_box": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bounding Box",
            "description": "Vehicle bounding box coordinates"
          },
          "confidence": {
            "type": "number",
            "title": "Confidence",
            "description": "Vehicle detection confidence"
          },
          "vehicle_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Type",
            "description": "Detected vehicle type"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When vehicle was detected"
          },
          "event_timestamp": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Event Timestamp",
            "description": "Event timestamp"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url",
            "description": "Event thumbnail URL"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "confidence",
          "created_at"
        ],
        "title": "VehicleDetectionItem",
        "description": "Vehicle detection linked to a vehicle entity."
      },
      "VehicleEmbeddingResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "UUID of the vehicle embedding"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the associated event"
          },
          "entity_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Entity Id",
            "description": "UUID of linked vehicle entity"
          },
          "bounding_box": {
            "additionalProperties": true,
            "type": "object",
            "title": "Bounding Box",
            "description": "Vehicle bounding box: {x, y, width, height}"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Vehicle detection confidence"
          },
          "vehicle_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Type",
            "description": "Detected vehicle type"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version",
            "description": "Model version used for embedding"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "When the vehicle embedding was created (ISO 8601)"
          }
        },
        "type": "object",
        "required": [
          "id",
          "event_id",
          "bounding_box",
          "confidence",
          "model_version",
          "created_at"
        ],
        "title": "VehicleEmbeddingResponse",
        "description": "Response model for a single vehicle embedding."
      },
      "VehicleEmbeddingsResponse": {
        "properties": {
          "event_id": {
            "type": "string",
            "title": "Event Id",
            "description": "UUID of the event"
          },
          "vehicle_count": {
            "type": "integer",
            "title": "Vehicle Count",
            "description": "Number of vehicle embeddings"
          },
          "vehicles": {
            "items": {
              "$ref": "#/components/schemas/VehicleEmbeddingResponse"
            },
            "type": "array",
            "title": "Vehicles",
            "description": "List of vehicle embeddings"
          }
        },
        "type": "object",
        "required": [
          "event_id",
          "vehicle_count",
          "vehicles"
        ],
        "title": "VehicleEmbeddingsResponse",
        "description": "Response model for vehicle embeddings list."
      },
      "VehicleListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Vehicle UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "User-assigned name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "embedding_count": {
            "type": "integer",
            "title": "Embedding Count",
            "description": "Number of vehicle embeddings linked"
          },
          "vehicle_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Type",
            "description": "Detected vehicle type (car, truck, etc.)"
          },
          "primary_color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Color",
            "description": "Primary color if detected"
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count",
          "embedding_count"
        ],
        "title": "VehicleListItem",
        "description": "Single vehicle in list response."
      },
      "VehicleListResponse": {
        "properties": {
          "vehicles": {
            "items": {
              "$ref": "#/components/schemas/VehicleListItem"
            },
            "type": "array",
            "title": "Vehicles",
            "description": "List of vehicles"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of vehicles"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Maximum returned"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Pagination offset"
          }
        },
        "type": "object",
        "required": [
          "vehicles",
          "total",
          "limit",
          "offset"
        ],
        "title": "VehicleListResponse",
        "description": "Response for GET /vehicles endpoint."
      },
      "VehicleStatsResponse": {
        "properties": {
          "total_vehicle_embeddings": {
            "type": "integer",
            "title": "Total Vehicle Embeddings",
            "description": "Total vehicle embeddings in database"
          },
          "vehicle_recognition_enabled": {
            "type": "boolean",
            "title": "Vehicle Recognition Enabled",
            "description": "Whether vehicle recognition is enabled"
          },
          "model_version": {
            "type": "string",
            "title": "Model Version",
            "description": "Current vehicle embedding model version"
          }
        },
        "type": "object",
        "required": [
          "total_vehicle_embeddings",
          "vehicle_recognition_enabled",
          "model_version"
        ],
        "title": "VehicleStatsResponse",
        "description": "Response model for vehicle embedding statistics."
      },
      "VehicleUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "New name for the vehicle (None to clear)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Optional metadata updates"
          },
          "is_vip": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Vip",
            "description": "Mark as VIP for priority alerts (Story P4-8.4)"
          },
          "is_blocked": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Blocked",
            "description": "Block alerts for this vehicle (Story P4-8.4)"
          }
        },
        "type": "object",
        "title": "VehicleUpdateRequest",
        "description": "Request for PUT /vehicles/{id} endpoint."
      },
      "VehicleUpdateResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Vehicle UUID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Updated name"
          },
          "first_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "First Seen At",
            "description": "First occurrence timestamp"
          },
          "last_seen_at": {
            "type": "string",
            "format": "date-time",
            "title": "Last Seen At",
            "description": "Most recent occurrence timestamp"
          },
          "occurrence_count": {
            "type": "integer",
            "title": "Occurrence Count",
            "description": "Number of times seen"
          },
          "vehicle_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vehicle Type",
            "description": "Detected vehicle type"
          },
          "primary_color": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Color",
            "description": "Primary color"
          },
          "is_vip": {
            "type": "boolean",
            "title": "Is Vip",
            "description": "VIP status (Story P4-8.4)",
            "default": false
          },
          "is_blocked": {
            "type": "boolean",
            "title": "Is Blocked",
            "description": "Blocked status (Story P4-8.4)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "first_seen_at",
          "last_seen_at",
          "occurrence_count"
        ],
        "title": "VehicleUpdateResponse",
        "description": "Response for PUT /vehicles/{id} endpoint."
      },
      "VipBlockedEntityListResponse": {
        "properties": {
          "entities": {
            "items": {
              "$ref": "#/components/schemas/EntityListItem"
            },
            "type": "array",
            "title": "Entities",
            "description": "List of entities"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total count matching filter"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "Page size"
          },
          "offset": {
            "type": "integer",
            "title": "Offset",
            "description": "Pagination offset"
          }
        },
        "type": "object",
        "required": [
          "entities",
          "total",
          "limit",
          "offset"
        ],
        "title": "VipBlockedEntityListResponse",
        "description": "Response for VIP/blocked entity list endpoints."
      },
      "VoiceQueryError": {
        "properties": {
          "error": {
            "type": "string",
            "title": "Error",
            "description": "Error message in spoken format"
          },
          "suggestion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggestion",
            "description": "Suggestion for how to rephrase the query"
          }
        },
        "type": "object",
        "required": [
          "error"
        ],
        "title": "VoiceQueryError",
        "description": "Error response model."
      },
      "VoiceQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Query",
            "description": "Natural language query",
            "examples": [
              "What's happening at the front door?",
              "Any activity this morning?"
            ]
          },
          "camera_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Camera Id",
            "description": "Optional camera ID to filter results"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "VoiceQueryRequest",
        "description": "Request model for voice query endpoint."
      },
      "VoiceQueryResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "Natural language response optimized for TTS"
          },
          "events_found": {
            "type": "integer",
            "title": "Events Found",
            "description": "Number of events matching the query"
          },
          "time_range": {
            "$ref": "#/components/schemas/TimeRangeResponse",
            "description": "Parsed time range from query"
          },
          "cameras_involved": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Cameras Involved",
            "description": "Names of cameras with matching events"
          }
        },
        "type": "object",
        "required": [
          "response",
          "events_found",
          "time_range"
        ],
        "title": "VoiceQueryResponse",
        "description": "Response model for voice query endpoint."
      },
      "WebhookConfig": {
        "properties": {
          "url": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Url",
            "description": "Webhook URL (must be HTTPS in production)"
          },
          "headers": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Headers",
            "description": "Custom headers for authentication"
          }
        },
        "type": "object",
        "required": [
          "url"
        ],
        "title": "WebhookConfig",
        "description": "Webhook configuration for rule actions",
        "examples": [
          {
            "headers": {
              "Authorization": "Bearer token123"
            },
            "url": "https://hooks.example.com/webhook"
          }
        ]
      },
      "WebhookLogResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "alert_rule_id": {
            "type": "string",
            "title": "Alert Rule Id"
          },
          "rule_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rule Name"
          },
          "event_id": {
            "type": "string",
            "title": "Event Id"
          },
          "url": {
            "type": "string",
            "title": "Url"
          },
          "status_code": {
            "type": "integer",
            "title": "Status Code"
          },
          "response_time_ms": {
            "type": "integer",
            "title": "Response Time Ms"
          },
          "retry_count": {
            "type": "integer",
            "title": "Retry Count"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "alert_rule_id",
          "event_id",
          "url",
          "status_code",
          "response_time_ms",
          "retry_count",
          "success",
          "created_at"
        ],
        "title": "WebhookLogResponse",
        "description": "Response schema for a single webhook log entry."
      },
      "WebhookLogsListResponse": {
        "properties": {
          "data": {
            "items": {
              "$ref": "#/components/schemas/WebhookLogResponse"
            },
            "type": "array",
            "title": "Data"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          }
        },
        "type": "object",
        "required": [
          "data",
          "total_count"
        ],
        "title": "WebhookLogsListResponse",
        "description": "Response schema for webhook logs list."
      },
      "WebhookTestRequest": {
        "properties": {
          "url": {
            "type": "string",
            "title": "Url",
            "description": "Webhook URL to test"
          },
          "headers": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Headers",
            "description": "Custom headers"
          },
          "payload": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Payload",
            "description": "Custom payload (uses sample if not provided)"
          }
        },
        "type": "object",
        "required": [
          "url"
        ],
        "title": "WebhookTestRequest",
        "description": "Request schema for webhook test endpoint."
      },
      "WebhookTestResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "status_code": {
            "type": "integer",
            "title": "Status Code"
          },
          "response_body": {
            "type": "string",
            "title": "Response Body",
            "description": "Response body (truncated to 200 chars)"
          },
          "response_time_ms": {
            "type": "integer",
            "title": "Response Time Ms"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success",
          "status_code",
          "response_body",
          "response_time_ms"
        ],
        "title": "WebhookTestResponse",
        "description": "Response schema for webhook test endpoint."
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT access token obtained from POST /api/v1/auth/login"
      },
      "cookieAuth": {
        "type": "apiKey",
        "in": "cookie",
        "name": "access_token",
        "description": "JWT token stored in HTTP-only cookie (set by login endpoint)"
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and session management"
    },
    {
      "name": "cameras",
      "description": "Camera configuration and control"
    },
    {
      "name": "events",
      "description": "AI-generated event management and search"
    },
    {
      "name": "Protect Controllers",
      "description": "UniFi Protect controller management"
    },
    {
      "name": "Alert Rules",
      "description": "Alert rule configuration"
    },
    {
      "name": "Webhooks",
      "description": "Webhook delivery management"
    },
    {
      "name": "Notifications",
      "description": "In-app notification management"
    },
    {
      "name": "Push Notifications",
      "description": "Web push subscription management"
    },
    {
      "name": "Integrations",
      "description": "MQTT and Home Assistant integration"
    },
    {
      "name": "HomeKit",
      "description": "Apple HomeKit integration"
    },
    {
      "name": "Context",
      "description": "Entity and similarity search"
    },
    {
      "name": "Summaries",
      "description": "Activity summaries and digests"
    },
    {
      "name": "Feedback",
      "description": "User feedback on AI descriptions"
    },
    {
      "name": "Voice",
      "description": "Voice query processing"
    },
    {
      "name": "System",
      "description": "System configuration and health"
    },
    {
      "name": "AI",
      "description": "AI provider configuration and usage"
    },
    {
      "name": "Metrics",
      "description": "Prometheus metrics"
    },
    {
      "name": "Logs",
      "description": "Application log access"
    },
    {
      "name": "Discovery",
      "description": "ONVIF camera discovery"
    },
    {
      "name": "Audio",
      "description": "Audio event detection"
    },
    {
      "name": "Digests",
      "description": "Daily digest scheduling"
    },
    {
      "name": "Motion Events",
      "description": "Raw motion event tracking"
    },
    {
      "name": "System Notifications",
      "description": "System alerts and cost notifications"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    },
    {
      "cookieAuth": []
    }
  ]
}